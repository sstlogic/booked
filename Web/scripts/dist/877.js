"use strict";(self.webpackChunkbooked_scheduler=self.webpackChunkbooked_scheduler||[]).push([[877],{61630:(e,t)=>{function r(){return function(e){if(!e||""===e)return{resourceFilterShown:!0,isResourceListExpanded:!0,resourcePickerVisibleSection:{},resourcePickerExpandedGroups:{}};const t=JSON.parse(e);return{resourceFilterShown:void 0===t.resourceFilterShown||t.resourceFilterShown,isResourceListExpanded:void 0===t.isResourceListExpanded||t.isResourceListExpanded,resourcePickerVisibleSection:void 0===t.resourcePickerVisibleSection?{}:t.resourcePickerVisibleSection,resourcePickerExpandedGroups:void 0===t.resourcePickerExpandedGroups?{}:t.resourcePickerExpandedGroups}}(localStorage.getItem("booked-ui-settings"))}Object.defineProperty(t,"__esModule",{value:!0}),t.getUISettings=t.persistUISettings=void 0,t.persistUISettings=function(e){const t=Object.assign(r(),e);localStorage.setItem("booked-ui-settings",JSON.stringify(t))},t.getUISettings=r},78929:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttribute=void 0;const i=a(r(67294)),n=r(81468),l=r(73356),u=r(69989);t.CustomAttribute=function(e){const{attribute:t,value:r,dateTimeFormat:a}=e,{t:o}=(0,n.useTranslation)();return i.default.createElement("div",{className:"attribute"},i.default.createElement("span",{className:"attribute-label"},t.label),t.type===u.AttributeTypeOptions.Link&&i.default.createElement("span",null,i.default.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},r)),t.type!==u.AttributeTypeOptions.Link&&i.default.createElement("span",{className:"attribute-value",dangerouslySetInnerHTML:{__html:t.type===u.AttributeTypeOptions.Checkbox?o("1"===r?"Yes":"No"):r&&t.type===u.AttributeTypeOptions.DateTime?(0,l.format)(new Date(r),a||o("react_datetime")):r&&t.type===u.AttributeTypeOptions.MultiSelect?r.replace(/,/g,", "):r?r.replace("\n","<br/>"):r||o("None")}}))}},32750:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeCheckbox=void 0;const i=a(r(67294)),n=r(81468);t.CustomAttributeCheckbox=function(e){const{t}=(0,n.useTranslation)(),r=e.id||`attribute-${e.attribute.id}`,a=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`,l=void 0!==e.value&&""!==e.value;return i.default.createElement("div",{className:"form-check attribute"},l?i.default.createElement(i.default.Fragment,null):i.default.createElement("input",{type:"hidden",id:`${r}-hidden`,name:a,value:0}),i.default.createElement("input",{id:r,name:a,className:"form-check-input",type:"checkbox",onChange:t=>e.onChange(t.target.checked?"1":null),checked:l,disabled:e.disabled}),i.default.createElement("label",{className:"form-check-label",htmlFor:r},e.attribute.label,e.attribute.required&&i.default.createElement("span",null," *")),!e.isValid&&i.default.createElement("span",{className:"custom-attribute-error"},t("CustomAttributeInvalid",{s1:e.attribute.label})))}},66482:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeDate=void 0;const i=a(r(67294)),n=r(81468),l=a(r(9198)),u=r(73356);r(44308),t.CustomAttributeDate=function(e){const{t}=(0,n.useTranslation)(),r=e.id||`attribute-${e.attribute.id}`,a=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`,o=e.dateTimeFormat&&e.dateTimeFormat.includes(" ")?e.dateTimeFormat.split(" ")[1]:void 0;return i.default.createElement("div",{className:"attribute"},i.default.createElement("label",{htmlFor:r,className:"form-label"},e.attribute.label,e.attribute.required&&i.default.createElement("span",null," *")),i.default.createElement(l.default,{id:r,name:a,className:"form-control",selected:function(){if(!e.value)return null;const t=Date.parse(e.value);return Number.isNaN(t)?null:new Date(t)}(),onChange:t=>{(t instanceof Date||null===t)&&e.onChange(t?(0,u.format)(t,"yyyy/MM/dd HH:mm"):"")},dateFormat:e.dateTimeFormat||"Pp",locale:e.lang,showTimeSelect:!0,isClearable:!0,required:e.attribute.required,disabled:e.disabled,timeFormat:o,calendarStartDay:e.firstDayOfWeek}),!e.isValid&&i.default.createElement("span",{className:"custom-attribute-error"},t("CustomAttributeInvalid",{s1:e.attribute.label})))}},34297:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeEdit=void 0;const i=a(r(67294)),n=r(69989),l=r(66482),u=r(32750),o=r(72243),s=r(47975),c=r(39593),d=r(82818),b=r(25764);t.CustomAttributeEdit=function(e){const{attribute:t}=e;return t.type===n.AttributeTypeOptions.DateTime?i.default.createElement(l.CustomAttributeDate,Object.assign({},e)):t.type===n.AttributeTypeOptions.Checkbox?i.default.createElement(u.CustomAttributeCheckbox,Object.assign({},e)):t.type===n.AttributeTypeOptions.SelectList?i.default.createElement(o.CustomAttributeSelect,Object.assign({},e)):t.type===n.AttributeTypeOptions.MultiLineTextbox?i.default.createElement(c.CustomAttributeTextarea,Object.assign({},e)):t.type===n.AttributeTypeOptions.MultiSelect?i.default.createElement(d.CustomAttributeMultiSelect,Object.assign({},e)):t.type===n.AttributeTypeOptions.Link?i.default.createElement(b.CustomAttributeLink,Object.assign({},e)):i.default.createElement(s.CustomAttributeTextbox,Object.assign({},e))}},25764:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeLink=void 0;const l=n(r(67294)),u=r(81468);t.CustomAttributeLink=function(e){const{t}=(0,u.useTranslation)(),r=e.id||`attribute-${e.attribute.id}`,a=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`,[i,n]=(0,l.useState)(e.value||"");return l.default.createElement("div",{className:"attribute clearable"},l.default.createElement("label",{className:"form-label",htmlFor:r},e.attribute.label,e.attribute.required&&l.default.createElement("span",null," *")),l.default.createElement("input",{id:r,name:a,type:"url",className:"form-control",value:i,required:e.attribute.required,onChange:e=>n(e.target.value),onBlur:()=>e.onChange(i.trim()),disabled:e.disabled}),!e.disabled&&i.length>0&&l.default.createElement("i",{className:"clearable__clear",style:{display:""===e.value?"none":"block"},onClick:t=>{n(""),e.onChange(""),t.preventDefault(),t.stopPropagation()}},"×"),!e.isValid&&l.default.createElement("span",{className:"custom-attribute-error"},t("CustomAttributeInvalid",{s1:e.attribute.label})))}},82818:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeMultiSelect=void 0;const i=a(r(67294)),n=r(81468),l=a(r(23157));t.CustomAttributeMultiSelect=function(e){const{t}=(0,n.useTranslation)(),r=e.id||`attribute-${e.attribute.id}`,a=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`,u=e.attribute.possibleValues.map((e=>({label:e,value:e})));return i.default.createElement("div",{className:"attribute"},i.default.createElement("label",{className:"form-label",htmlFor:r},e.attribute.label,e.attribute.required&&i.default.createElement("span",null," *")),i.default.createElement(l.default,{value:u.filter((t=>(e.value||"").split(",").includes(t.value))),id:r,name:a,isClearable:!e.disabled,isMulti:!0,onChange:t=>{return r=t.map((e=>e.value)).join(","),void e.onChange(r||"");var r},options:u,getOptionLabel:e=>e.label,getOptionValue:e=>e.value,isDisabled:e.disabled}),!e.isValid&&i.default.createElement("span",{className:"custom-attribute-error"},t("CustomAttributeInvalid",{s1:e.attribute.label})))}},72243:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeSelect=void 0;const i=a(r(67294)),n=r(81468),l=a(r(23157));t.CustomAttributeSelect=function(e){const{t}=(0,n.useTranslation)(),r=e.id||`attribute-${e.attribute.id}`,a=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`;return i.default.createElement("div",{className:"attribute"},i.default.createElement("label",{className:"form-label",htmlFor:r},e.attribute.label,e.attribute.required&&i.default.createElement("span",null," *")),i.default.createElement(l.default,{value:function(){const t=e.attribute.possibleValues.find((t=>{var r;return t.toLocaleLowerCase()===(null===(r=e.value)||void 0===r?void 0:r.toLocaleLowerCase())}));return t?{label:t,value:t}:null}(),id:r,name:a,isClearable:!e.disabled,onChange:t=>{return r=t,void e.onChange((null==r?void 0:r.value)||"");var r},options:e.attribute.possibleValues.map((e=>({label:e,value:e}))),getOptionLabel:e=>e.label,getOptionValue:e=>e.value,isDisabled:e.disabled}),!e.isValid&&i.default.createElement("span",{className:"custom-attribute-error"},t("CustomAttributeInvalid",{s1:e.attribute.label})))}},39593:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeTextarea=void 0;const l=n(r(67294)),u=r(81468);t.CustomAttributeTextarea=function(e){const{t}=(0,u.useTranslation)(),r=e.id||`attribute-${e.attribute.id}`,a=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`,[i,n]=(0,l.useState)(e.value||"");return l.default.createElement("div",{className:"attribute clearable"},l.default.createElement("label",{className:"form-label",htmlFor:r},e.attribute.label," ",e.attribute.required&&l.default.createElement("span",null," *")),l.default.createElement("textarea",{id:r,name:a,className:"form-control",value:i,required:e.attribute.required,onChange:e=>n(e.target.value),onBlur:()=>{return t=i.trim(),void e.onChange(t);var t},disabled:e.disabled}),!e.disabled&&i.length>0&&l.default.createElement("i",{className:"clearable__clear",style:{display:""===e.value?"none":"block"},onClick:t=>{n(""),e.onChange(""),t.preventDefault(),t.stopPropagation()}},"×"),!e.isValid&&l.default.createElement("span",{className:"custom-attribute-error"},t("CustomAttributeInvalid",{s1:e.attribute.label})))}},47975:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,i)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeTextbox=void 0;const l=n(r(67294)),u=r(81468);t.CustomAttributeTextbox=function(e){const{t}=(0,u.useTranslation)(),r=e.id||`attribute-${e.attribute.id}`,a=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`,[i,n]=(0,l.useState)(e.value||"");return l.default.createElement("div",{className:"attribute clearable"},l.default.createElement("label",{className:"form-label",htmlFor:r},e.attribute.label,e.attribute.required&&l.default.createElement("span",null," *")),l.default.createElement("input",{id:r,name:a,type:"text",className:"form-control",value:i,required:e.attribute.required,onChange:e=>n(e.target.value),onBlur:()=>e.onChange(i.trim()),disabled:e.disabled}),!e.disabled&&l.default.createElement("i",{className:"clearable__clear",style:{display:0===i.length?"none":"block"},onClick:t=>{n(""),e.onChange(""),t.preventDefault(),t.stopPropagation()}},"×"),!e.isValid&&l.default.createElement("span",{className:"custom-attribute-error"},t("CustomAttributeInvalid",{s1:e.attribute.label})))}},81902:function(e,t){var r=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(i,n){function l(e){try{o(a.next(e))}catch(e){n(e)}}function u(e){try{o(a.throw(e))}catch(e){n(e)}}function o(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(l,u)}o((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Api=void 0,t.Api=class{constructor(e,t){this.baseUrl=e,this.csrfToken=t}post(e,t,a,i){return r(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/${e}?api=${t}`,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Csrf-Token":`${this.csrfToken}`},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(a)}).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((e=>i?i(e.data):e.data))}))}postFiles(e,t,a){return r(this,void 0,void 0,(function*(){return a.append("CSRF_TOKEN",this.csrfToken),fetch(`${this.baseUrl}/${e}?action=${t}`,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"X-Csrf-Token":`${this.csrfToken}`,Accept:"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:a}).then((e=>this.parseJson(e))).then((e=>{const{response:t,json:r}=e;if(!t.ok){const e=new Error(t.statusText);throw e.response=r,e.status=t.status,e}return r})).then((e=>e.data))}))}parseJson(e){return new Promise((t=>e.json().then((r=>t({response:e,json:r})))))}get(e,t,a,i){return r(this,void 0,void 0,(function*(){return fetch(`${this.baseUrl}/${e}?api=${t}&${new URLSearchParams(a)}`,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Csrf-Token":`${this.csrfToken}`},redirect:"follow",referrerPolicy:"no-referrer"}).then((e=>this.parseJson(e))).then((e=>{const{response:t,json:r}=e;if(!t.ok){const e=new Error(t.statusText);throw e.response=r,e.status=t.status,e}return r})).then((e=>i?i(e.data):e.data))}))}logError(e){return r(this,void 0,void 0,(function*(){try{console.error(e.error),yield this.post("api/error.php","log",{action:e.action,context:e.context,error:JSON.stringify(e.error,Object.getOwnPropertyNames(e.error))})}catch(e){console.error(e)}}))}}}}]);