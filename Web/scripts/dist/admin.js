"use strict";(self.webpackChunkbooked_scheduler=self.webpackChunkbooked_scheduler||[]).push([[328],{11481:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageCustomAttributeComponent=void 0;const l=n(a(67294)),r=a(81468),o=a(69989),i=a(57938),s=n(a(23157)),u=a(68442),c=a(84228),d=a(60519);t.ManageCustomAttributeComponent=function(e){const{state:t,attribute:a}=e,{id:n,type:m,category:f,displayLabel:p,validationExpression:h,sortOrder:b,required:g,adminOnly:v,isPrivate:E,collectFor:y,appliesTo:C,possibleValues:N,possibleValuesString:O,secondaryCategory:S,secondaryEntityIds:_,entityIds:k,isValidationExpressionAllowed:R,isPrivateAllowed:A,isAppliesToAllowed:M,isCollectForAllowed:w,isPossibleValuesAllowed:x,isEditMode:P,onCategoryChanged:I,onTypeChanged:D,onDisplayLabelChanged:T,onValidationExpressionChanged:j,onSortOrderChanged:U,onRequiredChanged:F,onAdminOnlyChanged:L,onPrivateChanged:V,onCollectForChanged:B,onAppliesToChanged:q,onPossibleValuesChanged:H,onSecondaryEntityIdsChanged:G,onSecondaryCategoryChanged:$,onEntityIdsChanged:Q,onSaved:W}=(0,i.useManageCustomAttributeHooks)({state:t,onCategoryChanged:e.onCategoryChanged,attribute:a,onSaved:e.onSaved,category:e.category}),{t:z}=(0,r.useTranslation)();return l.default.createElement("form",{onSubmit:e=>{e.preventDefault(),W()}},l.default.createElement("div",{className:"default-box default-box-1-padding mb-2 add-update-attribute-container"},l.default.createElement("div",{className:"default-box-header d-flex justify-content-between"},l.default.createElement("div",null,z(P?"EditAttribute":"AddAttribute")),P&&l.default.createElement("div",null,"Id: ",n,l.default.createElement(c.BookedCopyToClipboard,{textToCopy:n.toString()},l.default.createElement("button",{type:"button",className:"btn btn-default",title:z("CopyToClipboard")},l.default.createElement("span",{className:"bi bi-clipboard"}))))),l.default.createElement("div",{className:"default-box-content margin-bottom-15"},l.default.createElement("div",{className:"row mt-3"},l.default.createElement("div",{className:"col-12 col-sm-6"},l.default.createElement("div",null,l.default.createElement("label",{className:"form-label",htmlFor:"attribute-category"},z("Category")),P&&l.default.createElement("div",{className:"attribute-edit-readonly-value"},f===o.AttributeCategory.Resource?z("Resource"):f===o.AttributeCategory.ResourceType?z("ResourceType"):f===o.AttributeCategory.User?z("User"):z("CategoryReservation")),!P&&l.default.createElement("select",{id:"attribute-category",className:"form-select",value:f,onChange:e=>I(e.target.value)},l.default.createElement("option",{value:o.AttributeCategory.Reservation},z("CategoryReservation")),l.default.createElement("option",{value:o.AttributeCategory.User},z("User")),l.default.createElement("option",{value:o.AttributeCategory.Resource},z("Resource")),l.default.createElement("option",{value:o.AttributeCategory.ResourceType},z("ResourceType")))),l.default.createElement("div",{className:"mt-3"},l.default.createElement("label",{htmlFor:"attribute-label",className:"form-label"},z("DisplayLabel")," *"),l.default.createElement("input",{className:"form-control",type:"text",required:!0,value:p,onChange:e=>T(e.target.value)})),l.default.createElement("div",{className:"mt-3"},l.default.createElement("label",{className:"form-label",htmlFor:"attribute-type"},z("Type")),P&&l.default.createElement("div",{className:"attribute-edit-readonly-value"},m===o.AttributeTypeOptions.SingleLineTextbox?z("SingleLineTextbox"):m===o.AttributeTypeOptions.MultiLineTextbox?z("MultiLineTextbox"):m===o.AttributeTypeOptions.SelectList?z("SelectList"):m===o.AttributeTypeOptions.Checkbox?z("Checkbox"):m===o.AttributeTypeOptions.MultiSelect?z("MultipleSelect"):m===o.AttributeTypeOptions.Link?z("Link"):z("DateTime")),!P&&l.default.createElement("select",{id:"attribute-type",className:"form-select",value:m,onChange:e=>D(e.target.value)},l.default.createElement("option",{value:o.AttributeTypeOptions.SingleLineTextbox},z("SingleLineTextbox")),l.default.createElement("option",{value:o.AttributeTypeOptions.MultiLineTextbox},z("MultiLineTextbox")),l.default.createElement("option",{value:o.AttributeTypeOptions.SelectList},z("SelectList")),l.default.createElement("option",{value:o.AttributeTypeOptions.MultiSelect},z("MultipleSelect")),l.default.createElement("option",{value:o.AttributeTypeOptions.Checkbox},z("Checkbox")),l.default.createElement("option",{value:o.AttributeTypeOptions.DateTime},z("DateTime")),l.default.createElement("option",{value:o.AttributeTypeOptions.Link},z("Link")))),x&&l.default.createElement("div",{className:"mt-3"},l.default.createElement("label",{className:"form-label",htmlFor:"attribute-possible-values"},z("PossibleValues")," (",z("CommaSeparated"),")"),l.default.createElement("input",{className:"form-control",placeholder:`${z("Add")}...`,value:O,id:"attribute-possible-values",onChange:e=>H(e.target.value)})),R&&l.default.createElement("div",{className:"mt-3"},l.default.createElement("label",{htmlFor:"attribute-validation",className:"form-label"},z("ValidationExpression")),l.default.createElement("div",{className:"input-group"},l.default.createElement("input",{id:"attribute-validation",type:"text",className:"form-control",value:h,onChange:e=>j(e.target.value)}),l.default.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},"Common Options"),l.default.createElement("ul",{className:"dropdown-menu dropdown-menu-end"},l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"dropdown-item",onClick:()=>j("/^\\d+$/")},"Only Numbers (at least 1)")),l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"dropdown-item",onClick:()=>j("/^[a-zA-Z]+$/")},"Only Letters (at least 1)")),l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"dropdown-item",onClick:()=>j("/^[a-zA-Z0-9]{1,10}$/")},"Letters and Numbers (up to 10)")),l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"dropdown-item",onClick:()=>j("/^[a-zA-Z0-9]{10}$/")},"Letters and Numbers (exactly 10)"))))),l.default.createElement("div",{className:"mt-3"},l.default.createElement("label",{htmlFor:"attribute-sort-order",className:"form-label"},z("SortOrder")),l.default.createElement("input",{id:"attribute-sort-order",type:"number",min:0,className:"form-control",value:b,onChange:e=>U(e.target.value)}))),l.default.createElement("div",{className:"col-12 col-sm-6"},l.default.createElement("div",{className:"form-check mt-4"},l.default.createElement("label",{htmlFor:"attribute-required",className:"form-check-label"},z("Required")),l.default.createElement("input",{id:"attribute-required",type:"checkbox",className:"form-check-input",checked:g,onChange:e=>F(e.target.checked)})),l.default.createElement("div",{className:"form-check mt-3"},l.default.createElement("label",{htmlFor:"attribute-admin-only",className:"form-check-label"},z("AdminOnly")),l.default.createElement("input",{id:"attribute-admin-only",type:"checkbox",className:"form-check-input",checked:v,onChange:e=>L(e.target.checked)})),A&&l.default.createElement("div",{className:"form-check mt-3"},l.default.createElement("label",{htmlFor:"attribute-private",className:"form-check-label"},z("Private")),l.default.createElement("input",{id:"attribute-private",type:"checkbox",className:"form-check-input",checked:E,onChange:e=>V(e.target.checked)})),M&&l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"form-check mt-3"},l.default.createElement("label",{htmlFor:"attribute-collect-for",className:"form-check-label"},z("OnlyCollectInCertainCases")),l.default.createElement("input",{id:"attribute-collect-for",type:"checkbox",className:"form-check-input",checked:C,onChange:e=>q(e.target.checked)})),C&&l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"d-flex align-items-center mt-3"},l.default.createElement("div",{className:"me-1"},z("If")),f===o.AttributeCategory.User&&l.default.createElement("div",null,z("User")),f===o.AttributeCategory.Resource&&l.default.createElement("div",null,z("Resource")),f===o.AttributeCategory.ResourceType&&l.default.createElement("div",null,z("ResourceType")),l.default.createElement("div",{className:"ms-1"},z("is"))),l.default.createElement("div",{className:"mt-1"},f===o.AttributeCategory.User&&l.default.createElement("div",null,l.default.createElement(s.default,{isSearchable:!0,isMulti:!0,isClearable:!0,options:t.users.allIds.map((e=>t.users.byId[e])),getOptionLabel:e=>e.fullName,getOptionValue:e=>e.id.toString(),onChange:e=>Q(e.map((e=>e.id))),value:k.map((e=>t.users.byId[e]))})),f===o.AttributeCategory.Resource&&l.default.createElement("div",null,l.default.createElement(s.default,{isSearchable:!0,isMulti:!0,isClearable:!0,options:t.resources.allIds.map((e=>t.resources.byId[e])),getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),onChange:e=>Q(e.map((e=>e.id))),value:k.map((e=>t.resources.byId[e]))})),f===o.AttributeCategory.ResourceType&&l.default.createElement("div",null,l.default.createElement(s.default,{isSearchable:!0,isMulti:!0,isClearable:!0,options:t.types.allIds.map((e=>t.types.byId[e])),getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),onChange:e=>Q(e.map((e=>e.id))),value:k.map((e=>t.types.byId[e]))}))))),w&&l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"form-check mt-3"},l.default.createElement("label",{htmlFor:"attribute-collect-for",className:"form-check-label"},z("OnlyCollectInCertainCases")),l.default.createElement("input",{id:"attribute-collect-for",type:"checkbox",className:"form-check-input",checked:y,onChange:e=>B(e.target.checked)})),y&&l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"d-flex align-items-center mt-3"},l.default.createElement("div",null,z("If")),l.default.createElement("div",{className:"ms-2 me-2"},l.default.createElement("select",{className:"form-select w-auto",value:S,onChange:e=>{$(Number.parseInt(e.target.value))}},l.default.createElement("option",{value:o.AttributeCategory.User},z("User")),l.default.createElement("option",{value:o.AttributeCategory.Resource},z("Resource")),t.types.allIds.length>0&&l.default.createElement("option",{value:o.AttributeCategory.ResourceType},z("ResourceType")))),l.default.createElement("div",null,z("is"))),l.default.createElement("div",{className:"mt-1"},S===o.AttributeCategory.User&&l.default.createElement("div",null,l.default.createElement(s.default,{isSearchable:!0,isMulti:!0,isClearable:!0,options:t.users.allIds.map((e=>t.users.byId[e])),getOptionLabel:e=>e.fullName,getOptionValue:e=>e.id.toString(),onChange:e=>G(e.map((e=>e.id))),value:_.map((e=>t.users.byId[e]))})),S===o.AttributeCategory.Resource&&l.default.createElement("div",null,l.default.createElement(s.default,{isSearchable:!0,isMulti:!0,isClearable:!0,options:t.resources.allIds.map((e=>t.resources.byId[e])),getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),onChange:e=>G(e.map((e=>e.id))),value:_.map((e=>t.resources.byId[e]))})),S===o.AttributeCategory.ResourceType&&l.default.createElement("div",null,l.default.createElement(s.default,{isSearchable:!0,isMulti:!0,isClearable:!0,options:t.types.allIds.map((e=>t.types.byId[e])),getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),onChange:e=>G(e.map((e=>e.id))),value:_.map((e=>t.types.byId[e]))})))))))),l.default.createElement("div",{className:"default-box-footer"},l.default.createElement(d.CancelButton,{onClick:()=>window.history.back()}),l.default.createElement(u.SubmitButton,{text:z(P?"Update":"Add")}))))}},57938:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useManageCustomAttributeHooks=void 0;const l=a(69989),r=a(67294);t.useManageCustomAttributeHooks=function(e){const t=(0,r.useMemo)((()=>e.attribute||{id:0,category:e.category,type:l.AttributeTypeOptions.SingleLineTextbox,label:"",required:!1,regex:"",sortOrder:0,isPrivate:!1,adminOnly:!1,possibleValues:[],secondaryCategory:null,secondaryEntityIds:[],entityIds:[]}),[e.attribute,e.category]),[a,o]=(0,r.useState)(t),[i,s]=(0,r.useState)(t.secondaryEntityIds.length>0),[u,c]=(0,r.useState)(t.entityIds.length>0),[d,m]=(0,r.useState)(t.possibleValues.join(", "));function f(){return[l.AttributeTypeOptions.SingleLineTextbox,l.AttributeTypeOptions.MultiLineTextbox].includes(a.type)}function p(){return[l.AttributeCategory.Reservation,l.AttributeCategory.User].includes(a.category)}function h(){return a.category===l.AttributeCategory.Reservation}function b(){return a.category!==l.AttributeCategory.Reservation}function g(){return[l.AttributeTypeOptions.SelectList,l.AttributeTypeOptions.MultiSelect].includes(a.type)}return(0,r.useEffect)((()=>{o(t),s(t.secondaryEntityIds.length>0),c(t.entityIds.length>0),m(t.possibleValues.join(", "))}),[e.attribute,e.category]),{id:a.id,type:a.type,category:a.category,displayLabel:a.label,validationExpression:a.regex,sortOrder:a.sortOrder,required:a.required,adminOnly:a.adminOnly,isPrivate:a.isPrivate,collectFor:i,appliesTo:u,possibleValues:a.possibleValues,possibleValuesString:d,secondaryCategory:a.secondaryCategory||l.AttributeCategory.User,secondaryEntityIds:a.secondaryEntityIds,entityIds:a.entityIds,isValidationExpressionAllowed:f(),isPrivateAllowed:p(),isAppliesToAllowed:b(),isCollectForAllowed:h(),isPossibleValuesAllowed:g(),isEditMode:0!==a.id,onCategoryChanged:function(e){o(Object.assign(Object.assign({},a),{category:Number.parseInt(e),entityIds:[]}))},onTypeChanged:function(e){o(Object.assign(Object.assign({},a),{type:Number.parseInt(e)}))},onDisplayLabelChanged:function(e){o(Object.assign(Object.assign({},a),{label:e}))},onValidationExpressionChanged:function(e){o(Object.assign(Object.assign({},a),{regex:e}))},onSortOrderChanged:function(e){o(Object.assign(Object.assign({},a),{sortOrder:e.length>0?Number.parseInt(e):0}))},onRequiredChanged:function(e){o(Object.assign(Object.assign({},a),{required:e}))},onAdminOnlyChanged:function(e){o(Object.assign(Object.assign({},a),{adminOnly:e}))},onPrivateChanged:function(e){o(Object.assign(Object.assign({},a),{isPrivate:e}))},onCollectForChanged:function(e){s(e)},onAppliesToChanged:function(e){c(e)},onPossibleValuesChanged:function(e){m(e)},onSecondaryCategoryChanged:function(e){o(Object.assign(Object.assign({},a),{secondaryEntityIds:[],secondaryCategory:e}))},onSecondaryEntityIdsChanged:function(e){o(Object.assign(Object.assign({},a),{secondaryEntityIds:e}))},onEntityIdsChanged:function(e){o(Object.assign(Object.assign({},a),{entityIds:e}))},onSaved:function(){return n(this,void 0,void 0,(function*(){if(a.label.trim().length>0){const t={adminOnly:a.adminOnly,entityIds:b()&&u?a.entityIds:[],id:a.id,isPrivate:!!p()&&a.isPrivate,label:a.label.trim(),possibleValues:g()?d.split(",").map((e=>e.trim())):[],regex:f()?a.regex:"",required:a.required,secondaryCategory:h()&&i?a.secondaryCategory||l.AttributeCategory.User:null,secondaryEntityIds:h()&&i?a.secondaryEntityIds:[],sortOrder:a.sortOrder,type:a.type,category:a.category};yield e.onSaved(t),yield e.onCategoryChanged(t.category)}}))}}}},36242:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useDeleteCustomAttribute=void 0;const l=a(67294);t.useDeleteCustomAttribute=function(e){const{state:t}=e,[a,r]=(0,l.useState)();return{attributeToDelete:a,onAttributeDeletePrompt:function(e){r(e)},onAttributeDeleteCancel:function(){r(void 0)},onAttributeDeleted:function(e){return n(this,void 0,void 0,(function*(){yield t.onAttributeDeleted(t.attributes.byId[e.id]),r(void 0)}))}}}},97435:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageCustomAttributesDeleteModal=void 0;const l=n(a(67294)),r=a(81468),o=a(41773),i=a(9965);t.ManageCustomAttributesDeleteModal=function(e){const{attributeToDelete:t,onClose:a,onDelete:n}=e,{t:s}=(0,r.useTranslation)();return t?l.default.createElement(o.Modal,{title:s("DeleteItemModalTitle",{itemName:t.label}),isOpen:!0,onToggle:a},l.default.createElement(o.ModalBody,null,l.default.createElement("div",{className:"alert alert-danger"},s("DeleteWarning"))),l.default.createElement(o.ModalFooter,null,l.default.createElement(i.DeleteAndCancelButtons,{onCancel:a,onDelete:()=>n(t)}))):l.default.createElement(l.default.Fragment,null)}},93675:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageCustomAttributesHeader=void 0;const l=n(a(67294)),r=a(81468),o=a(15127);t.ManageCustomAttributesHeader=function(){const{t:e}=(0,r.useTranslation)();return l.default.createElement("div",{id:"manage-monitor-views-header",className:"admin-page-header"},l.default.createElement("div",{className:"admin-page-header-title"},l.default.createElement("h1",null,e("CustomAttributes"))),l.default.createElement("div",{className:"admin-page-header-actions"},l.default.createElement("div",null,l.default.createElement("a",{href:o.NavigationPaths.Add,className:"btn admin-action-button"},l.default.createElement("span",{className:"d-none d-sm-block"},e("AddAttribute")," ",l.default.createElement("i",{className:"bi bi-plus-circle"})),l.default.createElement("span",{className:"d-block d-sm-none"},l.default.createElement("i",{className:"bi bi-plus-circle"}))))))}},88723:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageCustomAttributesListComponent=void 0;const o=r(a(67294)),i=a(69989),s=a(81468),u=a(64591),c=a(4974),d=a(15127),m=a(97435),f=a(36242);t.ManageCustomAttributesListComponent=function(e){const{t}=(0,s.useTranslation)(),{category:a,onCategoryChanged:n}=e,l=(0,o.useContext)(c.ManageCustomAttributesContext),{attributes:r}=(0,u.useManageCustomAttributesList)({state:l,category:a}),{attributeToDelete:p,onAttributeDeletePrompt:h,onAttributeDeleteCancel:b,onAttributeDeleted:g}=(0,f.useDeleteCustomAttribute)({state:l});function v(e){return"manage-attributes-navigation-item "+(a===e?"selected":"")}function E(e){return t(e?"Yes":"No")}return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"manage-attributes-container"},o.default.createElement("nav",{className:"manage-attributes-navigation"},o.default.createElement("div",{className:"manage-attributes-navigation-title"},t("AttributeCategory")),o.default.createElement("div",{className:v(i.AttributeCategory.Reservation),role:"button",onClick:()=>n(i.AttributeCategory.Reservation)},t("CategoryReservation")),o.default.createElement("div",{className:v(i.AttributeCategory.User),role:"button",onClick:()=>n(i.AttributeCategory.User)},t("User")),o.default.createElement("div",{className:v(i.AttributeCategory.Resource),role:"button",onClick:()=>n(i.AttributeCategory.Resource)},t("Resource")),o.default.createElement("div",{className:v(i.AttributeCategory.ResourceType),role:"button",onClick:()=>n(i.AttributeCategory.ResourceType)},t("ResourceType"))),o.default.createElement("div",{className:"manage-attributes-list"},o.default.createElement("div",null,r.length," ",t("Attributes")),r.map((e=>{var a,n;return o.default.createElement("div",{key:e.id,className:"manage-attributes-item"},o.default.createElement("div",{className:"manage-attributes-item-header"},o.default.createElement("div",{className:"manage-attributes-name"},e.label),o.default.createElement("div",null,o.default.createElement("a",{href:`${d.NavigationPaths.Edit}/${e.id}`,className:"btn btn-link btn-icon",title:t("Edit")},o.default.createElement("span",{className:"bi bi-pencil-square edit icon"})),o.default.createElement("button",{className:"btn btn-link btn-icon",title:t("Delete"),onClick:()=>h(e)},o.default.createElement("span",{className:"bi bi-trash delete icon"})))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-12 col-sm-1"},o.default.createElement("span",{className:"manage-attributes-item-label"},"Id"),o.default.createElement("span",{className:"manage-attributes-item-value"},e.id)),o.default.createElement("div",{className:"col-12 col-sm-3"},o.default.createElement("span",{className:"manage-attributes-item-label"},t("Type")),o.default.createElement("span",{className:"manage-attributes-item-value"},(n=e.type)===i.AttributeTypeOptions.SelectList?t("SelectList"):n===i.AttributeTypeOptions.DateTime?t("DateTime"):n===i.AttributeTypeOptions.SingleLineTextbox?t("SingleLineTextbox"):n===i.AttributeTypeOptions.MultiLineTextbox?t("MultiLineTextbox"):n===i.AttributeTypeOptions.Checkbox?t("Checkbox"):n===i.AttributeTypeOptions.MultiSelect?t("MultipleSelect"):"")),o.default.createElement("div",{className:"col-12 col-sm-2"},o.default.createElement("span",{className:"manage-attributes-item-label"},t("SortOrder")),o.default.createElement("span",{className:"manage-attributes-item-value"},e.sortOrder||t("Default"))),o.default.createElement("div",{className:"col-12 col-sm-2"},o.default.createElement("span",{className:"manage-attributes-item-label"},t("Required")),o.default.createElement("span",{className:"manage-attributes-item-value"},E(e.isRequired))),o.default.createElement("div",{className:"col-12 col-sm-2"},o.default.createElement("span",{className:"manage-attributes-item-label"},t("AdminOnly")),o.default.createElement("span",{className:"manage-attributes-item-value"},E(e.isAdminOnly))),(e.category===i.AttributeCategory.Reservation||e.category===i.AttributeCategory.User)&&o.default.createElement("div",{className:"col-12 col-sm-2"},o.default.createElement("span",{className:"manage-attributes-item-label"},t("Private")),o.default.createElement("span",{className:"manage-attributes-item-value"},E(e.isPrivate)))),o.default.createElement("div",{className:"row mt-2"},null!==e.regex&&(null===(a=e.regex)||void 0===a?void 0:a.length)>0&&o.default.createElement("div",{className:"col-12 col-sm-4"},o.default.createElement("span",{className:"manage-attributes-item-label"},t("ValidationExpression")),o.default.createElement("span",{className:"manage-attributes-item-value"},e.regex||t("None"))),[i.AttributeTypeOptions.SelectList,i.AttributeTypeOptions.MultiSelect].includes(e.type)&&o.default.createElement("div",{className:"col-12 col-sm-4"},o.default.createElement("span",{className:"manage-attributes-item-label"},t("PossibleValues")),o.default.createElement("span",{className:"manage-attributes-item-value"},e.possibleValues.join(", "))),e.category===i.AttributeCategory.Reservation&&e.secondaryEntities.length>0&&o.default.createElement("div",{className:"col-12 col-sm-4"},o.default.createElement("span",{className:"manage-attributes-item-label"},t("CollectedFor")),o.default.createElement("span",{className:"manage-attributes-item-value"},e.secondaryEntities.join(", "))),e.category!==i.AttributeCategory.Reservation&&o.default.createElement("div",{className:"col-12 col-sm-4"},o.default.createElement("span",{className:"manage-attributes-item-label"},t("AppliesTo")),o.default.createElement("span",{className:"manage-attributes-item-value"},0===e.entities.length?t("All"):e.entities.join(", ")))))})))),o.default.createElement(m.ManageCustomAttributesDeleteModal,{attributeToDelete:p,onClose:b,onDelete:g}))}},64591:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useManageCustomAttributesList=void 0;const n=a(34043);t.useManageCustomAttributesList=function(e){const{state:t,category:a}=e;return{attributes:(l=(0,n.getManageAttributeView)(t.attributes,t.resources,t.users,t.types,a),[...l.sort(((e,t)=>e.sortOrder-t.sortOrder))])};var l}},73902:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageCustomAttributesApi=void 0;const l=a(81902);class r extends l.Api{constructor(){super(...arguments),this.apiEndpoint="admin/attributes/index.php"}load(){return n(this,void 0,void 0,(function*(){return this.get(this.apiEndpoint,"load")}))}addAttribute(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"add",e)}))}updateAttribute(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"update",e)}))}deleteAttribute(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"delete",{id:e.id})}))}}t.ManageCustomAttributesApi=r},7454:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageCustomAttributesAppComponent=t.ManageCustomAttributesApp=void 0;const i=r(a(67294)),s=o(a(23768)),u=a(88554),c=a(51073),d=a(15127),m=a(28193),f=a(4974),p=a(73902),h=a(88723),b=a(5250),g=a(93675),v=a(11481);function E(e){const{hash:t,changeHash:a}=(0,u.useHashChange)(),n=(0,i.useContext)(c.AppSettingsContext),l=(0,i.useContext)(f.ManageCustomAttributesContext),{isLoading:r,category:o,onCategoryChanged:s}=(0,b.useManageCustomAttributesHooks)(l);if(r||n.isLoading)return i.default.createElement(m.Spinner,null);if(""===t&&a(d.NavigationPaths.Home),t===d.NavigationPaths.Add)return i.default.createElement(v.ManageCustomAttributeComponent,{state:l,onCategoryChanged:s,onSaved:l.onAttributeAdded,category:o,attribute:void 0});const p=t.match(new RegExp(/#\/edit\/(\d+)/));if(p&&2===p.length){const e=Number.parseInt(p[1]);return i.default.createElement(v.ManageCustomAttributeComponent,{attribute:l.attributes.byId[e],state:l,onCategoryChanged:s,onSaved:l.onAttributeUpdated,category:o})}return i.default.createElement(h.ManageCustomAttributesListComponent,Object.assign({},e,{category:o,onCategoryChanged:s}))}t.ManageCustomAttributesApp=E,t.ManageCustomAttributesAppComponent=function(e){(0,s.default)({lang:e.lang,basePath:e.path,version:e.version});const t=new p.ManageCustomAttributesApi(e.path,e.csrf);return i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(c.AppSettingsProvider,Object.assign({},e),i.default.createElement(f.ManageCustomAttributesProvider,{api:t},i.default.createElement(g.ManageCustomAttributesHeader,null),i.default.createElement(E,Object.assign({},e)))))}},4974:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageCustomAttributesProvider=t.ManageCustomAttributesContext=t.useManageCustomAttributesContext=void 0;const i=r(a(67294)),s=a(94559);function u(e){const[t,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)((0,s.createLookupState)([])),[r,u]=(0,i.useState)((0,s.createLookupState)([])),[c,d]=(0,i.useState)((0,s.createLookupState)([])),[m,f]=(0,i.useState)((0,s.createLookupState)([]));return(0,i.useEffect)((()=>{a(!0),e.load().then((e=>(u((0,s.createLookupState)(e.attributes)),l((0,s.createLookupState)(e.resources)),f((0,s.createLookupState)(e.types)),d((0,s.createLookupState)(e.users)),a(!1),e))).catch((e=>{console.error(e),a(!1)}))}),[]),{isLoading:t,resources:n,types:m,attributes:r,users:c,onAttributeAdded:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const n=yield e.addAttribute(t),l={allIds:[...r.allIds,n.id],byId:Object.assign(Object.assign({},r.byId),{[n.id]:n})};u(l),a(!1)}catch(e){a(!1)}}))},onAttributeUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const n=yield e.updateAttribute(t),l={allIds:[...r.allIds],byId:Object.assign(Object.assign({},r.byId),{[n.id]:n})};u(l),a(!1)}catch(e){a(!1)}}))},onAttributeDeleted:function(t){return o(this,void 0,void 0,(function*(){try{a(!0),yield e.deleteAttribute(t);const n=Object.assign({},r.byId);delete n[t.id];const l={allIds:r.allIds.filter((e=>e!==t.id)),byId:n};u(l),a(!1)}catch(e){a(!1)}}))}}}t.useManageCustomAttributesContext=u,t.ManageCustomAttributesContext=(0,i.createContext)(function(){const e=()=>Promise.resolve();return{isLoading:!1,resources:(0,s.createLookupState)([]),attributes:(0,s.createLookupState)([]),types:(0,s.createLookupState)([]),users:(0,s.createLookupState)([]),onAttributeAdded:e,onAttributeUpdated:e,onAttributeDeleted:e}}()),t.ManageCustomAttributesProvider=function(e){const a=u(e.api);return i.default.createElement(t.ManageCustomAttributesContext.Provider,{value:a},e.children)}},5250:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useManageCustomAttributesHooks=void 0;const l=a(67294),r=a(69989),o=a(88554);t.useManageCustomAttributesHooks=function(e){const{hash:t,changeHash:a}=(0,o.useHashChange)(),[i,s]=(0,l.useState)(r.AttributeCategory.Reservation);return(0,l.useEffect)((()=>{switch(t){case`#/${r.AttributeCategory.Resource}`:s(r.AttributeCategory.Resource);break;case`#/${r.AttributeCategory.ResourceType}`:s(r.AttributeCategory.ResourceType);break;case`#/${r.AttributeCategory.User}`:s(r.AttributeCategory.User);break;case`#/${r.AttributeCategory.Reservation}`:s(r.AttributeCategory.Reservation)}}),[t]),{isLoading:e.isLoading,category:i,onCategoryChanged:function(e){return n(this,void 0,void 0,(function*(){a(`/${e}`)}))}}}},34043:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getManageAttributeView=void 0;const n=a(69989);t.getManageAttributeView=function(e,t,a,l,r){const o=(e,r)=>{let o=[];return r===n.AttributeCategory.User&&(o=e.map((e=>{var t;return null===(t=a.byId[e])||void 0===t?void 0:t.fullName.trim()}))),r===n.AttributeCategory.Resource&&(o=e.map((e=>{var a;return null===(a=t.byId[e])||void 0===a?void 0:a.name}))),r===n.AttributeCategory.ResourceType&&(o=e.map((e=>{var t;return null===(t=l.byId[e])||void 0===t?void 0:t.name}))),o=o.filter((e=>void 0!==e)),o.sort(),o},i=e=>e.category===n.AttributeCategory.Reservation||0===e.entityIds.length?[]:o(e.entityIds,e.category),s=e=>e.secondaryCategory&&e.category===n.AttributeCategory.Reservation&&0!==e.secondaryEntityIds.length?o(e.secondaryEntityIds,e.secondaryCategory):[],u=[];return e.allIds.forEach((t=>{const a=e.byId[t];if(a.category===r){const e={id:a.id,isAdminOnly:a.adminOnly,entities:i(a),category:a.category,isRequired:a.required,isPrivate:a.isPrivate,label:a.label,regex:a.regex,secondaryEntities:s(a),possibleValues:a.possibleValues,secondaryCategory:a.secondaryCategory||null,type:a.type,sortOrder:a.sortOrder||0};u.push(e)}})),u}},74356:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AddMonitorViewsComponent=void 0;const o=r(a(67294)),i=a(69989),s=a(88554),u=a(15127),c=a(5477),d=a(51240),m=a(70654);t.AddMonitorViewsComponent=function(e){const t=new d.Clock,a=(0,o.useContext)(m.ManageMonitorViewsContext),[n,l]=(0,o.useState)({name:"",id:0,publicId:"",settings:{reservationsToShow:i.MonitorViewReservations.Count,scheduleId:(null===(r=e.schedules.find((e=>e.isDefault)))||void 0===r?void 0:r.id)||0,count:1,showDateTime:!0,showLogo:!0,showReservations:!0,announcement:null,attributeId:null,attributeValue:null,days:7,startDate:t.now(e.timezone).toISOString(),endDate:t.addDays(7,t.now(e.timezone)).toISOString(),resourceIds:null,scrollInterval:null,style:i.MonitorViewStyle.List,title:null,resourcesToShow:i.MonitorViewResources.Resources,resourceTypeIds:null,resourceGroupIds:null,consolidateReservations:!0,pageSize:null}});var r;const{changeHash:f}=(0,s.useHashChange)();return o.default.createElement(c.MonitorViewForm,Object.assign({onCancel:function(){f(u.NavigationPaths.Home)},onSave:function(){a.onViewAdded(n).then((()=>f(u.NavigationPaths.Home)))},view:n,setView:l},e))}},7579:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EditMonitorViewsComponent=void 0;const o=r(a(67294)),i=a(88554),s=a(15127),u=a(5477),c=a(70654);t.EditMonitorViewsComponent=function(e){const t=(0,o.useContext)(c.ManageMonitorViewsContext),[a,n]=(0,o.useState)(e.view),{changeHash:l}=(0,i.useHashChange)();return(0,o.useEffect)((()=>{n(e.view)}),[e.view]),e.view?o.default.createElement(u.MonitorViewForm,{onCancel:function(){l(s.NavigationPaths.Home)},onSave:function(){t.onViewUpdated(a).then((()=>l(s.NavigationPaths.Home)))},view:a,setView:n,resources:e.resources,types:e.types,resourceGroups:e.resourceGroups,lang:e.lang,reservationAttributes:e.reservationAttributes,schedules:e.schedules}):o.default.createElement("div",null,"Monitor view not found")}},81333:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageMonitorViewsComponent=t.useManageMonitorViewsHooks=void 0;const o=r(a(67294)),i=a(81468),s=a(94559),u=a(15127),c=a(41773),d=a(9965),m=a(70654);t.useManageMonitorViewsHooks=function(e){return{views:(0,s.lookupStateToArray)(e.monitorViews).sort(((e,t)=>e.name.localeCompare(t.name))),reservationAttributes:(0,s.lookupStateToArray)(e.reservationAttributes),resources:(0,s.lookupStateToArray)(e.resources),schedules:(0,s.lookupStateToArray)(e.schedules),types:(0,s.lookupStateToArray)(e.types),resourceGroups:(0,s.lookupStateToArray)(e.resourceGroups),isLoading:e.isLoading}},t.ManageMonitorViewsComponent=function(e){const{t}=(0,i.useTranslation)(),{views:a,scriptUrl:n}=e,[l,r]=(0,o.useState)(),s=(0,o.useContext)(m.ManageMonitorViewsContext);return 0===a.length?o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col admin-results-none"},o.default.createElement("div",null,o.default.createElement("a",{href:u.NavigationPaths.Add,className:"btn admin-action-button"},o.default.createElement("span",{className:"d-none d-sm-block"},t("AddNewMonitorView")," ",o.default.createElement("i",{className:"bi bi-plus-circle"})),o.default.createElement("span",{className:"d-block d-sm-none"},o.default.createElement("i",{className:"bi bi-plus-circle"})))))):o.default.createElement(o.default.Fragment,null,o.default.createElement("table",{className:"table",id:"monitor-views-table"},o.default.createElement("thead",null,o.default.createElement("tr",null,o.default.createElement("th",null,t("Name")),o.default.createElement("th",null,"URL"),o.default.createElement("th",{className:"action"},t("Actions")))),o.default.createElement("tbody",null,a.map(((e,a)=>o.default.createElement("tr",{key:e.id,className:`row${a}`},o.default.createElement("td",null,e.name),o.default.createElement("td",null,n,"/monitor-display.php?id=",e.publicId,o.default.createElement("button",{className:"btn btn-link ms-2",onClick:()=>navigator.clipboard.writeText(`${n}/monitor-display.php?id=${e.publicId}`),title:t("Copy")},o.default.createElement("span",{className:"bi bi-files"}))),o.default.createElement("td",{className:"action"},o.default.createElement("a",{className:"btn btn-link edit",href:`${u.NavigationPaths.Edit}?id=${e.publicId}`,title:t("Edit")},o.default.createElement("span",{className:"bi bi-pencil-square icon"}))," ","|"," ",o.default.createElement("button",{className:"btn btn-link delete",onClick:()=>{r(e)},title:t("Delete")},o.default.createElement("span",{className:"bi bi-trash icon remove delete"})))))))),o.default.createElement(c.Modal,{isOpen:void 0!==l,onToggle:()=>r(void 0),title:t("DeleteMonitorView")},o.default.createElement(c.ModalBody,null,o.default.createElement("div",null,o.default.createElement(i.Trans,{i18nKey:"DeleteMonitorViewPrompt",values:{viewName:null==l?void 0:l.name},components:{strong:o.default.createElement("strong",null)}})),o.default.createElement("div",{className:"mt-3 alert alert-danger"},t("DeleteWarning"))),o.default.createElement(c.ModalFooter,null,o.default.createElement(d.DeleteAndCancelButtons,{onCancel:()=>r(void 0),onDelete:function(){l&&s.onViewDeleted(l.publicId)}}))))}},53097:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageMonitorViewsHeader=void 0;const o=r(a(67294)),i=a(81468),s=a(15127),u=a(70654);t.ManageMonitorViewsHeader=function(){const{t:e}=(0,i.useTranslation)(),t=(0,o.useContext)(u.ManageMonitorViewsContext);return o.default.createElement("div",{id:"manage-monitor-views-header",className:"admin-page-header"},o.default.createElement("div",{className:"admin-page-header-title"},o.default.createElement("h1",null,e("ManageMonitorViews"))),t.monitorViews.allIds.length>0&&o.default.createElement("div",{className:"admin-page-header-actions"},o.default.createElement("div",null,o.default.createElement("a",{href:s.NavigationPaths.Add,className:"btn admin-action-button"},o.default.createElement("span",{className:"d-none d-sm-block"},e("AddNewMonitorView")," ",o.default.createElement("i",{className:"bi bi-plus-circle"})),o.default.createElement("span",{className:"d-block d-sm-none"},o.default.createElement("i",{className:"bi bi-plus-circle"}))))))}},5477:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MonitorViewForm=void 0;const l=n(a(67294)),r=a(81468),o=n(a(23157)),i=a(69989),s=a(88281),u=a(60519),c=a(68442),d=a(34297),m=a(12907);t.MonitorViewForm=function(e){var t,a;const{view:n,lang:f,setView:p,onCancel:h,types:b,resources:g,resourceGroups:v,schedules:E,firstDayOfWeek:y,reservationAttributes:C,dateTimeFormat:N,onSave:O}=e,{settings:S,publicId:_}=n,{t:k}=(0,r.useTranslation)();function R(e){return(b&&0!==b.length||v&&0!==v.length)&&(!S.resourcesToShow&&e===i.MonitorViewResources.Resources||S.resourcesToShow===e)?"active":""}let A="AddNewMonitorView",M="Add";function w(e){p(Object.assign(Object.assign({},n),{settings:Object.assign(Object.assign({},S),e)}))}return!!_&&(A="UpdateMonitorView",M="Update"),l.default.createElement("form",{onSubmit:e=>{e.preventDefault(),O()}},l.default.createElement("div",{className:"default-box"},l.default.createElement("div",{className:"default-box-header"},k(A)),l.default.createElement("div",{className:"default-box-content mb-2"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-12 col-sm-6 mb-3"},l.default.createElement("label",{htmlFor:"name",className:"form-label"},k("Name")," *"),l.default.createElement("input",{id:"name",type:"text",className:"form-control",maxLength:255,required:!0,value:n.name,onChange:e=>{return t={name:e.target.value},void p(Object.assign(Object.assign({},n),t));var t},autoFocus:!0})),l.default.createElement("div",{className:"col-12 col-sm-6 mb-3"},l.default.createElement("label",{htmlFor:"title",className:"form-label"},k("HeadingText")),l.default.createElement("input",{id:"title",type:"text",className:"form-control",maxLength:255,value:S.title||void 0,onChange:e=>w({title:e.target.value})}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-12 col-sm-6 mb-3"},l.default.createElement("label",{htmlFor:"reservations-to-show",className:"form-label"},k("ReservationsToShow")),l.default.createElement("select",{className:"form-select",id:"reservations-to-show",value:S.reservationsToShow,onChange:e=>w({reservationsToShow:Number.parseInt(e.target.value)})},l.default.createElement("option",{value:i.MonitorViewReservations.Days},k("AllUpcomingReservations")),l.default.createElement("option",{value:i.MonitorViewReservations.Count},k("ASetNumberOfUpcomingReservations")),l.default.createElement("option",{value:i.MonitorViewReservations.DateRange},k("AllReservationsWithinADateRange")),C.length>0&&l.default.createElement("option",{value:i.MonitorViewReservations.MatchingAttribute},k("WithSpecificAttributeValues")),l.default.createElement("option",{value:i.MonitorViewReservations.ThisWeek},k("CurrentWeek")))),l.default.createElement("div",{className:"col-12 col-sm-6 mb-3"},l.default.createElement("div",null,S.reservationsToShow===i.MonitorViewReservations.Days&&l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"days-to-show",className:"form-label"},k("UpcomingDaysToShow")),l.default.createElement("input",{id:"days-to-show",type:"number",className:"form-control",min:1,value:null===(t=S.days)||void 0===t?void 0:t.toString(),onChange:e=>w({days:Number.parseInt(e.target.value)})})),S.reservationsToShow===i.MonitorViewReservations.Count&&l.default.createElement("div",null,l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"number-to-show",className:"form-label"},k("UpcomingReservationsToShow")),l.default.createElement("input",{id:"number-to-show",type:"number",className:"form-control",min:1,value:null===(a=S.count)||void 0===a?void 0:a.toString(),onChange:e=>w({count:Number.parseInt(e.target.value)})}))),S.reservationsToShow===i.MonitorViewReservations.DateRange&&l.default.createElement("div",{className:"d-flex"},l.default.createElement("div",{className:"me-2"},l.default.createElement(s.BookedDatePicker,{id:"start-date",lang:f,onChange:(e,t)=>{w({startDate:t?(0,m.dateToSystemString)(t,!1):null})},label:k("Start"),wrapperClass:"d-block",selectedDate:(0,m.stringToDate)(S.startDate)||void 0,required:!0})),l.default.createElement("div",null,l.default.createElement(s.BookedDatePicker,{id:"end-date",lang:f,onChange:(e,t)=>{w({endDate:t?(0,m.dateToSystemString)(t,!1):null})},label:k("End"),wrapperClass:"d-block",selectedDate:(0,m.stringToDate)(S.endDate)||void 0,required:!0}))),S.reservationsToShow===i.MonitorViewReservations.MatchingAttribute&&l.default.createElement("div",{className:"d-flex"},l.default.createElement("div",{className:"me-2"},l.default.createElement("label",{htmlFor:"attribute-id",className:"form-label d-block"},k("Attribute")),l.default.createElement("select",{id:"attribute-id",className:"form-select",value:S.attributeId||void 0,onChange:e=>{e.target.value?w({attributeId:Number.parseInt(e.target.value)}):w({attributeId:null})}},l.default.createElement("option",{value:""},"---"),C.map((e=>l.default.createElement("option",{key:e.id,value:e.id},e.label))))),S.attributeId&&l.default.createElement("div",{className:"flex-grow-1"},l.default.createElement(d.CustomAttributeEdit,{attribute:C.find((e=>e.id===S.attributeId)),value:S.attributeValue||void 0,isValid:!0,onChange:e=>w({attributeValue:e}),dateTimeFormat:N,firstDayOfWeek:y})))))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-12 col-sm-6 mb-3"},l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"schedules",className:"form-label"},k("Schedule")),l.default.createElement(o.default,{id:"schedules",value:E.find((e=>e.id===S.scheduleId)),isClearable:!1,onChange:e=>w({scheduleId:e.id}),options:E,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString()}))),l.default.createElement("div",{className:"col-12 col-sm-6 mb-3"},l.default.createElement("div",{className:"monitor-view-resource-options",role:"group","aria-label":"Monitor View Resources"},l.default.createElement("input",{type:"radio",className:"btn-check",name:"monitor-view-resources",id:"resource-options-resources",autoComplete:"off",checked:!S.resourcesToShow||S.resourcesToShow===i.MonitorViewResources.Resources,onChange:()=>w({resourcesToShow:i.MonitorViewResources.Resources})}),l.default.createElement("label",{className:R(i.MonitorViewResources.Resources),htmlFor:"resource-options-resources"},k("Resources")),b&&b.length>0&&l.default.createElement(l.default.Fragment,null,l.default.createElement("input",{type:"radio",className:"btn-check",name:"monitor-view-resources",id:"resource-options-types",autoComplete:"off",checked:S.resourcesToShow===i.MonitorViewResources.Types,onChange:()=>w({resourcesToShow:i.MonitorViewResources.Types})}),l.default.createElement("label",{className:R(i.MonitorViewResources.Types),htmlFor:"resource-options-types"},k("ResourceTypes"))),v&&v.length>0&&l.default.createElement(l.default.Fragment,null,l.default.createElement("input",{type:"radio",className:"btn-check",name:"monitor-view-resources",id:"resource-options-groups",autoComplete:"off",checked:S.resourcesToShow===i.MonitorViewResources.Groups,onChange:()=>w({resourcesToShow:i.MonitorViewResources.Groups})}),l.default.createElement("label",{className:R(i.MonitorViewResources.Groups),htmlFor:"resource-options-groups"},k("ResourceGroups")))),(!S.resourcesToShow||S.resourcesToShow===i.MonitorViewResources.Resources)&&l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"resources",className:"form-label visually-hidden"},k("Resources")),l.default.createElement(o.default,{id:"resources",value:g.filter((e=>{var t;return e.scheduleId===S.scheduleId&&(null===(t=S.resourceIds)||void 0===t?void 0:t.includes(e.id))})),isClearable:!0,isMulti:!0,onChange:e=>w({resourceIds:e.map((e=>e.id))}),options:g.filter((e=>e.scheduleId===S.scheduleId)),getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),placeholder:k("AllResources")})),S.resourcesToShow===i.MonitorViewResources.Types&&b.length>0&&l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"resource-types",className:"form-label visually-hidden"},k("ResourceTypes")),l.default.createElement(o.default,{id:"resource-types",value:b.filter((e=>{var t;return null===(t=S.resourceTypeIds)||void 0===t?void 0:t.includes(e.id)})),isClearable:!0,isMulti:!0,onChange:e=>w({resourceTypeIds:e.map((e=>e.id))}),options:b,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),placeholder:k("AllResourceTypes")})),S.resourcesToShow===i.MonitorViewResources.Groups&&v.length>0&&l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"resource-groups",className:"form-label visually-hidden"},k("ResourceGroups")),l.default.createElement(o.default,{id:"resource-groups",value:v.filter((e=>{var t;return null===(t=S.resourceGroupIds)||void 0===t?void 0:t.includes(e.id)})),isClearable:!0,isMulti:!0,onChange:e=>w({resourceGroupIds:e.map((e=>e.id))}),options:v,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),placeholder:k("AllGroups")}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-12 mb-3"},l.default.createElement("label",{htmlFor:"announcement",className:"form-label"},k("Announcement")),l.default.createElement("textarea",{value:S.announcement||void 0,className:"form-control",onChange:e=>w({announcement:e.target.value})}))))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm mb-3"},l.default.createElement("label",{htmlFor:"style",className:"form-label"},k("Style")),l.default.createElement("select",{id:"style",value:S.style,className:"form-select",onChange:e=>w({style:Number.parseInt(e.target.value)})},l.default.createElement("option",{value:i.MonitorViewStyle.List},k("List")),l.default.createElement("option",{value:i.MonitorViewStyle.Grid},k("Grid")),l.default.createElement("option",{value:i.MonitorViewStyle.Calendar},k("Calendar")))),S.style===i.MonitorViewStyle.List&&l.default.createElement("div",{className:"col-sm mb-3"},l.default.createElement("label",{htmlFor:"page-size",className:"form-label"},k("EventsPerPage")),l.default.createElement("input",{className:"form-control",id:"page-size",type:"number",min:1,value:S.pageSize||3,onChange:e=>w({pageSize:Number.parseInt(e.target.value)})})),l.default.createElement("div",{className:"col-sm mb-3"},l.default.createElement("label",{htmlFor:"scroll-interval",className:"form-label"},k("ScrollInterval")),l.default.createElement("input",{className:"form-control",id:"scroll-interval",type:"number",min:30,value:S.scrollInterval||60,onChange:e=>w({scrollInterval:Number.parseInt(e.target.value)})}))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-12 mb-1"},k("Options"))),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-12 col-sm-3 mb-3"},l.default.createElement("div",{className:"form-check"},l.default.createElement("label",{htmlFor:"enabled",className:"form-check-label"},k("Enabled")),l.default.createElement("input",{id:"enabled",type:"checkbox",checked:S.showReservations,className:"form-check-input",onChange:e=>w({showReservations:e.target.checked})}))),l.default.createElement("div",{className:"col-12 col-sm-3 mb-3"},l.default.createElement("div",{className:"form-check"},l.default.createElement("label",{htmlFor:"show-logo",className:"form-check-label"},k("ShowLogo")),l.default.createElement("input",{id:"show-logo",type:"checkbox",checked:S.showLogo,className:"form-check-input",onChange:e=>w({showLogo:e.target.checked})}))),l.default.createElement("div",{className:"col-12 col-sm-3 mb-3"},l.default.createElement("div",{className:"form-check"},l.default.createElement("label",{htmlFor:"show-date-time",className:"form-check-label"},k("ShowDateAndTime")),l.default.createElement("input",{id:"show-date-time",type:"checkbox",checked:S.showDateTime,className:"form-check-input",onChange:e=>w({showDateTime:e.target.checked})}))),l.default.createElement("div",{className:"col-12 col-sm-3 mb-3"},l.default.createElement("div",{className:"form-check"},l.default.createElement("label",{htmlFor:"consolidate",className:"form-check-label"},k("ShowMultiResourceGrouped")),l.default.createElement("input",{id:"consolidate",type:"checkbox",checked:S.consolidateReservations,className:"form-check-input",onChange:e=>w({consolidateReservations:e.target.checked})})))),l.default.createElement("div",{className:"default-box-footer"},l.default.createElement(u.CancelButton,{onClick:h}),l.default.createElement(c.SubmitButton,{text:k(M)}))))}},9009:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageMonitorViewsApi=void 0;const l=a(81902);class r extends l.Api{loadManageMonitorViews(){return n(this,void 0,void 0,(function*(){return this.get("admin/monitor-views/index.php","load")}))}addMonitorView(e){return n(this,void 0,void 0,(function*(){return this.post("admin/monitor-views/index.php","add",e)}))}updateMonitorView(e){return n(this,void 0,void 0,(function*(){return this.post("admin/monitor-views/index.php","update",e)}))}deleteMonitorView(e){return n(this,void 0,void 0,(function*(){return this.post("admin/monitor-views/index.php","delete",{id:e})}))}}t.ManageMonitorViewsApi=r},11182:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageMonitorViewsAppComponent=t.ManageMonitorViewsApp=void 0;const i=r(a(67294)),s=o(a(23768)),u=a(88554),c=a(70654),d=a(51073),m=a(15127),f=a(9009),p=a(81333),h=a(53097),b=a(74356),g=a(28193),v=a(7579);function E(e){const{hash:t,changeHash:a}=(0,u.useHashChange)(),n=(0,i.useContext)(d.AppSettingsContext),{isLoading:l,views:r,schedules:o,resources:s,types:f,resourceGroups:h,reservationAttributes:E}=(0,p.useManageMonitorViewsHooks)((0,i.useContext)(c.ManageMonitorViewsContext));if(l||n.isLoading)return i.default.createElement(g.Spinner,null);switch(""===t&&a(m.NavigationPaths.Home),t){case m.NavigationPaths.Add:return i.default.createElement(b.AddMonitorViewsComponent,Object.assign({},e,{schedules:o,resources:s,types:f,resourceGroups:h,reservationAttributes:E}));case m.NavigationPaths.Edit:{const t=new URLSearchParams(window.location.href.split("?")[1]),a=r.find((e=>e.publicId===t.get("id")));return i.default.createElement(v.EditMonitorViewsComponent,Object.assign({},e,{schedules:o,resources:s,types:f,resourceGroups:h,reservationAttributes:E,view:a}))}default:return i.default.createElement(p.ManageMonitorViewsComponent,Object.assign({},e,{views:r}))}}t.ManageMonitorViewsApp=E,t.ManageMonitorViewsAppComponent=function(e){(0,s.default)({lang:e.lang,basePath:e.path,version:e.version});const t=new f.ManageMonitorViewsApi(e.path,e.csrf);return i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(d.AppSettingsProvider,Object.assign({},e),i.default.createElement(c.ManageMonitorViewsProvider,{api:t},i.default.createElement(h.ManageMonitorViewsHeader,null),i.default.createElement(E,Object.assign({},e)))))}},70654:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageMonitorViewsProvider=t.ManageMonitorViewsContext=t.useManageMonitorViewsContext=void 0;const i=r(a(67294)),s=a(94559);function u(e){const[t,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)((0,s.createLookupState)([])),[r,u]=(0,i.useState)((0,s.createLookupState)([])),[c,d]=(0,i.useState)((0,s.createLookupState)([])),[m,f]=(0,i.useState)((0,s.createLookupState)([])),[p,h]=(0,i.useState)((0,s.createLookupState)([])),[b,g]=(0,i.useState)((0,s.createLookupState)([]));return(0,i.useEffect)((()=>{a(!0),e.loadManageMonitorViews().then((e=>(d((0,s.createLookupState)(e.schedules)),u((0,s.createLookupState)(e.reservationAttributes)),l((0,s.createLookupState)(e.resources)),f((0,s.createLookupState)(e.types)),h((0,s.createLookupState)(e.resourceGroups)),g((0,s.createLookupState)(e.monitorViews)),a(!1),e))).catch((()=>{a(!1)}))}),[]),{isLoading:t,resources:n,schedules:c,types:m,resourceGroups:p,monitorViews:b,reservationAttributes:r,onViewAdded:function(t){return o(this,void 0,void 0,(function*(){a(!0);const n=yield e.addMonitorView(t),l={allIds:[...b.allIds,n.id],byId:Object.assign(Object.assign({},b.byId),{[n.id]:n})};g(l),a(!1)}))},onViewUpdated:function(t){return o(this,void 0,void 0,(function*(){a(!0);const n=yield e.updateMonitorView(t),l={allIds:b.allIds,byId:Object.assign(Object.assign({},b.byId),{[n.id]:n})};g(l),a(!1)}))},onViewDeleted:function(t){return o(this,void 0,void 0,(function*(){const n=b.allIds.find((e=>b.byId[e].publicId===t));if(!n)return;a(!0),yield e.deleteMonitorView(t);const l=Object.assign({},b.byId);delete l[n];const r={allIds:b.allIds.filter((e=>n!==e)),byId:l};g(r),a(!1)}))}}}t.useManageMonitorViewsContext=u,t.ManageMonitorViewsContext=(0,i.createContext)(function(){const e=()=>Promise.resolve();return{isLoading:!1,resources:(0,s.createLookupState)([]),reservationAttributes:(0,s.createLookupState)([]),schedules:(0,s.createLookupState)([]),types:(0,s.createLookupState)([]),resourceGroups:(0,s.createLookupState)([]),monitorViews:(0,s.createLookupState)([]),onViewAdded:e,onViewUpdated:e,onViewDeleted:e}}()),t.ManageMonitorViewsProvider=function(e){const a=u(e.api);return i.default.createElement(t.ManageMonitorViewsContext.Provider,{value:a},e.children)}},13717:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AddOAuthProviderComponent=void 0;const i=r(a(67294)),s=a(88554),u=a(36698),c=a(18190);t.AddOAuthProviderComponent=function(){const e=(0,i.useContext)(u.ManageOAuthProvidersContext),t=(0,s.useHashChange)();return i.default.createElement(c.ManageOAuthProviderForm,{titleKey:"AddOAuthProvider",buttonKey:"AddOAuthProvider",onSaved:function(a){return o(this,void 0,void 0,(function*(){yield e.onAdded(a),t.changeHash("")}))},onCancel:function(){t.changeHash("")}})}},10960:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EditOAuthProviderComponent=void 0;const i=r(a(67294)),s=a(88554),u=a(36698),c=a(18190);t.EditOAuthProviderComponent=function(e){const t=(0,i.useContext)(u.ManageOAuthProvidersContext),a=(0,s.useHashChange)();return i.default.createElement(c.ManageOAuthProviderForm,{titleKey:"UpdateOAuthProvider",buttonKey:"UpdateOAuthProvider",onSaved:function(e){return o(this,void 0,void 0,(function*(){yield t.onUpdated(e),a.changeHash("")}))},onCancel:function(){a.changeHash("")},provider:e.provider})}},68823:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageOAuthProviderDeleteModal=void 0;const l=n(a(67294)),r=a(81468),o=a(41773),i=a(9965);t.ManageOAuthProviderDeleteModal=function(e){const{provider:t,onClose:a,onDelete:n}=e,{t:s}=(0,r.useTranslation)();return t?l.default.createElement(o.Modal,{title:s("DeleteItemModalTitle",{itemName:s("OAuthProvider")}),isOpen:!0,onToggle:a},l.default.createElement(o.ModalBody,null,l.default.createElement("div",{className:"alert alert-danger"},s("DeleteWarning"))),l.default.createElement(o.ModalFooter,null,l.default.createElement(i.DeleteAndCancelButtons,{onCancel:a,onDelete:()=>n(t)}))):l.default.createElement(l.default.Fragment,null)}},18190:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageOAuthProviderForm=void 0;const o=r(a(67294)),i=a(81468),s=a(60519),u=a(68442),c=a(36698),d=a(16065);t.ManageOAuthProviderForm=function(e){const{t}=(0,i.useTranslation)(),{titleKey:a,buttonKey:n,onCancel:l,provider:r}=e,{name:m,clientId:f,clientSecret:p,grant:h,authorizationUrl:b,accessTokenUrl:g,userDetailsUrl:v,mappingGivenName:E,mappingSurName:y,mappingEmail:C,scope:N,onGrantChanged:O,onNameChanged:S,onClientIdChanged:_,onClientSecretChanged:k,onAuthorizationUrlChanged:R,onAccessTokenUrlChanged:A,onUserDetailsUrlChanged:M,onMappingGivenNameChanged:w,onMappingSurnameChanged:x,onMappingEmailChanged:P,onScopeChanged:I,onSaved:D}=(0,d.useManageOAuthProvider)({state:(0,o.useContext)(c.ManageOAuthProvidersContext),onSaved:e.onSaved,provider:r});return o.default.createElement("form",{onSubmit:e=>{e.preventDefault(),D()}},o.default.createElement("div",{className:"default-box"},o.default.createElement("div",{className:"default-box-header"},t(a)," ",o.default.createElement("a",{href:"https://www.bookedscheduler.com/help/oauth/",target:"_blank",rel:"noreferrer"},o.default.createElement("span",{className:"bi bi-info-circle"}))),o.default.createElement("div",{className:"default-box-content mb-2"},o.default.createElement("div",{className:"manage-provider-all-required"},t("AllFieldsAreRequired")),o.default.createElement("div",null,o.default.createElement("label",{className:"form-label",htmlFor:"provider-name"},t("OAuthProviderName")),o.default.createElement("input",{type:"text",maxLength:255,required:!0,id:"provider-name",className:"form-control",value:m,onChange:e=>S(e.target.value)})),o.default.createElement("div",{className:"mt-3"},o.default.createElement("label",{className:"form-label",htmlFor:"client-id"},t("OAuthClientId")),o.default.createElement("input",{type:"text",maxLength:255,required:!0,id:"client-id",className:"form-control",value:f,onChange:e=>_(e.target.value)})),o.default.createElement("div",{className:"mt-3"},o.default.createElement("label",{className:"form-label",htmlFor:"client-secret"},t("OAuthClientSecret")),o.default.createElement("input",{type:"text",required:!0,id:"client-secret",className:"form-control",value:p,onChange:e=>k(e.target.value)})),o.default.createElement("div",{className:"manage-provider-section-title"},"Scope and Token"),o.default.createElement("div",null,o.default.createElement("label",{className:"form-label",htmlFor:"access-token-grant"},t("AccessTokenGrantType")),o.default.createElement("div",{className:"note"},"Grant type for requesting access token. Typically ",o.default.createElement("em",null,"authorization_code")),o.default.createElement("input",{type:"text",maxLength:255,required:!0,id:"access-token-grant",className:"form-control",value:h,onChange:e=>O(e.target.value)})),o.default.createElement("div",{className:"mt-3"},o.default.createElement("label",{className:"form-label",htmlFor:"scope"},t("Scope")),o.default.createElement("div",{className:"note"},"Space separated list of scopes required to access email and profile information"),o.default.createElement("input",{type:"text",maxLength:1e3,required:!0,id:"scope",className:"form-control",value:N,onChange:e=>I(e.target.value)})),o.default.createElement("div",{className:"manage-provider-section-title"},"URLs"),o.default.createElement("div",null,o.default.createElement("label",{className:"form-label",htmlFor:"url-authorize"},t("OAuthAuthorizationUrl")),o.default.createElement("input",{type:"url",required:!0,id:"url-authorize",className:"form-control",value:b,onChange:e=>R(e.target.value)})),o.default.createElement("div",{className:"mt-3"},o.default.createElement("label",{className:"form-label",htmlFor:"url-access-token"},t("OAuthAccessTokenUrl")),o.default.createElement("input",{type:"url",required:!0,id:"url-access-token",className:"form-control",value:g,onChange:e=>A(e.target.value)})),o.default.createElement("div",{className:"mt-3"},o.default.createElement("label",{className:"form-label",htmlFor:"url-user-details"},t("OAuthUserDetailsTokenUrl")),o.default.createElement("input",{type:"url",required:!0,id:"url-user-details",className:"form-control",value:v,onChange:e=>M(e.target.value)})),o.default.createElement("div",{className:"manage-provider-section-title"},t("FieldMappings")),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-2"},o.default.createElement("label",{className:"col-form-label",htmlFor:"mapping-email"},t("Email"))),o.default.createElement("div",{className:"col"},o.default.createElement("input",{type:"text",required:!0,id:"mapping-email",className:"form-control",value:C,onChange:e=>P(e.target.value)}))),o.default.createElement("div",{className:"row mt-2"},o.default.createElement("div",{className:"col-2"},o.default.createElement("label",{className:"col-form-label",htmlFor:"mapping-given-name"},t("FirstName"))),o.default.createElement("div",{className:"col"},o.default.createElement("input",{type:"text",required:!0,id:"mapping-given-name",className:"form-control",value:E,onChange:e=>w(e.target.value)}))),o.default.createElement("div",{className:"row mt-2"},o.default.createElement("div",{className:"col-2"},o.default.createElement("label",{className:"col-form-label",htmlFor:"mapping-sur-name"},t("LastName"))),o.default.createElement("div",{className:"col"},o.default.createElement("input",{type:"text",required:!0,id:"mapping-sur-name",className:"form-control",value:y,onChange:e=>x(e.target.value)})))),o.default.createElement("div",{className:"default-box-footer"},o.default.createElement(s.CancelButton,{onClick:l}),o.default.createElement(u.SubmitButton,{text:t(n)}))))}},16065:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useManageOAuthProvider=void 0;const l=a(67294);t.useManageOAuthProvider=function(e){const{provider:t}=e,[a,r]=(0,l.useState)((null==t?void 0:t.name)||""),[o,i]=(0,l.useState)((null==t?void 0:t.clientId)||""),[s,u]=(0,l.useState)((null==t?void 0:t.clientSecret)||""),[c,d]=(0,l.useState)((null==t?void 0:t.accessTokenGrant)||"authorization_code"),[m,f]=(0,l.useState)((null==t?void 0:t.urlAuthorize)||""),[p,h]=(0,l.useState)((null==t?void 0:t.urlAccessToken)||""),[b,g]=(0,l.useState)((null==t?void 0:t.urlUserDetails)||""),[v,E]=(0,l.useState)((null==t?void 0:t.fieldMappings.email)||""),[y,C]=(0,l.useState)((null==t?void 0:t.fieldMappings.givenName)||""),[N,O]=(0,l.useState)((null==t?void 0:t.fieldMappings.surName)||""),[S,_]=(0,l.useState)((null==t?void 0:t.scope)||"");return{name:a,clientId:o,clientSecret:s,grant:c,authorizationUrl:m,accessTokenUrl:p,userDetailsUrl:b,mappingEmail:v,mappingGivenName:y,mappingSurName:N,scope:S,onNameChanged:r,onClientIdChanged:i,onClientSecretChanged:u,onGrantChanged:d,onAuthorizationUrlChanged:f,onAccessTokenUrlChanged:h,onUserDetailsUrlChanged:g,onMappingEmailChanged:E,onMappingGivenNameChanged:C,onMappingSurnameChanged:O,onScopeChanged:_,onSaved:function(){return n(this,void 0,void 0,(function*(){if(!(a.trim().length>0&&o.trim().length>0&&s.trim().length>0&&c.trim().length>0&&p.trim().length>0&&m.trim().length>0&&b.trim().length>0&&S.trim().length>0&&v.trim().length>0&&y.trim().length>0&&N.trim().length>0))return;const n={id:(null==t?void 0:t.id)||0,publicId:(null==t?void 0:t.publicId)||"",name:a.trim(),clientId:o.trim(),clientSecret:s.trim(),accessTokenGrant:c.trim(),dateCreated:(null==t?void 0:t.dateCreated)||new Date,urlAccessToken:p.trim(),urlAuthorize:m.trim(),urlUserDetails:b.trim(),scope:S.trim(),fieldMappings:{email:v.trim(),givenName:y.trim(),surName:N.trim()}};return e.onSaved(n)}))}}}},9647:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageOAuthProvidersHeader=void 0;const o=r(a(67294)),i=a(81468),s=a(15127),u=a(36698),c=a(88554);t.ManageOAuthProvidersHeader=function(){const{t:e}=(0,i.useTranslation)(),t=(0,o.useContext)(u.ManageOAuthProvidersContext),{isRootHash:a}=(0,c.useHashChange)();return o.default.createElement("div",{id:"manage-resource-oauth-providers-header",className:"admin-page-header"},o.default.createElement("div",{className:"admin-page-header-title"},o.default.createElement("h1",null,e("ManageOAuth"))),t.providers.allIds.length>0&&a&&o.default.createElement("div",{className:"admin-page-header-actions"},o.default.createElement("div",null,o.default.createElement("a",{href:s.NavigationPaths.Add,className:"btn admin-action-button"},o.default.createElement("span",{className:"d-none d-sm-block"},e("AddOAuthProvider")," ",o.default.createElement("i",{className:"bi bi-plus-circle"})),o.default.createElement("span",{className:"d-block d-sm-none"},o.default.createElement("i",{className:"bi bi-plus-circle"}))))))}},530:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageOAuthProvidersList=t.useManageQuotas=void 0;const i=r(a(67294)),s=a(15127),u=a(81468),c=a(36698),d=a(68823),m=a(51240);function f(e){const{state:t}=e,[a,n]=(0,i.useState)();return{onDeleted:function(e){return o(this,void 0,void 0,(function*(){return t.onDeleted(e.id)}))},onDeletePrompt:function(e){n(e)},onCancelDelete:function(){n(void 0)},providerToDelete:a}}t.useManageQuotas=f,t.ManageOAuthProvidersList=function(e){const{providers:t,oauthRedirectUrl:a}=e,{onDeleted:n,onDeletePrompt:l,providerToDelete:r,onCancelDelete:o}=f({state:(0,i.useContext)(c.ManageOAuthProvidersContext)}),{t:p}=(0,u.useTranslation)();function h(){return i.default.createElement("div",{className:"manage-oauth-providers-redirect-url"},i.default.createElement("div",null,p("OAuthRedirectInstructions")),i.default.createElement("div",null,i.default.createElement("code",null,a)))}return 0===t.length?i.default.createElement(i.default.Fragment,null,i.default.createElement("div",null,h()),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col admin-results-none"},i.default.createElement("div",null,i.default.createElement("a",{href:s.NavigationPaths.Add,className:"btn admin-action-button"},i.default.createElement("span",{className:"d-none d-sm-block"},p("AddOAuthProvider")," ",i.default.createElement("i",{className:"bi bi-plus-circle"})),i.default.createElement("span",{className:"d-block d-sm-none"},i.default.createElement("i",{className:"bi bi-plus-circle"}))))))):i.default.createElement(i.default.Fragment,null,i.default.createElement("div",null,h()),i.default.createElement("div",{className:"manage-oauth-providers-list"},i.default.createElement("div",{className:"manage-oauth-providers-items"},i.default.createElement("table",{className:"table"},i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("th",null,p("OAuthProviderName")),i.default.createElement("th",null,p("Created")),i.default.createElement("th",{className:"action"},p("Actions")))),i.default.createElement("tbody",null,t.map((e=>i.default.createElement("tr",{key:e.id},i.default.createElement("td",{className:"table-column-expand"},e.name),i.default.createElement("td",{className:"datetime-column"},Intl.DateTimeFormat(void 0,m.DATE_TIME_FORMAT).format(e.dateCreated)),i.default.createElement("td",{className:"action"},i.default.createElement("div",null,i.default.createElement("a",{href:`#/edit/${e.id}`,className:"btn btn-link",title:p("Edit")},i.default.createElement("span",{className:"bi bi-pencil-square edit icon"}))," ","|"," ",i.default.createElement("button",{onClick:()=>l(e),className:"btn btn-link",title:p("Delete")},i.default.createElement("span",{className:"bi bi-trash delete icon"}))))))))))),i.default.createElement(d.ManageOAuthProviderDeleteModal,{provider:r,onDelete:n,onClose:o}))}},18322:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageOAuthApi=void 0;const l=a(81902),r=a(12907);class o extends l.Api{constructor(){super(...arguments),this.apiUrl="admin/oauth/index.php"}load(){return n(this,void 0,void 0,(function*(){const e=yield this.get(this.apiUrl,"load"),t=Object.assign({},e);return t.providers=e.providers.map((e=>this.deserializeDates(e))),t}))}addProvider(e){return n(this,void 0,void 0,(function*(){const t=yield this.post(this.apiUrl,"add",e);return this.deserializeDates(t)}))}updateProvider(e){return n(this,void 0,void 0,(function*(){const t=yield this.post(this.apiUrl,"update",e);return this.deserializeDates(t)}))}deleteProvider(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiUrl,"delete",{id:e})}))}deserializeDates(e){return Object.assign(Object.assign({},e),{dateCreated:(0,r.stringToDate)(e.dateCreated.toString())})}}t.ManageOAuthApi=o},87592:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageOAuthProvidersAppComponent=t.ManageOAuthProvidersApp=void 0;const i=r(a(67294)),s=o(a(23768)),u=a(88554),c=a(51073),d=a(15127),m=a(28193),f=a(94559),p=a(36698),h=a(18322),b=a(9647),g=a(530),v=a(13717),E=a(10960);function y(e){const{hash:t,changeHash:a}=(0,u.useHashChange)(),n=(0,i.useContext)(c.AppSettingsContext),l=(0,i.useContext)(p.ManageOAuthProvidersContext),{isLoading:r,providers:o}=l,s=(0,f.lookupStateToArray)(o).sort(((e,t)=>e.dateCreated.getTime()-t.dateCreated.getTime()));if(r||n.isLoading)return i.default.createElement(m.Spinner,null);""===t&&a(d.NavigationPaths.Home);const h=t.match(new RegExp(/#\/edit\/(\d+)/));if(h&&2===h.length){const t=Number.parseInt(h[1]),a=s.find((e=>e.id===t));return i.default.createElement(E.EditOAuthProviderComponent,Object.assign({},e,{provider:a}))}return t===d.NavigationPaths.Add?i.default.createElement(v.AddOAuthProviderComponent,null):i.default.createElement(g.ManageOAuthProvidersList,Object.assign({},e,{providers:s,oauthRedirectUrl:e.oauthRedirectUrl}))}t.ManageOAuthProvidersApp=y,t.ManageOAuthProvidersAppComponent=function(e){(0,s.default)({lang:e.lang,basePath:e.path,version:e.version});const t=new h.ManageOAuthApi(e.path,e.csrf);return i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(c.AppSettingsProvider,Object.assign({},e),i.default.createElement(p.ManageOAuthProvidersProvider,{api:t},i.default.createElement(b.ManageOAuthProvidersHeader,null),i.default.createElement(y,Object.assign({},e,{oauthRedirectUrl:e.oauthRedirectUrl})))))}},36698:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageOAuthProvidersProvider=t.ManageOAuthProvidersContext=t.useManageOAuthProvidersContext=void 0;const i=r(a(67294)),s=a(94559);function u(e){const[t,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)((0,s.createLookupState)([]));return(0,i.useEffect)((()=>{a(!0),e.load().then((e=>(l((0,s.createLookupState)(e.providers)),e))).then((()=>a(!1)))}),[]),{isLoading:t,providers:n,onAdded:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.addProvider(t),o={allIds:[...n.allIds,r.id],byId:Object.assign(Object.assign({},n.byId),{[r.id]:r})};l(o)}catch(e){}a(!1)}))},onUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateProvider(t),o={allIds:[...n.allIds],byId:Object.assign(Object.assign({},n.byId),{[r.id]:r})};l(o)}catch(e){}a(!1)}))},onDeleted:function(t){return o(this,void 0,void 0,(function*(){try{a(!0),yield e.deleteProvider(t);const r=Object.assign({},n.byId);delete r[t];const o={allIds:n.allIds.filter((e=>e!==t)),byId:r};l(o)}catch(e){}a(!1)}))}}}t.useManageOAuthProvidersContext=u,t.ManageOAuthProvidersContext=(0,i.createContext)(function(){const e=()=>Promise.resolve();return{isLoading:!1,providers:(0,s.createLookupState)([]),onDeleted:e,onAdded:e,onUpdated:e}}()),t.ManageOAuthProvidersProvider=function(e){const a=u(e.api);return i.default.createElement(t.ManageOAuthProvidersContext.Provider,{value:a},e.children)}},51926:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AddQuotaComponent=void 0;const i=r(a(67294)),s=a(65324),u=a(88554),c=a(28923),d=a(15127);t.AddQuotaComponent=function(e){const t=(0,i.useContext)(c.ManageQuotasContext),a=(0,u.useHashChange)();return i.default.createElement(s.ManageQuotaForm,{titleKey:"AddQuota",buttonKey:"AddQuota",amPm:e.useAmPm,onSaved:function(e){return o(this,void 0,void 0,(function*(){yield t.onQuotaAdded(e),a.changeHash(d.NavigationPaths.Home)}))},onCancel:function(){a.changeHash(d.NavigationPaths.Home)}})}},88113:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EditQuotaComponent=void 0;const i=r(a(67294)),s=a(65324),u=a(88554),c=a(28923);t.EditQuotaComponent=function(e){const t=(0,i.useContext)(c.ManageQuotasContext),a=(0,u.useHashChange)();return i.default.createElement(s.ManageQuotaForm,{titleKey:"UpdateQuota",buttonKey:"UpdateQuota",amPm:e.useAmPm,onSaved:function(e){return o(this,void 0,void 0,(function*(){yield t.onQuotaUpdated(e),a.changeHash("")}))},onCancel:function(){a.changeHash("")},quota:e.quota})}},65324:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageQuotaForm=void 0;const i=r(a(67294)),s=o(a(23157)),u=a(81468),c=a(28923),d=a(99987),m=a(69989),f=a(64604),p=a(71550),h=a(60519),b=a(68442);t.ManageQuotaForm=function(e){const{t}=(0,u.useTranslation)(),{titleKey:a,amPm:n,buttonKey:l,onCancel:r,quota:o}=e,{schedules:g,resources:v,groups:E,scheduleId:y,resourceId:C,groupId:N,limitAmount:O,limitUnit:S,limitInterval:_,limitDuration:k,limitScope:R,limitStartTime:A,limitEndTime:M,limitDays:w,limitStopEnforcementAmount:x,limitStopEnforcementUnit:P,isEnabledAllDayChecked:I,isEnabledEveryDayChecked:D,isStopEnforcementChecked:T,onSaved:j,onResourceChanged:U,onScheduleChanged:F,onGroupChanged:L,onLimitAmountChanged:V,onLimitUnitChanged:B,onLimitIntervalChanged:q,onLimitDurationChanged:H,onLimitScopeChanged:G,onLimitStartChanged:$,onLimitEndChanged:Q,onLimitDaysChanged:W,onLimitStopEnforcementAmountChanged:z,onLimitStopEnforcementUnitChanged:K,onIsEnabledAllDayChecked:Y,onIsEnabledEveryDayChecked:Z,onIsStopEnforcementChecked:J}=(0,d.useManageQuota)({state:(0,i.useContext)(c.ManageQuotasContext),onSaved:e.onSaved,quota:o});return i.default.createElement("form",{onSubmit:e=>{e.preventDefault(),j()}},i.default.createElement("div",{className:"default-box"},i.default.createElement("div",{className:"default-box-header"},t(a)),i.default.createElement("div",{className:"default-box-content mb-2"},i.default.createElement("div",{className:"row mb-3"},i.default.createElement("div",{className:"col-12 col-sm mb-3 mb-sm-0"},i.default.createElement("label",{htmlFor:"schedule-id",className:"form-label"},t("QuotaOn")),i.default.createElement(s.default,{id:"schedule-id",isClearable:!0,value:g.find((e=>e.id===y)),options:g,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),onChange:e=>F(e?e.id:void 0),placeholder:t("AllSchedules")})),i.default.createElement("div",{className:"col-12 col-sm mb-3 mb-sm-0"},i.default.createElement("label",{htmlFor:"resource-id",className:"form-label"},t("QuotaOn")),i.default.createElement(s.default,{id:"resource-id",isClearable:!0,value:v.find((e=>e.id===C)),options:v,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),onChange:e=>U(e?e.id:void 0),placeholder:t("AllResources")})),i.default.createElement("div",{className:"col-12 col-sm"},i.default.createElement("label",{htmlFor:"group-id",className:"form-label"},t("QuotaEachPersonIn")),i.default.createElement(s.default,{id:"group-id",isClearable:!0,value:E.find((e=>e.id===N)),options:E,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),onChange:e=>L(e?e.id:void 0),placeholder:t("AllGroups")}))),i.default.createElement("div",{className:"d-flex mb-3 flex-wrap"},i.default.createElement("div",{className:"d-flex align-items-end"},i.default.createElement("div",null,i.default.createElement("label",{htmlFor:"limit-amount",className:"form-label"},t("QuotaIsLimitedTo")),i.default.createElement("input",{id:"limit-amount",type:"number",step:"any",className:"form-control mid-number",min:0,max:1e4,value:O,onChange:e=>V(Number.parseFloat(e.target.value)),title:"Quota limit"})),i.default.createElement("div",{className:"ms-3"},i.default.createElement("label",{htmlFor:"limit-unit",className:"form-label visually-hidden"},"Quota unit"),i.default.createElement("select",{id:"limit-unit",className:"form-select",title:"Quota unit",value:S,onChange:e=>B(e.target.value)},i.default.createElement("option",{value:m.QuotaLimit.Hours},t("hours")),i.default.createElement("option",{value:m.QuotaLimit.Reservations},t("reservations"))))),i.default.createElement("div",{className:"d-flex align-items-end ms-sm-3 mt-3 mt-sm-0"},i.default.createElement("div",null,i.default.createElement("label",{htmlFor:"limit-interval",className:"form-label"},t("Every")),i.default.createElement("input",{id:"limit-interval",type:"number",step:1,className:"form-control mid-number",min:1,max:1e4,value:_,title:"Quota interval",onChange:e=>q(Number.parseFloat(e.target.value))})),i.default.createElement("div",{className:"ms-3"},i.default.createElement("label",{htmlFor:"limit-duration",className:"form-label visually-hidden"},"Quota duration"),i.default.createElement("select",{id:"limit-duration",className:"form-select",title:"Quota duration",value:k,onChange:e=>H(e.target.value)},i.default.createElement("option",{value:m.QuotaDuration.Hour},t("hours")),i.default.createElement("option",{value:m.QuotaDuration.Day},t("days")),i.default.createElement("option",{value:m.QuotaDuration.Week},t("weeks")),i.default.createElement("option",{value:m.QuotaDuration.Month},t("months")),i.default.createElement("option",{value:m.QuotaDuration.Year},t("years"))))),i.default.createElement("div",{className:"d-flex align-items-end ms-sm-3 mt-3 mt-sm-0"},i.default.createElement("div",null,i.default.createElement("label",{htmlFor:"limit-scope",className:"form-label visually-hidden"},"Quota scope"),i.default.createElement("select",{className:"form-select",id:"limit-scope",value:R,onChange:e=>G(e.target.value)},i.default.createElement("option",{value:f.QuotaScope.IncludeCompleted},t("IncludingCompletedReservations")),i.default.createElement("option",{value:f.QuotaScope.ExcludeCompleted},t("NotCountingCompletedReservations")))))),i.default.createElement("div",null,i.default.createElement("label",{className:"form-label"},t("Enforced"))),i.default.createElement("div",{className:"d-flex align-items-center mb-3 flex-wrap"},i.default.createElement("div",{className:"form-check"},i.default.createElement("label",{className:"form-check-label",htmlFor:"enabled-all-day"},t("AllDay")),i.default.createElement("input",{id:"enabled-all-day",className:"form-check-input",type:"checkbox",checked:I,onChange:e=>Y(e.target.checked)})),!I&&i.default.createElement("div",{className:"ms-0 ms-sm-3 mt-2 mt-sm-0"},i.default.createElement("div",{className:"d-flex align-items-center"},i.default.createElement("label",null,t("Between")),i.default.createElement("div",{className:"ms-2"},i.default.createElement(p.TimePicker,{startTimeId:"limit-begin-time",startTimeLabel:t("BeginDate"),endTimeId:"limit-end-time",endTimeLabel:t("EndDate"),containerId:"limit-time-range",startValue:A,endValue:M,onStartChange:$,onEndChange:Q,amPm:n}))))),i.default.createElement("div",{className:"d-flex align-items-center mb-3 flex-wrap"},i.default.createElement("div",{className:"form-check"},i.default.createElement("label",{className:"form-check-label",htmlFor:"enabled-every-day"},t("Everyday")),i.default.createElement("input",{id:"enabled-every-day",className:"form-check-input",type:"checkbox",checked:D,onChange:e=>Z(e.target.checked)})),!D&&i.default.createElement("div",{className:"ms-0 ms-sm-3"},i.default.createElement("div",{className:"d-flex flex-wrap mt-2 mt-sm-0"},[{day:0,name:"Sun"},{day:1,name:"Mon"},{day:2,name:"Tue"},{day:3,name:"Wed"},{day:4,name:"Thu"},{day:5,name:"Fri"},{day:6,name:"Sat"}].map((e=>i.default.createElement("div",{className:"form-check form-check-inline",key:e.name},i.default.createElement("label",{className:"form-check-label",htmlFor:`enabled-${e.name}`},e.name),i.default.createElement("input",{value:e.day,id:`enabled-${e.name}`,className:"form-check-input",type:"checkbox",checked:w.includes(e.day),onChange:t=>W(e.day,t.target.checked)}))))))),i.default.createElement("div",{className:"d-flex align-items-center mb-3 flex-wrap"},i.default.createElement("div",{className:"form-check"},i.default.createElement("label",{className:"form-check-label",htmlFor:"stop-enforcement"},t("QuotaStopEnforcement")),i.default.createElement("input",{id:"stop-enforcement",className:"form-check-input",type:"checkbox",checked:T,onChange:e=>J(e.target.checked)})),T&&i.default.createElement("div",{className:"ms-0 ms-sm-3"},i.default.createElement("div",{className:"d-flex flex-wrap mt-2 mt-sm-0 align-items-center"},i.default.createElement("div",null,t("UpTo")),i.default.createElement("label",{className:"visually-hidden",htmlFor:"stop-enforcement-interval"},"Stop Enforcement Amount"),i.default.createElement("input",{className:"form-control mid-number ms-1",id:"stop-enforcement-interval",type:"number",step:1,min:1,value:x,onChange:e=>z(Number.parseInt(e.target.value))}),i.default.createElement("label",{className:"visually-hidden",htmlFor:"stop-enforcement-unit"},"Stop Enforcement Time Frame"),i.default.createElement("select",{className:"form-select w-auto ms-2",id:"stop-enforcement-unit",value:P,onChange:e=>K(e.target.value)},i.default.createElement("option",{value:m.QuotaDuration.Minute},t("minutes")),i.default.createElement("option",{value:m.QuotaDuration.Hour},t("hours")),i.default.createElement("option",{value:m.QuotaDuration.Day},t("days")),i.default.createElement("option",{value:m.QuotaDuration.Week},t("weeks"))),i.default.createElement("div",{className:"ms-2"},t("QuotaAheadOfCurrentTime")))))),i.default.createElement("div",{className:"default-box-footer"},i.default.createElement(h.CancelButton,{onClick:r}),i.default.createElement(b.SubmitButton,{text:t(l)}))))}},99987:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useManageQuota=void 0;const l=a(94559),r=a(67294),o=a(7081),i=a(75488),s=a(64604),u=a(12907),c=a(48828);t.useManageQuota=function(e){const{state:t,quota:a}=e,d=(0,l.lookupStateToArray)(t.schedules),m=(0,l.lookupStateToArray)(t.resources),f=(0,l.lookupStateToArray)(t.groups),[p,h]=(0,r.useState)((null==a?void 0:a.scheduleId)||void 0),[b,g]=(0,r.useState)((null==a?void 0:a.resourceId)||void 0),[v,E]=(0,r.useState)((null==a?void 0:a.groupId)||void 0),[y,C]=(0,r.useState)((null==a?void 0:a.limitAmount)||1),[N,O]=(0,r.useState)((null==a?void 0:a.limitUnit)||o.QuotaLimit.Hours),[S,_]=(0,r.useState)((null==a?void 0:a.interval)||1),[k,R]=(0,r.useState)((null==a?void 0:a.duration)||i.QuotaDuration.Day),[A,M]=(0,r.useState)((null==a?void 0:a.scope)||s.QuotaScope.IncludeCompleted),[w,x]=(0,r.useState)((null==a?void 0:a.enforcedStartTime)?(0,c.stringToTime)(a.enforcedStartTime)||void 0:{hour:0,minute:0}),[P,I]=(0,r.useState)((null==a?void 0:a.enforcedEndTime)?(0,c.stringToTime)(a.enforcedEndTime)||void 0:{hour:23,minute:30}),[D,T]=(0,r.useState)((null==a?void 0:a.enforcedDays)||[]),[j,U]=(0,r.useState)((null==a?void 0:a.stopEnforcementAmount)||1),[F,L]=(0,r.useState)((null==a?void 0:a.stopEnforcementUnit)||i.QuotaDuration.Minute),[V,B]=(0,r.useState)(!(null==a?void 0:a.enforcedStartTime)),[q,H]=(0,r.useState)(0===((null==a?void 0:a.enforcedDays)||[]).length),[G,$]=(0,r.useState)(!!(null==a?void 0:a.stopEnforcementAmount));return{schedules:d,resources:p?m.filter((e=>e.scheduleId===p)):m,groups:f,scheduleId:p,resourceId:b,groupId:v,limitAmount:y,limitUnit:N,limitInterval:S,limitDuration:k,limitScope:A,limitStartTime:w,limitEndTime:P,limitDays:D,limitStopEnforcementAmount:j,limitStopEnforcementUnit:F,isEnabledAllDayChecked:V,isEnabledEveryDayChecked:q,isStopEnforcementChecked:G,onSaved:function(){return n(this,void 0,void 0,(function*(){if(S<=0||!(!w||!P||V||w.hour<P.hour||w.hour===P.hour&&w.minute<P.minute))return;const t={dateCreated:new Date,groupId:v||null,scheduleId:p||null,resourceId:b||null,limitUnit:N,duration:k,scope:A,limitAmount:y,enforcedDays:q?[]:D,id:(null==a?void 0:a.id)||0,interval:S,enforcedStartTime:void 0===w||V?null:(0,u.formatAsTime)(w.hour,w.minute),enforcedEndTime:void 0===P||V?null:(0,u.formatAsTime)(P.hour,P.minute),stopEnforcementAmount:G?j:null,stopEnforcementUnit:G?F:null};return e.onSaved(t)}))},onScheduleChanged:function(e){h(e),b&&e&&t.resources.byId[b].scheduleId!==e&&g(void 0)},onResourceChanged:function(e){g(e)},onGroupChanged:function(e){E(e)},onLimitAmountChanged:function(e){C(e)},onLimitUnitChanged:function(e){O(e)},onLimitIntervalChanged:function(e){_(e)},onLimitDurationChanged:function(e){R(e)},onLimitScopeChanged:function(e){M(e)},onLimitStartChanged:function(e){x(e)},onLimitEndChanged:function(e){I(e)},onLimitDaysChanged:function(e,t){T(t?[...D,e]:D.filter((t=>t!==e)))},onLimitStopEnforcementAmountChanged:function(e){U(e)},onLimitStopEnforcementUnitChanged:function(e){L(e)},onIsEnabledAllDayChecked:function(e){B(e)},onIsEnabledEveryDayChecked:function(e){H(e)},onIsStopEnforcementChecked:function(e){$(e)}}}},1753:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageQuotaListItem=void 0;const o=r(a(67294)),i=a(81468),s=a(28923),u=a(7081),c=a(75488),d=a(64604),m=a(12907),f=a(48828),p=a(51240);t.ManageQuotaListItem=function(e){const t=(0,o.useContext)(s.ManageQuotasContext),{quota:a,useAmPm:n,onDeletePrompt:l}=e,{t:r}=(0,i.useTranslation)();function h(e,t){let a="days";return e===c.QuotaDuration.Day&&1===t&&(a="day"),e===c.QuotaDuration.Minute&&1===t&&(a="minute"),e===c.QuotaDuration.Minute&&1!=t&&(a="minutes"),e===c.QuotaDuration.Hour&&1===t&&(a="hour"),e===c.QuotaDuration.Hour&&1!=t&&(a="hours"),e===c.QuotaDuration.Week&&1===t&&(a="week"),e===c.QuotaDuration.Week&&1!=t&&(a="weeks"),e===c.QuotaDuration.Month&&1===t&&(a="month"),e===c.QuotaDuration.Month&&1!=t&&(a="months"),e===c.QuotaDuration.Year&&1===t&&(a="year"),e===c.QuotaDuration.Year&&1!=t&&(a="years"),`${t} ${r(a)}`}const b="manage-quotas-list-item-label d-inline-block d-sm-block me-1 me-sm-0",g="manage-quotas-list-item-value d-inline-block d-sm-block";return o.default.createElement("div",{className:"manage-quotas-list-item"},o.default.createElement("div",{className:"row mb-0 mb-sm-2"},o.default.createElement("div",{className:"col-12 col-sm mb-0"},o.default.createElement("div",{className:b},r("QuotaOn")),o.default.createElement("div",{className:g},null===a.scheduleId?r("AllSchedules"):t.schedules.byId[a.scheduleId].name)),o.default.createElement("div",{className:"col-12 col-sm mb-0"},o.default.createElement("div",{className:b},r("QuotaOn")),o.default.createElement("div",{className:g},null===a.resourceId?r("AllResources"):t.resources.byId[a.resourceId].name)),o.default.createElement("div",{className:"col-12 col-sm mb-0"},o.default.createElement("div",{className:b},r("QuotaEachPersonIn")),o.default.createElement("div",{className:g},null===a.groupId?r("AllGroups"):t.groups.byId[a.groupId].name)),o.default.createElement("div",{className:"col-12 col-sm d-flex justify-content-end order-first order-sm-last"},o.default.createElement("div",null,o.default.createElement("a",{href:`#/edit/${a.id}`,className:"btn btn-link btn-icon",title:r("Edit")},o.default.createElement("span",{className:"bi bi-pencil-square edit icon"})),o.default.createElement("button",{onClick:()=>l(a),className:"btn btn-link btn-icon",title:r("Delete")},o.default.createElement("span",{className:"bi bi-trash delete icon"}))))),o.default.createElement("div",{className:"row mb-0 mb-sm-2"},o.default.createElement("div",{className:"col-12 col-sm mb-1 mb-sm-0"},o.default.createElement("div",{className:b},r("QuotaIsLimitedTo")),o.default.createElement("div",{className:g},function(){let e="hours";return a.limitUnit===u.QuotaLimit.Hours&&1===a.limitAmount&&(e="hour"),a.limitUnit===u.QuotaLimit.Reservations&&1!=a.limitAmount&&(e="reservations"),a.limitUnit===u.QuotaLimit.Reservations&&1===a.limitAmount&&(e="reservation"),`${a.limitAmount} ${r(e)}`}()," ",r("Every").toLocaleLowerCase()," ",h(a.duration,a.interval)," ",(a.scope==d.QuotaScope.IncludeCompleted?r("IncludingCompletedReservations"):r("NotCountingCompletedReservations")).toLocaleLowerCase()))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-12 col-sm-10 col-sm mb-1 mb-sm-0"},o.default.createElement("div",{className:"manage-quotas-list-item-label"},r("Enforced")),o.default.createElement("div",{className:g},function(){if(null===a.enforcedStartTime||null===a.enforcedEndTime)return r("AllDay");const e=(0,f.stringToTime)(a.enforcedStartTime),t=(0,f.stringToTime)(a.enforcedEndTime);return e&&t?`${r("Between")} ${(0,m.formatAsTime)(e.hour,e.minute,n)} - ${(0,m.formatAsTime)(t.hour,t.minute,n)}`:r("AllDay")}()," ",function(){if(0===a.enforcedDays.length)return r("Everyday");const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a.enforcedDays.sort().map((t=>e[t])).join(", ")}()," ",o.default.createElement("div",null,null===a.stopEnforcementAmount||null===a.stopEnforcementUnit?"":`${r("QuotaStopEnforcement")} ${r("UpTo")} ${h(a.stopEnforcementUnit,a.stopEnforcementAmount)}  ${r("QuotaAheadOfCurrentTime")}`))),o.default.createElement("div",{className:"col-12 col-sm"},o.default.createElement("div",{className:b},r("Created")),o.default.createElement("div",{className:g},Intl.DateTimeFormat(void 0,p.DATE_TIME_FORMAT).format(a.dateCreated)))))}},56185:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageQuotasDeleteModal=void 0;const l=n(a(67294)),r=a(81468),o=a(41773),i=a(9965);t.ManageQuotasDeleteModal=function(e){const{quota:t,onClose:a,onDelete:n}=e,{t:s}=(0,r.useTranslation)();return t?l.default.createElement(o.Modal,{title:s("DeleteItemModalTitle",{itemName:s("Quota")}),isOpen:!0,onToggle:a},l.default.createElement(o.ModalBody,null,l.default.createElement("div",{className:"alert alert-danger"},s("DeleteWarning"))),l.default.createElement(o.ModalFooter,null,l.default.createElement(i.DeleteAndCancelButtons,{onCancel:a,onDelete:()=>n(t)}))):l.default.createElement(l.default.Fragment,null)}},46118:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageQuotasHeader=void 0;const o=r(a(67294)),i=a(81468),s=a(15127),u=a(28923),c=a(88554);t.ManageQuotasHeader=function(){const{t:e}=(0,i.useTranslation)(),t=(0,o.useContext)(u.ManageQuotasContext),{isRootHash:a}=(0,c.useHashChange)();return o.default.createElement("div",{id:"manage-monitor-views-header",className:"admin-page-header"},o.default.createElement("div",{className:"admin-page-header-title"},o.default.createElement("h1",null,e("ManageQuotas"))),t.quotas.allIds.length>0&&a&&o.default.createElement("div",{className:"admin-page-header-actions"},o.default.createElement("div",null,o.default.createElement("a",{href:s.NavigationPaths.Add,className:"btn admin-action-button"},o.default.createElement("span",{className:"d-none d-sm-block"},e("AddQuota")," ",o.default.createElement("i",{className:"bi bi-plus-circle"})),o.default.createElement("span",{className:"d-block d-sm-none"},o.default.createElement("i",{className:"bi bi-plus-circle"}))))))}},77892:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageQuotasList=t.useManageQuotas=void 0;const i=r(a(67294)),s=a(28923),u=a(15127),c=a(81468),d=a(1753),m=a(56185);function f(e){const{state:t}=e,[a,n]=(0,i.useState)();return{onDeleted:function(e){return o(this,void 0,void 0,(function*(){return t.onQuotaDeleted(e.id)}))},onDeletePrompt:function(e){n(e)},onCancelQuotaDelete:function(){n(void 0)},quotaToDelete:a}}t.useManageQuotas=f,t.ManageQuotasList=function(e){const{useAmPm:t,quotas:a}=e,{onDeleted:n,onDeletePrompt:l,quotaToDelete:r,onCancelQuotaDelete:o}=f({state:(0,i.useContext)(s.ManageQuotasContext)}),{t:p}=(0,c.useTranslation)();return 0===a.length?i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col admin-results-none"},i.default.createElement("div",null,i.default.createElement("a",{href:u.NavigationPaths.Add,className:"btn admin-action-button"},i.default.createElement("span",{className:"d-none d-sm-block"},p("AddQuota")," ",i.default.createElement("i",{className:"bi bi-plus-circle"})),i.default.createElement("span",{className:"d-block d-sm-none"},i.default.createElement("i",{className:"bi bi-plus-circle"})))))):i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"manage-quotas-list"},i.default.createElement("div",{className:"manage-quotas-list-count"},a.length," ",p("Quotas")),i.default.createElement("div",{className:"manage-quotas-list-items"},a.map((e=>i.default.createElement(d.ManageQuotaListItem,{quota:e,key:e.id,useAmPm:t,onDeletePrompt:l}))))),i.default.createElement(m.ManageQuotasDeleteModal,{quota:r,onDelete:n,onClose:o}))}},56540:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageQuotasApi=void 0;const l=a(81902),r=a(12907);class o extends l.Api{constructor(){super(...arguments),this.apiUrl="admin/quotas/index.php"}loadQuota(){return n(this,void 0,void 0,(function*(){const e=yield this.get(this.apiUrl,"load"),t=Object.assign({},e);return t.quotas=e.quotas.map((e=>this.deserializeDates(e))),t}))}addQuota(e){return n(this,void 0,void 0,(function*(){const t=yield this.post(this.apiUrl,"add",e);return this.deserializeDates(t)}))}updateQuota(e){return n(this,void 0,void 0,(function*(){const t=yield this.post(this.apiUrl,"update",e);return this.deserializeDates(t)}))}deleteQuota(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiUrl,"delete",{id:e})}))}deserializeDates(e){return Object.assign(Object.assign({},e),{dateCreated:(0,r.stringToDate)(e.dateCreated.toString())})}}t.ManageQuotasApi=o},74631:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageQuotasAppComponent=t.ManageQuotasApp=void 0;const i=r(a(67294)),s=o(a(23768)),u=a(88554),c=a(51073),d=a(15127),m=a(28193),f=a(28923),p=a(56540),h=a(94559),b=a(46118),g=a(77892),v=a(51926),E=a(88113);function y(e){const{hash:t,changeHash:a}=(0,u.useHashChange)(),n=(0,i.useContext)(c.AppSettingsContext),l=(0,i.useContext)(f.ManageQuotasContext),{isLoading:r,quotas:o}=l,s=e.amPm,p=(0,h.lookupStateToArray)(o).sort(((e,t)=>e.dateCreated.getTime()-t.dateCreated.getTime()));if(r||n.isLoading)return i.default.createElement(m.Spinner,null);""===t&&a(d.NavigationPaths.Home);const b=t.match(new RegExp(/#\/edit\/(\d+)/));if(b&&2===b.length){const t=Number.parseInt(b[1]),a=p.find((e=>e.id===t));return i.default.createElement(E.EditQuotaComponent,Object.assign({},e,{useAmPm:s,quota:a}))}return t===d.NavigationPaths.Add?i.default.createElement(v.AddQuotaComponent,Object.assign({},e,{useAmPm:s})):i.default.createElement(g.ManageQuotasList,Object.assign({},e,{quotas:p,useAmPm:s}))}t.ManageQuotasApp=y,t.ManageQuotasAppComponent=function(e){(0,s.default)({lang:e.lang,basePath:e.path,version:e.version});const t=new p.ManageQuotasApi(e.path,e.csrf);return i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(c.AppSettingsProvider,Object.assign({},e),i.default.createElement(f.ManageQuotasProvider,{api:t},i.default.createElement(b.ManageQuotasHeader,null),i.default.createElement(y,Object.assign({},e)))))}},28923:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageQuotasProvider=t.ManageQuotasContext=t.useManageQuotasContext=void 0;const i=r(a(67294)),s=a(94559);function u(e){const[t,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)((0,s.createLookupState)([])),[r,u]=(0,i.useState)((0,s.createLookupState)([])),[c,d]=(0,i.useState)((0,s.createLookupState)([])),[m,f]=(0,i.useState)((0,s.createLookupState)([]));return(0,i.useEffect)((()=>{a(!0),e.loadQuota().then((e=>(u((0,s.createLookupState)(e.schedules)),d((0,s.createLookupState)(e.resources)),f((0,s.createLookupState)(e.groups)),l((0,s.createLookupState)(e.quotas)),e))).then((()=>a(!1)))}),[]),{isLoading:t,quotas:n,resources:c,groups:m,schedules:r,onQuotaAdded:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.addQuota(t),o={allIds:[...n.allIds,r.id],byId:Object.assign(Object.assign({},n.byId),{[r.id]:r})};l(o)}catch(e){}a(!1)}))},onQuotaUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateQuota(t),o={allIds:[...n.allIds],byId:Object.assign(Object.assign({},n.byId),{[r.id]:r})};l(o)}catch(e){}a(!1)}))},onQuotaDeleted:function(t){return o(this,void 0,void 0,(function*(){try{a(!0),yield e.deleteQuota(t);const r=Object.assign({},n.byId);delete r[t];const o={allIds:n.allIds.filter((e=>e!==t)),byId:r};l(o)}catch(e){}a(!1)}))}}}t.useManageQuotasContext=u,t.ManageQuotasContext=(0,i.createContext)(function(){const e=()=>Promise.resolve();return{isLoading:!1,resources:(0,s.createLookupState)([]),schedules:(0,s.createLookupState)([]),groups:(0,s.createLookupState)([]),quotas:(0,s.createLookupState)([]),onQuotaDeleted:e,onQuotaAdded:e,onQuotaUpdated:e}}()),t.ManageQuotasProvider=function(e){const a=u(e.api);return i.default.createElement(t.ManageQuotasContext.Provider,{value:a},e.children)}},95396:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.AddReservationColorComponent=void 0;const i=r(a(67294)),s=a(84477),u=a(88554),c=a(15127),d=a(79071);t.AddReservationColorComponent=function(e){const t=(0,i.useContext)(d.ManageReservationsContext),a=(0,u.useHashChange)();return i.default.createElement(s.ManageReservationColorForm,Object.assign({onSaved:function(e){return o(this,void 0,void 0,(function*(){yield t.onColorRuleAdded(e),a.changeHash(c.NavigationPaths.Home)}))},onCancel:function(){a.changeHash(c.NavigationPaths.Home)},titleKey:"AddRule",buttonKey:"AddRule"},e))}},19374:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EditReservationColorComponent=void 0;const i=r(a(67294)),s=a(79071),u=a(88554),c=a(15127),d=a(84477);t.EditReservationColorComponent=function(e){const t=(0,i.useContext)(s.ManageReservationsContext),a=(0,u.useHashChange)();return i.default.createElement(d.ManageReservationColorForm,Object.assign({onSaved:function(e){return o(this,void 0,void 0,(function*(){yield t.onColorRuleUpdated(e),a.changeHash(c.NavigationPaths.Home)}))},onCancel:function(){a.changeHash(c.NavigationPaths.Home)},titleKey:"UpdateRule",buttonKey:"UpdateRule"},e))}},84477:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageReservationColorForm=void 0;const i=r(a(67294)),s=a(81468),u=a(60519),c=a(68442),d=a(79071),m=a(49568),f=o(a(23157)),p=a(81927);t.ManageReservationColorForm=function(e){const{t}=(0,s.useTranslation)(),{titleKey:a,buttonKey:n,onCancel:l,dateTimeFormat:r,firstDayOfWeek:o,rule:h}=e,{color:b,attributeId:g,requiredValue:v,attributes:E,selectedAttribute:y,comparison:C,priority:N,onSaved:O,onAttributeIdChanged:S,onRequiredValueChanged:_,onColorChanged:k,onComparisonChanged:R,onPriorityChanged:A}=(0,m.useManageReservationColor)({state:(0,i.useContext)(d.ManageReservationsContext),onSaved:e.onSaved,rule:h});return i.default.createElement("form",{onSubmit:e=>{e.preventDefault(),O()}},i.default.createElement("div",{className:"default-box"},i.default.createElement("div",{className:"default-box-header"},t(a)),i.default.createElement("div",{className:"default-box-content mb-2"},i.default.createElement("div",{className:"manage-color-rules-attribute-option manage-color-rules-section"},i.default.createElement("div",{className:"manage-color-rules-section-title"},t("ReservationAttribute")),i.default.createElement("div",null,i.default.createElement(f.default,{id:"attribute-id",isClearable:!0,value:E.find((e=>e.id===g))||null,options:E,getOptionLabel:e=>e.label,getOptionValue:e=>e.id.toString(),onChange:e=>S(e?e.id:void 0),placeholder:t("Attributes")})),!y&&i.default.createElement("div",{className:"form-error"},t("SelectAnAttribute"))),y&&i.default.createElement("div",null,i.default.createElement("div",{className:"manage-color-rules-attribute-value manage-color-rules-section"},i.default.createElement("div",{className:"manage-color-rules-section-title"},t("Criteria")),i.default.createElement(p.CustomAttributeSearch,{attribute:y,value:[v],onChange:e=>_(null!==e&&e.length>0?e[0]:""),dateTimeFormat:r,firstDayOfWeek:o,comparison:C,onComparisonChanged:R,allowMultipleValues:!1})),i.default.createElement("div",{className:"manage-color-rules-color manage-color-rules-section"},i.default.createElement("div",{className:"manage-color-rules-section-title"},t("ReservationColor")),i.default.createElement("div",{className:"d-flex"},i.default.createElement("input",{className:"me-3",type:"color",value:"#"+b,onChange:e=>k(e.target.value)}),i.default.createElement("div",{className:"flex-grow-0"},i.default.createElement("div",{className:"input-group"},i.default.createElement("span",{className:"input-group-text",id:"hex-addon"},"#"),i.default.createElement("input",{id:"color-hex-code",type:"text",className:"form-control color-hex-code",placeholder:"000000","aria-label":"Color Hex Code","aria-describedby":"hex-addon",maxLength:6,minLength:6,value:b,onChange:e=>k(e.target.value)}))))),i.default.createElement("div",{className:"manage-color-rules-attribute-value manage-color-rules-section"},i.default.createElement("div",{className:"manage-color-rules-section-title"},t("Priority")),i.default.createElement("label",{htmlFor:"manage-color-rules-priority-text",className:"form-label visually-hidden"},t("Priority")),0===N&&i.default.createElement("div",{className:"form-check"},i.default.createElement("label",{className:"form-check-label",htmlFor:"manage-color-rules-priority-none"},t("None")),i.default.createElement("input",{id:"manage-color-rules-priority-none",type:"checkbox",className:"form-check-input",onChange:e=>e.target.checked?A("0"):A("1"),checked:0===N})),0!==N&&i.default.createElement("input",{id:"manage-color-rules-priority-text",type:"number",min:0,className:"form-control",value:N,onChange:e=>A(e.target.value)})))),i.default.createElement("div",{className:"default-box-footer"},i.default.createElement(u.CancelButton,{onClick:l}),i.default.createElement(c.SubmitButton,{text:t(n)}))))}},49568:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useManageReservationColor=void 0;const l=a(69989),r=a(94559),o=a(67294);t.useManageReservationColor=function(e){const{state:t,rule:a}=e,[i,s]=(0,o.useState)((null==a?void 0:a.attributeId)||0),[u,c]=(0,o.useState)((null==a?void 0:a.color)||"000000"),[d,m]=(0,o.useState)((null==a?void 0:a.value)||""),[f,p]=(0,o.useState)((null==a?void 0:a.comparisonType)||l.ComparisonType.Equals),[h,b]=(0,o.useState)((null==a?void 0:a.priority)||0);return{attributeId:i,color:u.replace("#",""),requiredValue:d,selectedAttribute:t.attributes.byId[i],comparison:f,priority:h,onSaved:function(){return n(this,void 0,void 0,(function*(){if(!i||""===u.trim())return;const t={id:(null==a?void 0:a.id)||0,color:u.trim(),value:f===l.ComparisonType.Empty?"":d.trim(),attributeId:i,comparisonType:""===d.trim()?l.ComparisonType.Empty:f,priority:h};e.onSaved(t)}))},onAttributeIdChanged:function(e){e&&(p(l.ComparisonType.Equals),m(""),s(e))},onRequiredValueChanged:function(e){m(e)},onColorChanged:function(e){c(e.replace("#",""))},onComparisonChanged:function(e){p(e)},onPriorityChanged:function(e){b(Number.parseInt(e))},attributes:(0,r.lookupStateToArray)(t.attributes)}}},30375:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageReservationColorsDeleteModal=void 0;const l=n(a(67294)),r=a(81468),o=a(41773),i=a(9965);t.ManageReservationColorsDeleteModal=function(e){const{rule:t,onClose:a,onDelete:n}=e,{t:s}=(0,r.useTranslation)();return t?l.default.createElement(o.Modal,{title:s("DeleteItemModalTitle",{itemName:s("ReservationColorRule")}),isOpen:!0,onToggle:a},l.default.createElement(o.ModalBody,null,l.default.createElement("div",{className:"alert alert-danger"},s("DeleteWarning"))),l.default.createElement(o.ModalFooter,null,l.default.createElement(i.DeleteAndCancelButtons,{onCancel:a,onDelete:()=>n(t)}))):l.default.createElement(l.default.Fragment,null)}},84313:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageReservationColorsHeader=void 0;const o=r(a(67294)),i=a(81468),s=a(15127),u=a(88554),c=a(79071),d=a(51073);t.ManageReservationColorsHeader=function(){const{t:e}=(0,i.useTranslation)(),t=(0,o.useContext)(c.ManageReservationsContext),a=(0,o.useContext)(d.AppSettingsContext),{isRootHash:n}=(0,u.useHashChange)();return o.default.createElement("div",{id:"manage-monitor-views-header",className:"admin-page-header"},o.default.createElement("div",{className:"admin-page-header-title"},o.default.createElement("h1",null,e("ReservationColors"))),o.default.createElement("div",{className:"admin-page-header-actions"},t.rules.allIds.length>0&&n&&o.default.createElement("div",null,o.default.createElement("a",{href:s.NavigationPaths.Add,className:"btn admin-action-button"},o.default.createElement("span",{className:"d-none d-sm-block"},e("AddRule")," ",o.default.createElement("i",{className:"bi bi-plus-circle"})),o.default.createElement("span",{className:"d-block d-sm-none"},o.default.createElement("i",{className:"bi bi-plus-circle"})))),o.default.createElement("div",{className:"dropdown"},o.default.createElement("button",{className:"btn btn-light",type:"button",id:"manage-reservations-extras","data-bs-toggle":"dropdown","aria-expanded":"false"},o.default.createElement("i",{className:"bi-list"})),o.default.createElement("ul",{className:"dropdown-menu","aria-labelledby":"manage-reservations-extras"},o.default.createElement("li",null,o.default.createElement("a",{href:a.path+"admin/manage_reservations.php",className:"dropdown-item"},e("ManageReservations")))))))}},54302:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useManageReservationColors=void 0;const l=a(23612),r=a(67294);t.useManageReservationColors=function(e){const{state:t}=e,[a,o]=(0,r.useState)();return{rules:(0,l.getReservationColorRules)(t.rules,t.attributes),ruleToDelete:a,onDeleted:function(e){return n(this,void 0,void 0,(function*(){return t.onColorRuleDeleted(e)}))},onCancelDelete:function(){o(void 0)},onDeletePrompt:function(e){o(e.rule)}}}},67752:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageReservationsColorsListComponent=void 0;const o=r(a(67294)),i=a(79071),s=a(54302),u=a(15127),c=a(81468),d=a(69989),m=a(30375);t.ManageReservationsColorsListComponent=function(){const{rules:e,ruleToDelete:t,onDeleted:a,onDeletePrompt:n,onCancelDelete:l}=(0,s.useManageReservationColors)({state:(0,o.useContext)(i.ManageReservationsContext)}),{t:r}=(0,c.useTranslation)();return 0===e.length?o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col admin-results-none"},o.default.createElement("div",null,o.default.createElement("a",{href:u.NavigationPaths.Add,className:"btn admin-action-button"},o.default.createElement("span",{className:"d-none d-sm-block"},r("AddRule")," ",o.default.createElement("i",{className:"bi bi-plus-circle"})),o.default.createElement("span",{className:"d-block d-sm-none"},o.default.createElement("i",{className:"bi bi-plus-circle"})))))):o.default.createElement("div",{className:"manage-color-rules"},o.default.createElement("div",{className:"manage-color-rules-list"},o.default.createElement("table",{className:"table"},o.default.createElement("thead",null,o.default.createElement("tr",null,o.default.createElement("th",null,r("Rule")),o.default.createElement("th",{className:"manage-color-rules-list-color-col"},r("ReservationColor")),o.default.createElement("th",{className:"manage-color-rules-list-priority-col"},r("Priority")),o.default.createElement("th",{className:"action"},r("Actions")))),o.default.createElement("tbody",null,e.map((e=>o.default.createElement("tr",{key:e.id},o.default.createElement("td",null,r("TheValueForReservationAttribute")," ",o.default.createElement("strong",null,e.attributeName)," ",function(e){const{comparisonType:t}=e;return t===d.ComparisonType.Empty?r("HasNoValue"):t===d.ComparisonType.Contains?r("Contains"):t===d.ComparisonType.LessThan?r("LessThan"):t===d.ComparisonType.GreaterThan?r("GreaterThan"):r("Is")}(e)," ",o.default.createElement("strong",null,e.requiredValue)),o.default.createElement("td",{className:"manage-color-rules-list-color-col"},o.default.createElement("div",{className:"d-flex align-items-center"},o.default.createElement("div",{className:"color-swatch",style:{backgroundColor:e.color}}," "),o.default.createElement("div",{className:"ms-2"},e.color))),o.default.createElement("td",{className:"manage-color-rules-list-priority-col"},e.priority||r("None")),o.default.createElement("td",{className:"action"},o.default.createElement("div",null,o.default.createElement("a",{href:`#/edit/${e.id}`,className:"btn btn-link",title:r("Edit")},o.default.createElement("span",{className:"bi bi-pencil-square edit icon"}))," ","|"," ",o.default.createElement("button",{onClick:()=>n(e),className:"btn btn-link",title:r("Delete")},o.default.createElement("span",{className:"bi bi-trash delete icon"})))))))))),o.default.createElement(m.ManageReservationColorsDeleteModal,{onDelete:a,onClose:l,rule:t}))}},49511:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageReservationsApi=void 0;const l=a(81902);class r extends l.Api{constructor(){super(...arguments),this.apiUrl="admin/reservations/colors/index.php"}loadColors(){return n(this,void 0,void 0,(function*(){return this.get(this.apiUrl,"load")}))}addColorRule(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiUrl,"add",e)}))}updateColorRule(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiUrl,"update",e)}))}deleteColorRule(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiUrl,"delete",e)}))}}t.ManageReservationsApi=r},24773:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageReservationsColorsAppComponent=t.ManageReservationsColorsApp=void 0;const i=r(a(67294)),s=o(a(23768)),u=a(88554),c=a(51073),d=a(15127),m=a(28193),f=a(49511),p=a(79071),h=a(67752),b=a(95396),g=a(19374),v=a(84313);function E(e){const{hash:t,changeHash:a}=(0,u.useHashChange)(),n=(0,i.useContext)(c.AppSettingsContext),l=(0,i.useContext)(p.ManageReservationsContext);if(l.isLoading||n.isLoading)return i.default.createElement(m.Spinner,null);""===t&&a(d.NavigationPaths.Home);const r=t.match(new RegExp(/#\/edit\/(\d+)/));if(r&&2===r.length){const t=Number.parseInt(r[1]),a=l.findRuleById(t);return i.default.createElement(g.EditReservationColorComponent,Object.assign({},e,{rule:a}))}return t===d.NavigationPaths.Add?i.default.createElement(b.AddReservationColorComponent,Object.assign({},e)):i.default.createElement(h.ManageReservationsColorsListComponent,null)}t.ManageReservationsColorsApp=E,t.ManageReservationsColorsAppComponent=function(e){(0,s.default)({lang:e.lang,basePath:e.path,version:e.version});const t=new f.ManageReservationsApi(e.path,e.csrf);return i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(c.AppSettingsProvider,Object.assign({},e),i.default.createElement(p.ManageReservationsProvider,{api:t},i.default.createElement(v.ManageReservationColorsHeader,null),i.default.createElement(E,Object.assign({},e)))))}},79071:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageReservationsProvider=t.ManageReservationsContext=t.useManageReservationsContext=void 0;const i=r(a(67294)),s=a(94559);function u(e){const[t,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)((0,s.createLookupState)([])),[r,u]=(0,i.useState)((0,s.createLookupState)([]));return(0,i.useEffect)((()=>{a(!0),e.loadColors().then((e=>(l((0,s.createLookupState)(e.attributes)),u((0,s.createLookupState)(e.rules)),a(!1),e))).catch((()=>{a(!1)}))}),[]),{isLoading:t,attributes:n,rules:r,findRuleById:function(e){return r.byId[e]},onColorRuleAdded:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const n=yield e.addColorRule(t),l={allIds:[...r.allIds,n.id],byId:Object.assign(Object.assign({},r.byId),{[n.id]:n})};u(l)}catch(e){}a(!1)}))},onColorRuleUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const n=yield e.updateColorRule(t),l={allIds:[...r.allIds],byId:Object.assign(Object.assign({},r.byId),{[n.id]:n})};u(l)}catch(e){}a(!1)}))},onColorRuleDeleted:function(t){return o(this,void 0,void 0,(function*(){const n=t.id;try{a(!0),yield e.deleteColorRule(t);const l=Object.assign({},r.byId);delete l[n];const o={allIds:r.allIds.filter((e=>e!==n)),byId:l};u(o)}catch(e){}a(!1)}))}}}t.useManageReservationsContext=u,t.ManageReservationsContext=(0,i.createContext)(function(){const e=()=>Promise.resolve();return{isLoading:!1,rules:{byId:(0,s.createIndexed)([]),allIds:[]},attributes:{byId:(0,s.createIndexed)([]),allIds:[]},findRuleById:()=>{},onColorRuleAdded:e,onColorRuleUpdated:e,onColorRuleDeleted:e}}()),t.ManageReservationsProvider=function(e){const a=u(e.api);return i.default.createElement(t.ManageReservationsContext.Provider,{value:a},e.children)}},23612:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReservationColorRules=void 0,t.getReservationColorRules=function(e,t){return e.allIds.map((a=>{const n=e.byId[a];return{rule:n,id:n.id,color:n.color,comparisonType:n.comparisonType,attributeName:t.byId[n.attributeId].label,requiredValue:n.value,priority:n.priority}})).sort(((e,t)=>0===e.priority&&0!==t.priority?1:0!==e.priority&&0===t.priority?-1:e.priority-t.priority))}},65169:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddResourceComponent=t.useAddResource=void 0;const s=r(a(67294)),u=a(81468),c=i(a(23157)),d=i(a(27976)),m=a(15127),f=a(88554),p=a(83231),h=a(4249),b=a(96027),g=a(28193),v=a(34297),E=a(75712),y=a(60519),C=a(68442),N=a(12907),O=a(51073);function S(e){const{changeHash:t}=(0,f.useHashChange)(),{state:a}=e,n=(0,s.useMemo)((()=>(0,p.getScheduleViews)(a)),[a.schedules]),l=(0,s.useMemo)((()=>(0,p.getAttributeViews)(a).filter((e=>0===e.entityIds.length))),[a.attributes]),r=(0,s.useMemo)((()=>(0,p.getResourceTypeViews)(a)),[a.types]),i=(0,s.useMemo)((()=>(0,p.getResourceAdminGroupViews)(a)),[a.groups]),[u,c]=(0,s.useState)(""),[d,h]=(0,s.useState)(L()),[b,g]=(0,s.useState)(),[v,y]=(0,s.useState)(!1),[C,N]=(0,s.useState)(!1),[O,S]=(0,s.useState)(!1),[_,k]=(0,s.useState)([]),[R,A]=(0,s.useState)(),[M,w]=(0,s.useState)(),[x,P]=(0,s.useState)([]),[I,D]=(0,s.useState)([]),[T,j]=(0,s.useState)(!0),[U,F]=(0,s.useState)("");function L(){return n.find((e=>e.isDefault))||n[0]}function V(e){const t=_.find((t=>t.id===e)),a=l.find((t=>t.id===e));return!!a&&(0,E.checkIsAttributeValid)(a,t)}return(0,s.useEffect)((()=>{h(L())}),[n]),{name:u,schedule:d,resourceAdministrator:b,autoPermission:v,requireApproval:C,resourceTypes:r,schedules:n,groups:i,attributes:l,attributeValues:_,addAnother:O,isFormValid:T,resourceTypeName:M||(R?r.find((e=>e.id===R)).name:""),isResourceAdminValid:void 0!==b||!a.isAdminGroupRequired,addedResourceName:U,files:x,allImages:I,isAttributeValid:V,onImagesChanged:function(e,t){D(e),P(t)},onNameChanged:function(e){c(e)},onResourceAdded:function(){return o(this,void 0,void 0,(function*(){if(j(!0),F(""),""===u.trim()||!l.every((e=>V(e.id)))||a.isAdminGroupRequired&&void 0===b)j(!1),window.scrollTo(0,0);else{const e={name:u.trim(),adminGroupId:null==b?void 0:b.id,autoPermission:v,newType:M,typeId:R,requiresApproval:C,scheduleId:d.id,attributeValues:_.map((e=>Object.assign(Object.assign({},e),{value:e.value.trim()})))};yield a.onResourceAdded(e,I.map((e=>e.name)),x),O?(F(e.name),c(""),h(L()),A(void 0),w(void 0),g(void 0),y(!1),N(!1),k([]),D([]),P([]),window.scrollTo(0,0)):t(m.NavigationPaths.Home)}}))},onApprovalChanged:e=>N(e),onAttributeValueChanged:function(e,t){const a=_.filter((e=>e.id!==t));a.push({id:t,value:e||""}),k(a)},onAddAnotherChanged:e=>S(e),onAutoPermissionChanged:e=>y(e),onScheduleChanged:function(e){h(n.find((t=>t.id===e))||L())},onTypeChanged:function(e){A(e),e&&w(void 0)},onTypeCreated:function(e){e?(w(e.trim()),A(void 0)):w(void 0)},onAdminGroupChanged:function(e){g(i.find((t=>t.id===e)))}}}t.useAddResource=S,t.AddResourceComponent=function(){const{t:e}=(0,u.useTranslation)(),{changeHash:t}=(0,f.useHashChange)(),a=(0,s.useContext)(b.ManageResourcesContext),n=(0,s.useContext)(O.AppSettingsContext),{name:l,schedule:r,resourceAdministrator:o,autoPermission:i,requireApproval:p,attributes:E,attributeValues:_,schedules:k,resourceTypes:R,resourceTypeName:A,groups:M,addAnother:w,files:x,allImages:P,isAttributeValid:I,isFormValid:D,isResourceAdminValid:T,addedResourceName:j,onImagesChanged:U,onNameChanged:F,onResourceAdded:L,onScheduleChanged:V,onAutoPermissionChanged:B,onApprovalChanged:q,onAttributeValueChanged:H,onAddAnotherChanged:G,onTypeChanged:$,onTypeCreated:Q,onAdminGroupChanged:W}=S({state:a});if(a.isLoading)return s.default.createElement(g.Spinner,null);const z="col-md-6 col-sm-12";return s.default.createElement("form",{noValidate:!0,onSubmit:e=>{e.preventDefault(),L()}},!D&&s.default.createElement("div",{className:"alert alert-danger"},e("AddResourceError")),""!==j&&s.default.createElement("div",{className:"alert alert-info"},e("ResourceSuccessfullyAdded",{resourceName:j})),s.default.createElement("div",{className:"default-box default-box-1-padding mb-2 manage-resources-item"},s.default.createElement("div",{className:"default-box-header"},e("AddNewResource")),s.default.createElement("div",{className:"default-box-content margin-bottom-15"},s.default.createElement("div",{className:"row mb-3"},s.default.createElement("div",null,s.default.createElement("label",{htmlFor:"add-resource-name",className:"form-label"},e("Name")),s.default.createElement("input",{value:l,onChange:e=>F(e.target.value),id:"add-resource-name",type:"text",className:"form-control",required:!0,autoFocus:!0}),""===l.trim()&&s.default.createElement("span",{className:"custom-attribute-error"},e("ResourceNameRequired")))),s.default.createElement("div",{className:"row mb-3"},s.default.createElement("div",{className:z},s.default.createElement("label",{htmlFor:"add-resource-schedule",className:"form-label"},e("Schedule")),s.default.createElement(c.default,{value:r,options:k,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),isClearable:!1,isMulti:!1,onChange:e=>V(e.id)})),s.default.createElement("div",{className:z},s.default.createElement("label",{htmlFor:"add-resource-type",className:"form-label"},e("ResourceType")),s.default.createElement(d.default,{id:"add-resource-type",onChange:(e,t)=>{"select-option"!==t.action&&"deselect-option"!==t.action&&"clear"!==t.action||$(null==e?void 0:e.value),"create-option"===t.action&&Q(null==e?void 0:e.label)},options:R.map((e=>({value:e.id,label:e.name}))),isClearable:!0,value:R.map((e=>({value:e.id,label:e.name}))).find((e=>e.label===A))}))),M.length>0&&s.default.createElement("div",{className:"row mb-3"},s.default.createElement("div",{className:z},s.default.createElement("label",{htmlFor:"add-resource-administrator",className:"form-label"},e("ResourceAdministrator")),s.default.createElement(c.default,{value:o,options:M,getOptionValue:e=>e.id.toString(),getOptionLabel:e=>e.name,isClearable:!a.isAdminGroupRequired,onChange:e=>W(e.id)})),!T&&s.default.createElement("span",{className:"custom-attribute-error"},e("ResourceAdminRequired"))),s.default.createElement("div",{className:"row mb-3"},s.default.createElement("div",{className:z},s.default.createElement("div",{className:"form-check"},s.default.createElement("label",{htmlFor:"add-resource-permissions",className:"form-check-label"},(0,N.removeStrong)(e("ResourcePermissionAutoGranted"))),s.default.createElement("input",{type:"checkbox",id:"add-resource-permissions",className:"form-check-input",checked:i,onChange:e=>B(e.target.checked)}))),s.default.createElement("div",{className:z},s.default.createElement("div",{className:"form-check"},s.default.createElement("label",{htmlFor:"add-resource-approval",className:"form-check-label"},(0,N.removeStrong)(e("ResourceRequiresApproval"))),s.default.createElement("input",{type:"checkbox",id:"add-resource-approval",className:"form-check-input",checked:p,onChange:e=>q(e.target.checked)})))),s.default.createElement("div",{className:"row"},E.map((e=>{var t;return s.default.createElement("div",{className:"col-md-6 col-sm-12 mb-3",key:e.id},s.default.createElement(v.CustomAttributeEdit,{value:null===(t=_.find((t=>t.id===e.id)))||void 0===t?void 0:t.value,onChange:t=>H(t,e.id),attribute:e,isValid:I(e.id),dateTimeFormat:n.dateTimeFormat,firstDayOfWeek:n.firstDayOfWeek,lang:n.lang}))}))),s.default.createElement("div",{className:"row"},s.default.createElement(h.AddResourceImages,{onImagesChanged:U,files:x,allImages:P}))),s.default.createElement("div",{className:"default-box-footer"},s.default.createElement("div",{className:"form-check"},s.default.createElement("label",{htmlFor:"add-resource-another"},e("AddMoreResources"))," ",s.default.createElement("span",{className:"bi bi-info-circle-fill",title:e("AddMoreResourcesInfo")}),s.default.createElement("input",{id:"add-resource-another",type:"checkbox",className:"form-check-input",checked:w,onChange:e=>G(e.target.checked)})),s.default.createElement(y.CancelButton,{onClick:function(){t(m.NavigationPaths.Home)}}),s.default.createElement(C.SubmitButton,{text:e("Add")}))))}},4249:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AddResourceImages=void 0;const l=n(a(67294)),r=a(45156),o=a(41389),i=a(81468),s=a(11966),u=a(89941),c=a(68208);t.AddResourceImages=function(e){const{t}=(0,i.useTranslation)(),{onReorder:a,onImagesDropped:n,onRemove:d}=(0,u.useResourceImages)({files:e.files,allImages:e.allImages,urlMethods:(0,c.getDefaultFileUrlMethods)(),onImagesChanged:e.onImagesChanged}),{getRootProps:m,getInputProps:f}=(0,o.useDropzone)({accept:{"image/*":[]},maxFiles:10,maxSize:2097152,minSize:1,onDrop:e=>{n(e)}});return l.default.createElement("div",{className:"resource-image-row edit"},l.default.createElement("div",Object.assign({},m({className:"dropzone resource-image-add"})),l.default.createElement("div",null,l.default.createElement("input",Object.assign({},f({capture:!1}))),l.default.createElement("span",{className:"bi bi-image"}),l.default.createElement("br",null),t("AddImage"))),l.default.createElement(r.DragDropContext,{onDragEnd:e=>{e.destination&&a(e.source.index,e.destination.index)}},l.default.createElement(r.Droppable,{droppableId:"droppable",direction:"horizontal"},((t,a)=>{return l.default.createElement("div",Object.assign({ref:t.innerRef,style:(n=a.isDraggingOver,{background:n?"lightblue":"",display:"flex",overflow:"auto"})},t.droppableProps),e.allImages.map(((e,t)=>l.default.createElement("div",{key:e.name},l.default.createElement(s.ResourceImage,{image:e,index:t,isEditing:!0,onRemove:d})))),t.placeholder);var n}))))}},95062:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportResourcesModal=t.useResourceExport=t.getResourceCsvFormat=void 0;const i=r(a(67294)),s=a(81468),u=o(a(93162)),c=a(41773),d=a(60519),m=a(96027),f=a(83231),p=a(69989),h=a(56731),b=a(43433);function g(e){const{state:t}=e,a=new b.ResourceCsv(t);function n(e){const t=h.CsvUtils.createCsv(`${a.getExportFormat().map((e=>h.CsvUtils.escapeCsv(e.label))).join(",")}\r\n`,e.map((e=>{return t=e,`${a.getExportFormat().map((e=>h.CsvUtils.escapeCsv(e.data(t)))).join(",")}`;var t})).join("\r\n"));u.default.saveAs(t,"resources.csv")}return{onExportAll:function(){n((0,f.getAdminResourceViews)(t))},onExportFiltered:function(){n((0,f.getFilteredResources)((0,f.getAdminResourceViews)(t),t.filter))}}}t.getResourceCsvFormat=function(){return[{label:"name",data:e=>h.CsvUtils.asString(e.name),parse:e=>({name:e})},{label:"status",data:e=>h.CsvUtils.asString(e.statusName),parse:e=>({statusId:p.ResourceStatusOptions.Available,statusName:e})}]},t.useResourceExport=g,t.ExportResourcesModal=function(e){const{t}=(0,s.useTranslation)(),{onExportAll:a,onExportFiltered:n}=g({state:(0,i.useContext)(m.ManageResourcesContext)});return i.default.createElement(c.Modal,{isOpen:e.isOpen,title:t("ExportResources"),onToggle:e.onToggle},i.default.createElement(c.ModalBody,null,i.default.createElement("div",{className:"export-resources-body"},i.default.createElement("div",{className:"mb-1"},t("ExportResourceInstructions")),i.default.createElement("div",{className:"mt-4"},i.default.createElement("button",{className:"btn btn-outline-primary me-1",onClick:a},t("ExportAllResources")),i.default.createElement("button",{className:"btn btn-outline-primary",onClick:n},t("ExportFilteredResources"))))),i.default.createElement(c.ModalFooter,null,i.default.createElement(d.CancelButton,{onClick:()=>e.onToggle()})))}},91308:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ImportResourcesModal=t.useResourceImport=void 0;const s=r(a(67294)),u=a(81468),c=a(41389),d=i(a(93162)),m=a(41773),f=a(60519),p=a(96027),h=a(56731),b=a(28193),g=a(43433);function v(e){const{state:t}=e,[a,n]=(0,s.useState)(),[l,r]=(0,s.useState)([]),[i,u]=(0,s.useState)([]),[c,m]=(0,s.useState)(!1),[f,p]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),E="The file could not be parsed. Export the resources or use the template as an example.";return{onResourcesImported:function(){return o(this,void 0,void 0,(function*(){if(a&&a.length>0){p(!0);const e=a.map((e=>{let a=0;return b&&(a=t.resources.allIds.find((a=>t.resources.byId[a].name.toLowerCase()===e.name.toLowerCase()))||0),{adminGroupId:e.adminGroupId,allowConcurrent:null!==e.maxConcurrent&&e.maxConcurrent>1,allowCrossDay:e.allowCrossDay,attributeValues:e.attributeValues,autoPermission:e.autoPermission,autoReleaseMinutes:e.autoReleaseMinutes,buffer:e.buffer,capacity:e.capacity,color:e.color,textColor:"",contact:e.contact,creditsCalculated:e.creditsCalculated,creditsChargedForBlockedSlots:e.creditsChargedForBlockedSlots,creditsOffPeak:e.creditsOffPeak,creditsPeak:e.creditsPeak,description:e.description,enableAutoExtend:e.enableAutoExtend,images:[],location:e.location,maxConcurrent:e.maxConcurrent,maxDuration:e.maxDuration,minDuration:e.minDuration,minParticipants:e.minParticipants,notes:e.notes,noticeAdd:e.noticeAdd||null,noticeDelete:e.noticeDelete||null,noticeEnd:e.noticeEnd||null,noticeUpdate:e.noticeUpdate||null,publicId:"",relationships:{excluded:e.relationshipsExcluded.map((e=>e.id)),excludedAtTime:e.relationshipsExcludedAtTime.map((e=>e.id)),required:e.relationshipsRequired.map((e=>e.id)),requiredOneWay:e.relationshipsRequiredOneWay.map((e=>e.id))},requiresApproval:e.requiresApproval,requiresCheckin:e.requiresCheckin,resourceDisplayUrl:null,resourceGroupIds:e.resourceGroupIds,rssUrl:null,scheduleId:e.scheduleId,showToPublic:!1,slotLabel:e.slotLabel,sortOrder:e.sortOrder,statusId:e.statusId,statusReasonId:null,typeId:e.typeId,webCalUrl:null,id:a,name:e.name,checkinLimitedToAdmins:e.checkinLimitedToAdmins,autoReleaseAction:null===e.autoReleaseMinutes||void 0===e.autoReleaseMinutes?null:e.autoReleaseAction}}));yield t.onResourcesImported(e),p(!1)}}))},onFileAdded:function(e){return o(this,void 0,void 0,(function*(){const a=[];let l=[];const o=new g.ResourceCsv(t);m(!0),u([]),n(void 0);const i=[];try{(yield(0,h.parseCsv)(e)).data.forEach(((e,n)=>{const r=o.parseRow(e);if(null===r.item)l=[...l,...r.errors.map((e=>`Row ${n+1}: ${e}`))];else{const e=r.item.name.toLocaleLowerCase(),l=a.find((t=>t.name.toLocaleLowerCase()===e)),o=t.resources.allIds.find((a=>t.resources.byId[a].name.toLocaleLowerCase()===e));(l||o)&&i.push({name:r.item.name,index:n}),a.push(r.item)}}))}catch(e){console.error(e),l.push(E)}0===a.length&&l.push(E),n(a),u(l),m(!1),r(i)}))},onFileRejected:function(){u([E])},onTemplateRequested:function(){const e=`${new g.ResourceCsv(t).getExportFormat().map((e=>h.CsvUtils.escapeCsv(e.label))).join(",")}\r\n`,a=h.CsvUtils.createCsv(e,"");d.default.saveAs(a,"resources.csv")},onNewFileSelected:function(){u([]),n(void 0),m(!1),p(!1)},onUpdateExistingChanged:function(e){v(e)},rowCount:null==a?void 0:a.length,errors:i,dupes:l,isParsing:c,isUploading:f,isUpdatingExisting:b}}t.useResourceImport=v,t.ImportResourcesModal=function(e){const{t}=(0,u.useTranslation)(),{isParsing:a,rowCount:n,isUploading:l,errors:r,dupes:o,isUpdatingExisting:i,onFileAdded:d,onFileRejected:h,onResourcesImported:g,onTemplateRequested:E,onNewFileSelected:y,onUpdateExistingChanged:C}=v({state:(0,s.useContext)(p.ManageResourcesContext)});const{getRootProps:N,getInputProps:O}=(0,c.useDropzone)({accept:{".csv":[]},maxFiles:1,maxSize:2097152,minSize:1,onDropAccepted:e=>{d(e[0])},onDropRejected:()=>{h()}});return(0,s.useEffect)((()=>{y()}),[e.isOpen]),s.default.createElement(m.Modal,{isOpen:e.isOpen,title:t("ImportResources"),onToggle:e.onToggle},s.default.createElement(m.ModalBody,null,s.default.createElement("div",{className:"import-resources-body"},a||l?s.default.createElement(b.Spinner,null):void 0===n&&0===r.length?s.default.createElement(s.default.Fragment,null,s.default.createElement("div",null,s.default.createElement("div",{className:"mb-1 text-start"},s.default.createElement(u.Trans,{i18nKey:"ResourceImportInstructions",components:{ul:s.default.createElement("ul",null),li:s.default.createElement("li",null)}})),s.default.createElement("div",null,s.default.createElement("button",{className:"btn btn-outline-primary ",onClick:E},t("GetTemplate")))),s.default.createElement("div",{className:""},s.default.createElement("div",Object.assign({},N({className:"drop-import-file"})),s.default.createElement("div",null,s.default.createElement("input",Object.assign({},O())),s.default.createElement("span",{className:"bi bi-upload"}),s.default.createElement("br",null),t("ChooseOrDropFile"))))):r.length>0?s.default.createElement(s.default.Fragment,null,s.default.createElement("button",{className:"btn btn-primary",onClick:y},"Choose another file"),s.default.createElement("div",{className:"alert alert-warning mt-1 text-start"},s.default.createElement("ul",null,r.map((e=>s.default.createElement("li",{key:e},e)))))):n&&n>0?s.default.createElement("div",null,s.default.createElement("div",{className:"import-parsed-successfully alert alert-success"},"Everything looks good. We found ",n," resources in the file."),o.length>0&&!i&&s.default.createElement("div",{className:"import-parsed-successfully alert alert-warning text-start"},s.default.createElement("div",{className:"mb-2"},s.default.createElement("strong",null,t("DuplicateResourceImportWarning"))),o.map((e=>s.default.createElement("div",{key:e.name},e.name," (",t("Row")," ",e.index+1,")")))),s.default.createElement("button",{className:"btn btn-primary",onClick:function(){g().then((()=>{e.onToggle()})).catch((()=>e.onToggle()))}},t("ImportResourcesConfirm",{count:n}))):s.default.createElement(s.default.Fragment,null))),s.default.createElement(m.ModalFooter,null,s.default.createElement("div",{className:"form-check me-auto"},s.default.createElement("label",{htmlFor:"import-update-existing",className:"form-check-label"},t("UpdateResourcesOnImport")),s.default.createElement("input",{type:"checkbox",id:"import-update-existing",className:"form-check-input",onChange:e=>C(e.target.checked)})),s.default.createElement(f.CancelButton,{onClick:()=>e.onToggle()})))}},56036:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageResourceItem=void 0;const o=r(a(67294)),i=a(81468),s=a(93858),u=a(98853),c=a(12774),d=a(23873),m=a(94964),f=a(97763),p=a(31679),h=a(13352),b=a(83017),g=a(64105),v=a(34700),E=a(51073);t.ManageResourceItem=function(e){const{resource:t,resourceGroups:a,attributes:n}=e,l=(0,o.useContext)(E.AppSettingsContext),{t:r}=(0,i.useTranslation)(),y="col-12 col-lg-6 col-xl-4",{isExpanded:C,resources:N}=e;return o.default.createElement("div",{className:"default-box default-box-1-padding mb-2 manage-resources-item"},o.default.createElement("div",{className:"manage-resources-item-header"},o.default.createElement("div",{className:"resource-name"},t.name),o.default.createElement(s.ResourceStatusEdit,Object.assign({},e)),o.default.createElement("div",{className:"resource-actions"},o.default.createElement("div",{className:"d-none d-sm-block"},o.default.createElement("button",{className:"btn btn-link btn-icon",title:r("Copy"),onClick:()=>e.onCopyToggle()},o.default.createElement("i",{className:"bi-files"})),o.default.createElement("a",{className:"btn btn-link btn-icon",title:r("PrintQRCode"),href:`${l.path}/admin/resources/index.php?action=printQR&rid=${t.publicId}`,target:"_blank",rel:"noreferrer"},o.default.createElement("i",{className:"bi-upc-scan"})),o.default.createElement("button",{className:"btn btn-link btn-icon",title:r("Delete"),onClick:()=>e.onDeleteToggle()},o.default.createElement("i",{className:"bi-trash delete icon"})),C&&o.default.createElement("button",{className:"btn btn-link btn-icon",title:r("Collapse"),onClick:()=>e.onExpandToggle()},o.default.createElement("i",{className:"bi-arrows-collapse"})),!C&&o.default.createElement("button",{className:"btn btn-link btn-icon",title:r("Expand"),onClick:()=>e.onExpandToggle()},o.default.createElement("i",{className:"bi-arrows-expand"}))),o.default.createElement("div",{className:"d-block d-sm-none"},o.default.createElement("div",{className:"dropdown"},o.default.createElement("button",{className:"btn btn-outline-secondary dropdown-toggle",type:"button",id:`dropdownMenuButton${t.id}`,"data-bs-toggle":"dropdown","aria-expanded":"false"},o.default.createElement("i",{className:"bi-three-dots-vertical",style:{fontSize:"1rem"}})),o.default.createElement("ul",{className:"dropdown-menu","aria-labelledby":`dropdownMenuButton${t.id}`},o.default.createElement("li",null,o.default.createElement("button",{className:"btn btn-link dropdown-item",onClick:()=>e.onCopyToggle()},o.default.createElement("i",{className:"bi-files"})," ",r("Copy"))),o.default.createElement("li",null,o.default.createElement("button",{className:"btn btn-link dropdown-item",onClick:()=>e.onDeleteToggle()},o.default.createElement("i",{className:"bi-trash delete icon"})," ",r("Delete"))),C&&o.default.createElement("button",{className:"btn btn-link dropdown-item",onClick:()=>e.onExpandToggle()},o.default.createElement("i",{className:"bi-arrows-collapse"})," ",r("Collapse")),!C&&o.default.createElement("button",{className:"btn btn-link dropdown-item",onClick:()=>e.onExpandToggle()},o.default.createElement("i",{className:"bi-arrows-expand"})," ",r("Expand"))))))),C&&o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:y},o.default.createElement(f.ResourceDisplaySection,{resource:t})),o.default.createElement("div",{className:y},o.default.createElement(u.ResourceCommonSection,{resource:t})),o.default.createElement("div",{className:y},o.default.createElement(v.ResourcePermissionsSection,{resource:t})),o.default.createElement("div",{className:y},o.default.createElement(d.ResourceDurationSection,{resource:t})),o.default.createElement("div",{className:y},o.default.createElement(c.ResourceAccessSection,{resource:t})),o.default.createElement("div",{className:y},o.default.createElement(p.ResourceCreditsSection,{resource:t})),o.default.createElement("div",{className:y},o.default.createElement(h.ResourceRelationshipsSection,{resource:t,resources:N})),o.default.createElement("div",{className:y},o.default.createElement(b.ResourceGroupsSection,{resource:t,resourceGroups:a}))),o.default.createElement(g.ResourceAttributesSection,{resource:t,attributes:n,editClassName:y}),o.default.createElement(m.ResourceImages,{resource:t})))}},33070:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageResourcesComponent=t.useManageResources=void 0;const o=r(a(67294)),i=a(81468),s=a(96027),u=a(83231),c=a(28193),d=a(20826),m=a(56050);function f(e){return{allResources:(0,o.useMemo)((()=>(0,u.getAdminResourceViews)(e)),[e.resourceGroups,e.resources,e.statuses,e.schedules,e.types,e.groups,e.attributes]),attributes:(0,o.useMemo)((()=>(0,u.getAttributeViews)(e)),[e.attributes]),schedules:(0,o.useMemo)((()=>(0,u.getScheduleViews)(e)),[e.schedules]),resourceStatuses:(0,o.useMemo)((()=>(0,u.getResourceStatusViews)(e)),[e.statuses]),resourceGroups:(0,o.useMemo)((()=>(0,u.getResourceGroupViews)(e)),[e.resourceGroups]),resourceTypes:(0,o.useMemo)((()=>(0,u.getResourceTypeViews)(e)),[e.types]),filter:e.filter,onFilterChanged:e.onFilterChanged}}t.useManageResources=f,t.ManageResourcesComponent=function(){const e=(0,o.useContext)(s.ManageResourcesContext),{resourceTypes:t,allResources:a,attributes:n,resourceStatuses:l,schedules:r,resourceGroups:u,filter:p}=f(e);return 0===a.length&&e.isLoading?o.default.createElement(c.Spinner,null):0!==a.length||e.isLoading?o.default.createElement("div",null,o.default.createElement(d.ManageResourcesFilter,{filter:p,resources:a,attributes:n,schedules:r,resourceStatuses:l,resourceTypes:t}),o.default.createElement(m.PageableResourceList,{allResources:a,attributes:n,resourceGroups:u})):o.default.createElement("div",{className:"no-resources-instructions"},o.default.createElement(i.Trans,{i18nKey:"NoResourcesInstructions",values:{resourceLink:"https://www.bookedscheduler.com/help/administration/resources/",gettingStartedLink:"https://www.bookedscheduler.com/help/getting-started/"},components:{br:o.default.createElement("br",null),a:o.default.createElement("a",null)}}))}},20826:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageResourcesFilter=void 0;const i=r(a(67294)),s=a(81468),u=o(a(23157)),c=a(83231),d=a(96027),m=a(81927),f=a(61630),p=a(12907),h=a(51073),b=a(68960);t.ManageResourcesFilter=function(e){const{t}=(0,s.useTranslation)(),a=(0,i.useContext)(d.ManageResourcesContext),n=(0,i.useContext)(h.AppSettingsContext),{filter:l,attributes:r,resources:o,schedules:g,resourceStatuses:v,resourceTypes:E}=e,[y,C]=(0,i.useState)((0,f.getUISettings)().resourceFilterShown),[N,O]=(0,i.useState)(l.resourceIds||[]),[S,_]=(0,i.useState)(l.scheduleIds||[]),[k,R]=(0,i.useState)(l.resourceTypeIds||[]),[A,M]=(0,i.useState)(l.resourceStatusIds||[]),[w,x]=(0,i.useState)(),[P,I]=(0,i.useState)(),[D,T]=(0,i.useState)(),[j,U]=(0,i.useState)(),[F,L]=(0,i.useState)(l.customAttributeFilters),[V,B]=(0,i.useState)(!1),[q,H]=(0,i.useState)(""),G=[{label:t("Yes"),value:!0},{label:t("No"),value:!1}],$="col-xs-12 col-sm-6 col-md-3 mb-1";let Q="";return(l.resourceIds.length>0||void 0!==l.resourceName||""!==l.resourceName||l.scheduleIds.length>0||l.resourceTypeIds.length>0||l.resourceStatusIds.length>0||void 0!==l.allowConcurrent||void 0!==l.automaticPermissions||void 0!==l.requiresApproval||void 0!==l.requiresCheckin||l.customAttributeFilters.some((e=>e.value.length>0)))&&(Q="btn-results-filtered"),(0,i.useEffect)((()=>{O(l.resourceIds),H(l.resourceName||""),_(l.scheduleIds),R(l.resourceTypeIds),M(l.resourceStatusIds),U(l.allowConcurrent),I(l.requiresCheckin),T(l.requiresApproval),x(l.automaticPermissions),L(l.customAttributeFilters)}),[l]),i.default.createElement("div",{id:"manage-resources-filter",className:"default-box default-box-1-padding mb-2"},i.default.createElement("div",{className:"default-box-header"},i.default.createElement("span",null,t("Filter")),i.default.createElement("button",{className:"btn btn-link",onClick:()=>function(){const e=!y;C(e),(0,f.persistUISettings)({resourceFilterShown:e})}()},y&&i.default.createElement("span",{className:"bi bi-chevron-down"}),!y&&i.default.createElement("span",{className:"bi bi-chevron-up"}))),y&&i.default.createElement("form",{noValidate:!0,onSubmit:e=>{e.preventDefault(),a.onFilterChanged(Object.assign(Object.assign({},l),{scheduleIds:S,resourceIds:V?[]:N,resourceName:V&&q?q.trim():void 0,resourceStatusIds:A,resourceTypeIds:k,allowConcurrent:j,requiresCheckin:P,requiresApproval:D,automaticPermissions:w,customAttributeFilters:F.filter((e=>e.value.length>0&&""!==e.value[0].trim()||e.comparison===b.ComparisonType.Empty))}))}},i.default.createElement("div",{className:"default-box-content margin-bottom-15"},i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:$},i.default.createElement("div",{className:"d-flex justify-content-between"},i.default.createElement("label",{htmlFor:"filter-resource-name",className:"form-label"},t("Name")),i.default.createElement("div",{className:"form-check-inline ms-3"},i.default.createElement("input",{type:"checkbox",checked:V,id:"filter-partial-match",className:"form-check-input",onChange:e=>B(e.target.checked)}),i.default.createElement("label",{htmlFor:"filter-partial-match",className:"form-check-label ms-1"},t("PartialMatch")))),!V&&i.default.createElement(u.default,{id:"filter-resource-name",isClearable:!0,isMulti:!0,options:o,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),value:o.filter((e=>N.includes(e.id))),onChange:e=>{O(e.map((e=>e.id)))},placeholder:t("All")}),V&&i.default.createElement("input",{type:"text",id:"filter-resource-name",placeholder:t("All"),value:q,className:"form-control",onChange:e=>{return t=e.target.value,void H(t);var t}})),i.default.createElement("div",{className:$},i.default.createElement("label",{className:"form-label",htmlFor:"filter-schedule"},t("Schedule")),i.default.createElement(u.default,{id:"filter-schedule",isClearable:!0,isMulti:!0,options:g,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),value:g.filter((e=>S.includes(e.id))),onChange:e=>{_(e.map((e=>e.id)))},placeholder:t("All")})),i.default.createElement("div",{className:$},i.default.createElement("label",{className:"form-label",htmlFor:"filter-resource-type"},t("ResourceType")),i.default.createElement(u.default,{id:"filter-resource-type",isClearable:!0,isMulti:!0,options:E,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),value:E.filter((e=>k.includes(e.id))),onChange:e=>{R(e.map((e=>e.id)))},placeholder:t("All")})),i.default.createElement("div",{className:$},i.default.createElement("label",{className:"form-label",htmlFor:"filter-resource-status"},t("ResourceStatus")),i.default.createElement(u.default,{id:"filter-resource-status",isClearable:!0,isMulti:!0,options:v,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),value:v.filter((e=>A.includes(e.id))),onChange:e=>{M(e.map((e=>e.id)))},placeholder:t("All")}))),i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:$},i.default.createElement("label",{htmlFor:"filter-resource-checkin",className:"form-label"},(0,p.removeStrong)(t("RequiresCheckInNotification"))),i.default.createElement(u.default,{id:"filter-resource-checkin",isClearable:!0,isMulti:!1,options:G,getOptionLabel:e=>e.label,getOptionValue:e=>e.value.toString(),value:G.filter((e=>e.value===P)),onChange:e=>{return t=null==e?void 0:e.value,void I(t);var t},placeholder:t("All")})),i.default.createElement("div",{className:$},i.default.createElement("label",{htmlFor:"filter-resource-approval",className:"form-label"},(0,p.removeStrong)(t("RequiresApproval"))),i.default.createElement(u.default,{id:"filter-resource-approval",isClearable:!0,isMulti:!1,options:G,getOptionLabel:e=>e.label,getOptionValue:e=>e.value.toString(),value:G.filter((e=>e.value===D)),onChange:e=>{return t=null==e?void 0:e.value,void T(t);var t},placeholder:t("All")})),i.default.createElement("div",{className:$},i.default.createElement("label",{htmlFor:"filter-resource-concurrent",className:"form-label"},(0,p.removeStrong)(t("AllowConcurrentReservationsLabel"))),i.default.createElement(u.default,{id:"filter-resource-concurrent",isClearable:!0,isMulti:!1,options:G,getOptionLabel:e=>e.label,getOptionValue:e=>e.value.toString(),value:G.filter((e=>e.value===j)),onChange:e=>{return t=null==e?void 0:e.value,void U(t);var t},placeholder:t("All")})),i.default.createElement("div",{className:$},i.default.createElement("label",{htmlFor:"filter-resource-permission",className:"form-label"},(0,p.removeStrong)(t("ResourcePermissionAutoGranted"))),i.default.createElement(u.default,{id:"filter-resource-permission",isClearable:!0,isMulti:!1,options:G,getOptionLabel:e=>e.label,getOptionValue:e=>e.value.toString(),value:G.filter((e=>e.value===w)),onChange:e=>{return t=null==e?void 0:e.value,void x(t);var t},placeholder:t("All")}))),i.default.createElement("div",{className:"row"},r.filter((e=>0===e.entityIds.length)).map((e=>{const t=F.find((t=>t.id===e.id));return i.default.createElement("div",{key:e.id,className:$},i.default.createElement(m.CustomAttributeSearch,{onChange:t=>function(e,t){const a=F.filter((t=>t.id!==e));let n=F.find((t=>t.id===e));n?n.value=t||[""]:n={id:e,value:t||[""],comparison:b.ComparisonType.Equals},a.push(n),L(a)}(e.id,t),attribute:e,value:(null==t?void 0:t.value)||[""],comparison:(null==t?void 0:t.comparison)||b.ComparisonType.Equals,onComparisonChanged:t=>function(e,t){const a=F.filter((t=>t.id!==e));let n=F.find((t=>t.id===e));n?n.comparison=t:n={id:e,value:[""],comparison:t},a.push(n),L(a)}(e.id,t),dateTimeFormat:n.dateTimeFormat,lang:n.lang}))})))),i.default.createElement("div",{className:"default-box-footer align-right"},i.default.createElement("button",{type:"button",className:`btn btn-clear ${Q}`,onClick:()=>{a.onFilterChanged((0,c.getDefaultResourceFilter)())}},t("ClearFilter")),i.default.createElement("button",{type:"submit",className:"btn btn-primary"},t("Filter")))))}},33041:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageResourcesHeader=void 0;const o=r(a(67294)),i=a(81468),s=a(15127),u=a(95062),c=a(88554),d=a(91308);t.ManageResourcesHeader=function(){const{t:e}=(0,i.useTranslation)(),{hash:t,isRootHash:a}=(0,c.useHashChange)(),[n,l]=(0,o.useState)(!1),[r,m]=(0,o.useState)(!1);return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{id:"manage-resources-header",className:"admin-page-header"},o.default.createElement("div",{className:"admin-page-header-title"},o.default.createElement("h1",null,e("ManageResources"))),o.default.createElement("div",{className:"admin-page-header-actions"},a&&o.default.createElement("div",null,o.default.createElement("a",{href:s.NavigationPaths.Add,className:"btn admin-action-button"},o.default.createElement("span",{className:"d-none d-sm-block"},e("AddResource")," ",o.default.createElement("i",{className:"bi bi-plus-circle"})),o.default.createElement("span",{className:"d-block d-sm-none"},o.default.createElement("i",{className:"bi bi-plus-circle"})))),o.default.createElement("div",{className:"dropdown"},o.default.createElement("button",{className:"btn btn-light",type:"button",id:"manage-resources-extras","data-bs-toggle":"dropdown","aria-expanded":"false"},o.default.createElement("i",{className:"bi-list"})),o.default.createElement("ul",{className:"dropdown-menu","aria-labelledby":"manage-resources-extras"},o.default.createElement("li",null,o.default.createElement("a",{href:s.NavigationPaths.Home,className:"dropdown-item"},e("ManageResources"))),o.default.createElement("li",null,o.default.createElement("a",{href:s.NavigationPaths.Types,className:"dropdown-item"},e("ManageResourceTypes"))),o.default.createElement("li",null,o.default.createElement("a",{href:s.NavigationPaths.Groups,className:"dropdown-item"},e("ManageResourceGroups"))),o.default.createElement("li",null,o.default.createElement("a",{href:s.NavigationPaths.Statuses,className:"dropdown-item"},e("ManageResourceStatus"))),t===s.NavigationPaths.Home&&o.default.createElement(o.default.Fragment,null,o.default.createElement("li",{className:"dropdown-divider"}),o.default.createElement("li",null,o.default.createElement("button",{className:"dropdown-item",onClick:()=>m(!0)},e("ImportResources"))),o.default.createElement("li",null,o.default.createElement("button",{className:"dropdown-item",onClick:()=>l(!0)},e("ExportResources")))))))),o.default.createElement(u.ExportResourcesModal,{isOpen:n,onToggle:()=>l(!n)}),o.default.createElement(d.ImportResourcesModal,{isOpen:r,onToggle:()=>m(!r)}))}},56050:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PageableResourceList=t.useBulkUpdateResources=t.usePageableResourceList=t.ResourceCopyModal=void 0;const i=r(a(67294)),s=a(81468),u=a(96027),c=a(34094),d=a(56036),m=a(83231),f=a(74638),p=a(61630),h=a(41773),b=a(28193),g=a(60519),v=a(50208),E=a(68442),y=a(58967);function C(e){const{t}=(0,s.useTranslation)(),{resourceToCopy:a,isLoading:n,onToggle:l}=e,[r,o]=(0,i.useState)("");return(0,i.useEffect)((()=>{o(a?`${a.name} (copy)`:"")}),[a]),i.default.createElement(h.Modal,{title:t("CopyResource",{itemName:null==a?void 0:a.name}),isOpen:void 0!==a,onToggle:l},i.default.createElement("form",{onSubmit:t=>{t.preventDefault(),e.onResourceCopied(a,r)}},i.default.createElement(h.ModalBody,null,i.default.createElement("div",null,i.default.createElement("label",{className:"form-label",htmlFor:"resource-copy-name"},t("Name")),i.default.createElement("input",{type:"text",required:!0,id:"resource-copy-name",value:r,className:"form-control",autoFocus:!0,onChange:e=>o(e.target.value)}))),i.default.createElement(h.ModalFooter,null,n&&i.default.createElement(b.Spinner,null),!n&&i.default.createElement(i.default.Fragment,null,i.default.createElement(g.CancelButton,{onClick:l}),i.default.createElement(E.SubmitButton,{text:t("CopyResource")})))))}function N(e){const{state:t,allResources:a}=e,n=(0,p.getUISettings)().isResourceListExpanded,[l,r]=(0,i.useState)({pageSize:n?5:50,currentPage:1}),[s,u]=(0,i.useState)([]),[c,d]=(0,i.useState)(n),[h,b]=(0,i.useState)(),[g,v]=(0,i.useState)(),[E,y]=(0,i.useState)(!1),C=(0,i.useRef)(null);function N(){return(0,m.getFilteredResources)(a,t.filter)}const O=(0,i.useMemo)((()=>{const e=N().length,t={totalFiltered:e,totalPages:(0,f.getTotalPages)(e,l)};return t.totalPages<l.currentPage&&r(Object.assign(Object.assign({},l),{currentPage:t.totalPages})),t}),[a,t.filter,l]);return(0,i.useEffect)((()=>{r(Object.assign(Object.assign({},l),{currentPage:1}))}),[t.filter]),{resources:(0,f.getPage)(N(),l),paging:l,totalPages:O.totalPages,totalFiltered:O.totalFiltered,showExpandedView:c,resourceToDelete:h,isLoading:t.isLoading,isDeleteAllOpen:E,resourceToCopy:g,scrollToRef:C,onPageChange:function(e){if(e<=O.totalPages&&(r(Object.assign(Object.assign({},l),{currentPage:e})),C&&C.current)){const e=50,{top:t}=C.current.getBoundingClientRect(),a=t+window.pageYOffset-e;t+e>=0&&t-e<=window.innerHeight||window.scrollTo({top:a,behavior:"smooth"})}},onViewAllPages:function(){r(Object.assign(Object.assign({},l),{currentPage:1,pageSize:a.length}))},onExpandedViewToggled:function(e){d(e),r({pageSize:e?5:50,currentPage:1}),u([]),(0,p.persistUISettings)({isResourceListExpanded:e})},onResourceExpandToggled:function(e){const t=s.find((t=>t.id===e));if(t){const a=s.filter((t=>t.id!==e));a.push({id:e,expanded:!t.expanded}),u(a)}else u([...s,{id:e,expanded:!c}])},isExpanded:function(e){const t=s.find((t=>t.id===e));return t?t.expanded:c},onDeleteToggle:function(e){b(e)},onDeleteAllToggle:function(e){y(e)},onResourceDeleted:function(e){return o(this,void 0,void 0,(function*(){yield t.onResourceDeleted(e.id),b(void 0)}))},onResourceBulkDeleted:function(){return o(this,void 0,void 0,(function*(){yield t.onResourcesDeleted(N().map((e=>e.id))),t.onFilterChanged((0,m.getDefaultResourceFilter)()),y(!1)}))},onCopyToggle:function(e){v(e)},onResourceCopied:function(e,a){return o(this,void 0,void 0,(function*(){yield t.onResourceCopied(e.id,a),v(void 0)}))}}}function O(){const[e,t]=(0,i.useState)(!1);return{isBulkUpdateOpen:e,onToggleBulkUpdate:function(e){t(e)}}}t.ResourceCopyModal=C,t.usePageableResourceList=N,t.useBulkUpdateResources=O,t.PageableResourceList=function(e){const{t}=(0,s.useTranslation)(),a=(0,i.useContext)(u.ManageResourcesContext),{resources:n,showExpandedView:l,totalPages:r,totalFiltered:o,paging:m,resourceToDelete:f,isDeleteAllOpen:p,onPageChange:E,onViewAllPages:S,onExpandedViewToggled:_,onResourceExpandToggled:k,isExpanded:R,isLoading:A,resourceToCopy:M,onDeleteToggle:w,onDeleteAllToggle:x,onCopyToggle:P,onResourceDeleted:I,onResourceBulkDeleted:D,onResourceCopied:T,scrollToRef:j}=N({state:a,allResources:e.allResources}),{isBulkUpdateOpen:U,onToggleBulkUpdate:F}=O();return 0===n.length?i.default.createElement("div",{className:"no-results-admin"},t("NoResultsFound")):i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{ref:j}," "),i.default.createElement(c.Pageable,{pageSize:m.pageSize,currentPage:m.currentPage,totalPages:r,totalItems:o,onPageChange:E,totalItemsLabel:t("Resources"),allowAll:!0,onViewAll:S},i.default.createElement("div",{className:"resource-pageable-actions"},i.default.createElement("button",{className:"btn btn-link btn-icon",title:t("BulkResourceUpdate"),onClick:()=>F(!0)},i.default.createElement("span",{className:"bi-pencil-square edit icon"})),i.default.createElement("button",{className:"btn btn-link btn-icon",title:t("DeleteAll"),onClick:()=>x(!0)},i.default.createElement("span",{className:"bi-trash delete icon"})),l&&i.default.createElement("button",{className:"btn btn-link btn-icon",onClick:()=>_(!1),title:t("ViewAsList")},i.default.createElement("span",{className:"bi-arrows-collapse"})),!l&&i.default.createElement("button",{className:"btn btn-link btn-icon",onClick:()=>_(!0),title:t("ViewDetails")},i.default.createElement("span",{className:"bi-arrows-expand"})))),i.default.createElement("div",{id:"manage-resources-list"},n.map((t=>i.default.createElement(d.ManageResourceItem,{key:t.id,resource:t,resources:e.allResources,attributes:e.attributes,resourceGroups:e.resourceGroups,onExpandToggle:()=>k(t.id),isExpanded:R(t.id),onDeleteToggle:()=>w(t),onCopyToggle:()=>P(t)})))),i.default.createElement(c.Pageable,{pageSize:m.pageSize,currentPage:m.currentPage,totalPages:r,totalItems:o,onPageChange:E,totalItemsLabel:t("Resources"),allowAll:!0,allText:t("ViewAll"),onViewAll:S}),i.default.createElement(h.Modal,{title:t("DeleteItemModalTitle",{itemName:null==f?void 0:f.name}),isOpen:void 0!==f,onToggle:()=>w(void 0)},i.default.createElement(h.ModalBody,null,i.default.createElement("div",{className:"alert alert-warning"},t("DeleteResourceWarning"),i.default.createElement("ul",null,i.default.createElement("li",null,t("DeleteResourceWarningReservations")),i.default.createElement("li",null," ",t("DeleteResourceWarningPermissions")))),i.default.createElement("div",null,t("DeleteResourceWarningReassign"))),i.default.createElement(h.ModalFooter,null,A&&i.default.createElement(b.Spinner,null),!A&&i.default.createElement(i.default.Fragment,null,i.default.createElement(g.CancelButton,{onClick:()=>w(void 0)}),i.default.createElement(v.DeleteButton,{onClick:()=>I(f)})))),i.default.createElement(h.Modal,{title:t("DeleteMultipleModalTitle",{count:o}),isOpen:p,onToggle:()=>x(!1)},i.default.createElement(h.ModalBody,null,i.default.createElement("div",{className:"alert alert-warning"},t("DeleteMultipleResourcesWarning"),i.default.createElement("ul",null,i.default.createElement("li",null,t("DeleteResourceWarningReservations")),i.default.createElement("li",null," ",t("DeleteResourceWarningPermissions")))),i.default.createElement("div",null,t("DeleteResourceWarningReassign"))),i.default.createElement(h.ModalFooter,null,A&&i.default.createElement(b.Spinner,null),!A&&i.default.createElement(i.default.Fragment,null,i.default.createElement(g.CancelButton,{onClick:()=>x(!1)}),i.default.createElement(v.DeleteButton,{onClick:()=>D(),text:`${t("Delete")} (${o})`})))),i.default.createElement(C,{resourceToCopy:M,isLoading:A,onToggle:()=>P(void 0),onResourceCopied:T}),i.default.createElement(y.ResourceBulkUpdateModal,{onToggle:()=>F(!1),isOpen:U,attributes:e.attributes,filteredResourceIds:n.map((e=>e.id)),onUpdateCompleted:()=>F(!1)}))}},12774:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceAccessBulkEditSection=t.ResourceAccessSection=t.useResourceAccessEdit=void 0;const i=r(a(67294)),s=a(81468),u=a(38813),c=a(90416),d=a(69989),m=a(96027),f=a(29575);function p(e){const{resource:t,state:a}=e,[n,l]=(0,i.useState)(!t.noticeAdd),[r,s]=(0,i.useState)(!t.noticeUpdate),[u,c]=(0,i.useState)(!t.noticeDelete),[m,f]=(0,i.useState)(!t.noticeEnd),[p,h]=(0,i.useState)(t.allowConcurrent),[b,g]=(0,i.useState)(t.requiresApproval),[v,E]=(0,i.useState)(t.autoReleaseMinutes||0),[y,C]=(0,i.useState)(t.autoReleaseAction||d.ResourceReleaseAction.Delete),[N,O]=(0,i.useState)(null!==t.autoReleaseMinutes),[S,_]=(0,i.useState)(t.requiresCheckin),[k,R]=(0,i.useState)(t.enableAutoExtend),[A,M]=(0,i.useState)(t.checkinLimitedToAdmins),[w,x]=(0,i.useState)(t.maxConcurrent),[P,I]=(0,i.useState)(t.noticeAdd),[D,T]=(0,i.useState)(t.noticeUpdate),[j,U]=(0,i.useState)(t.noticeDelete),[F,L]=(0,i.useState)(t.noticeEnd);return{isSaving:a.isLoading,isNoticeAddNone:n,isNoticeUpdateNone:r,isNoticeDeleteNone:u,isNoticeMaxNone:m,isAutoReleaseEnabled:N,isAllowConcurrentEnabled:p,autoReleaseMinutes:v,autoReleaseAction:y,isCheckinEnabled:S,isAutoExtend:k,isCheckinLimitedToAdmins:A,onIsNoticeAddNone:l,onIsNoticeUpdateNone:s,onIsNoticeDeleteNone:c,onIsNoticeMaxNone:f,onCheckinChanged:e=>{_(e),e||(O(!1),R(!1),M(!1))},onExtendChanged:e=>{R(e),e||R(!1)},onAllowConcurrentChanged:h,onApprovalChanged:g,onAutoReleaseMinutesChanged(e){E(Number.parseInt(e))},onConcurrentChanged(e){x(Number.parseInt(e))},onAutoReleaseChanged:O,onNoticeAddUpdated:I,onNoticeUpdateUpdated:T,onNoticeDeleteUpdated:U,onNoticeMaxUpdated:L,onResourceUpdated:function(){return o(this,void 0,void 0,(function*(){const e={id:t.id,allowConcurrent:p,maxConcurrent:p?Math.max(w||1,2):null,noticeAdd:n?null:P,noticeUpdate:r?null:D,noticeDelete:u?null:j,noticeEnd:m?null:F,autoReleaseMinutes:S&&N?v:null,requiresCheckin:S,requiresApproval:b,enableAutoExtend:k,checkinLimitedToAdmins:A,autoReleaseAction:S&&N?y:null};yield a.onAccessUpdated(e)}))},onLimitedToAdminChanged:M,onAutoReleaseActionChanged(e){C(e)}}}function h(e){const{t}=(0,s.useTranslation)(),{isNoticeAddNone:a,isNoticeUpdateNone:n,isNoticeDeleteNone:l,isNoticeMaxNone:r,defaultNoticeAdd:o,defaultNoticeUpdate:u,defaultNoticeDelete:m,defaultNoticeEnd:p,isAllowConcurrentEnabled:h,defaultMaxConcurrent:b,autoReleaseMinutes:g,autoReleaseAction:v,isCheckinEnabled:E,isAutoExtend:y,isAutoReleaseEnabled:C,isCheckinLimitedToAdmins:N,defaultRequiresApproval:O,onIsNoticeAddNone:S,onNoticeAddUpdated:_,onIsNoticeUpdateNone:k,onNoticeUpdateUpdated:R,onNoticeDeleteUpdated:A,onIsNoticeDeleteNone:M,onIsNoticeMaxNone:w,onNoticeMaxUpdated:x,onApprovalChanged:P,onAutoReleaseMinutesChanged:I,onAutoReleaseActionChanged:D,onAutoReleaseChanged:T,onAllowConcurrentChanged:j,onCheckinChanged:U,onConcurrentChanged:F,onExtendChanged:L,onLimitedToAdminChanged:V,unchangedHandler:B}=e,q=B||(0,f.useNullBulkUpdateUnchangedHandlerHook)(),H=q.isUnchanged;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"mt-3"},i.default.createElement(f.UnchangedCheckbox,{field:"noticeAdd",unchangedHandler:q}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"notice-add-chk",onChange:e=>S(e.target.checked),defaultChecked:a,disabled:H("noticeAdd")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"notice-add-chk"},i.default.createElement(s.Trans,{i18nKey:"ResourceMinNoticeNone"}))),!a&&i.default.createElement("div",{className:"ms-4"},i.default.createElement(c.TimeIntervalEdit,{interval:o,onUpdated:e=>_(e),disabled:H("noticeAdd")}),i.default.createElement(s.Trans,{i18nKey:"ResourceAdvanceNoticeCreate"}))),i.default.createElement("div",{className:"mt-3"},i.default.createElement(f.UnchangedCheckbox,{field:"noticeUpdate",unchangedHandler:q}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"notice-update-chk",onChange:e=>k(e.target.checked),defaultChecked:n,disabled:H("noticeUpdate")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"notice-update-chk"},i.default.createElement(s.Trans,{i18nKey:"ResourceMinNoticeNoneUpdate"}))),!n&&i.default.createElement("div",{className:"ms-4"},i.default.createElement(c.TimeIntervalEdit,{interval:u,onUpdated:R,disabled:H("noticeUpdate")}),i.default.createElement(s.Trans,{i18nKey:"ResourceAdvanceNoticeUpdate"}))),i.default.createElement("div",{className:"mt-3"},i.default.createElement(f.UnchangedCheckbox,{field:"noticeDelete",unchangedHandler:q}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"notice-delete-chk",onChange:e=>M(e.target.checked),defaultChecked:l,disabled:H("noticeDelete")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"notice-delete-chk"},i.default.createElement(s.Trans,{i18nKey:"ResourceMinNoticeNoneDelete"}))),!l&&i.default.createElement("div",{className:"ms-4"},i.default.createElement(c.TimeIntervalEdit,{interval:m,onUpdated:A,disabled:H("noticeDelete")}),i.default.createElement(s.Trans,{i18nKey:"ResourceAdvanceNoticeDelete"}))),i.default.createElement("div",{className:"mt-3"},i.default.createElement(f.UnchangedCheckbox,{field:"noticeEnd",unchangedHandler:q}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"notice-max-chk",onChange:e=>w(e.target.checked),defaultChecked:r,disabled:H("noticeEnd")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"notice-max-chk"},i.default.createElement(s.Trans,{i18nKey:"ResourceMaxNoticeNone"}))),!r&&i.default.createElement("div",{className:"ms-4"},i.default.createElement(c.TimeIntervalEdit,{interval:p,onUpdated:x,disabled:H("noticeEnd")}),i.default.createElement(s.Trans,{i18nKey:"ResourceMaxNoticeEnd"}))),i.default.createElement("div",{className:"mt-3"},i.default.createElement(f.UnchangedCheckbox,{field:"requiresApproval",unchangedHandler:q}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"requires-approval-chk",onChange:e=>P(e.target.checked),defaultChecked:O,disabled:H("requiresApproval")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"requires-approval-chk"},i.default.createElement(s.Trans,{i18nKey:"ResourceRequiresApproval"})))),i.default.createElement("div",{className:"mt-3"},i.default.createElement(f.UnchangedCheckbox,{field:"requiresCheckin",unchangedHandler:q}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"requires-checkin-chk",onChange:e=>U(e.target.checked),defaultChecked:E,disabled:H("requiresCheckin")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"requires-checkin-chk"},i.default.createElement(s.Trans,{i18nKey:"RequiresCheckInNotification"}))),E&&i.default.createElement("div",{className:"form-check ms-4"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"autorelease-chk",onChange:e=>T(e.target.checked),defaultChecked:C,disabled:H("requiresCheckin")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"autorelease-chk"},i.default.createElement(s.Trans,{i18nKey:"AutoReleaseNotification",values:{s1:g}}))),C&&i.default.createElement("div",null,i.default.createElement("div",{className:"ms-4"},i.default.createElement("label",{htmlFor:"auto-release-minutes",className:"visually-hidden form-label"},t("ReleasedIn")),i.default.createElement("input",{id:"auto-release-minutes",type:"number",min:0,defaultValue:g||void 0,onChange:e=>I(e.target.value),className:"form-control",disabled:H("requiresCheckin")})),i.default.createElement("div",{className:"ms-4 mt-2 mb-2"},i.default.createElement("label",{htmlFor:"auto-release-action",className:"visually-hidden form-label"},t("ReleaseAction")),i.default.createElement("div",{className:"d-flex align-items-center"},i.default.createElement("select",{id:"auto-release-action",defaultValue:v||void 0,onChange:e=>D(Number.parseInt(e.target.value)),className:"form-select w-auto me-3",disabled:H("requiresCheckin")},i.default.createElement("option",{value:d.ResourceReleaseAction.Delete},t("Delete")),i.default.createElement("option",{value:d.ResourceReleaseAction.End},t("End"))),i.default.createElement("div",null,t("ReleasedReservations"))))),E&&i.default.createElement("div",{className:"form-check ms-4"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"extend-chk",onChange:e=>L(e.target.checked),defaultChecked:y,disabled:H("requiresCheckin")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"extend-chk"},i.default.createElement(s.Trans,{i18nKey:"ReservationsAutomaticallyExtended"}))),E&&i.default.createElement("div",{className:"form-check ms-4"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"checkin-admin-only-chk",onChange:e=>V(e.target.checked),defaultChecked:N,disabled:H("requiresCheckin")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"checkin-admin-only-chk"},i.default.createElement(s.Trans,{i18nKey:"ReservationsCheckinLimitedToAdmin"})))),i.default.createElement("div",{className:"mt-3"},i.default.createElement(f.UnchangedCheckbox,{field:"allowConcurrent",unchangedHandler:q}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"concurrent-chk",onChange:e=>j(e.target.checked),defaultChecked:h,disabled:H("allowConcurrent")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"concurrent-chk"},i.default.createElement(s.Trans,{i18nKey:"AllowConcurrentReservationsLabel"}))),h&&i.default.createElement("div",{className:"input-group ms-4 auto-width"},i.default.createElement("input",{className:"form-control",type:"number",min:2,defaultValue:b?Math.max(b,2):void 0,onChange:e=>F(e.target.value),id:"max-concurrent-txt","aria-label":t("Reservations"),disabled:H("allowConcurrent")}),i.default.createElement("span",{className:"input-group-text"},t("Reservations")))))}function b(e){const{resource:t,onIsEditing:a}=e,{t:n}=(0,s.useTranslation)(),{isSaving:l,isNoticeAddNone:r,isNoticeUpdateNone:o,isNoticeDeleteNone:c,isNoticeMaxNone:d,onIsNoticeAddNone:f,onIsNoticeUpdateNone:b,isAllowConcurrentEnabled:g,isAutoReleaseEnabled:v,isCheckinEnabled:E,isAutoExtend:y,isCheckinLimitedToAdmins:C,autoReleaseMinutes:N,autoReleaseAction:O,onIsNoticeDeleteNone:S,onIsNoticeMaxNone:_,onCheckinChanged:k,onAllowConcurrentChanged:R,onApprovalChanged:A,onAutoReleaseMinutesChanged:M,onAutoReleaseActionChanged:w,onAutoReleaseChanged:x,onConcurrentChanged:P,onNoticeAddUpdated:I,onNoticeUpdateUpdated:D,onNoticeDeleteUpdated:T,onNoticeMaxUpdated:j,onResourceUpdated:U,onExtendChanged:F,onLimitedToAdminChanged:L}=p({resource:t,state:(0,i.useContext)(m.ManageResourcesContext)});return i.default.createElement(u.ResourceEditSection,{isEditing:!0,title:n("Access"),setIsEditing:a,onUpdate:U,isLoading:l},i.default.createElement(h,{isNoticeAddNone:r,defaultNoticeAdd:t.noticeAdd,defaultNoticeUpdate:t.noticeUpdate,isNoticeUpdateNone:o,defaultNoticeDelete:t.noticeDelete,isNoticeDeleteNone:c,defaultNoticeEnd:t.noticeEnd,isNoticeMaxNone:d,isAllowConcurrentEnabled:g,isCheckinEnabled:E,isCheckinLimitedToAdmins:C,isAutoExtend:y,isAutoReleaseEnabled:v,defaultRequiresApproval:t.requiresApproval,autoReleaseMinutes:N,autoReleaseAction:O,defaultMaxConcurrent:t.maxConcurrent,onIsNoticeAddNone:f,onNoticeAddUpdated:I,onNoticeUpdateUpdated:D,onNoticeDeleteUpdated:T,onNoticeMaxUpdated:j,onIsNoticeDeleteNone:S,onIsNoticeMaxNone:_,onIsNoticeUpdateNone:b,onAllowConcurrentChanged:R,onApprovalChanged:A,onAutoReleaseChanged:x,onAutoReleaseMinutesChanged:M,onAutoReleaseActionChanged:w,onCheckinChanged:k,onConcurrentChanged:P,onExtendChanged:F,onLimitedToAdminChanged:L}))}t.useResourceAccessEdit=p,t.ResourceAccessSection=function(e){const{resource:t}=e,{t:a}=(0,s.useTranslation)(),[n,l]=(0,i.useState)(!1);function r(e){l(e)}return n?i.default.createElement(b,{resource:t,onIsEditing:r}):i.default.createElement(u.ResourceEditSection,{isEditing:!1,title:a("Access"),setIsEditing:r,isLoading:!1},i.default.createElement(i.default.Fragment,null,i.default.createElement("div",null,!t.noticeAdd&&i.default.createElement(s.Trans,{i18nKey:"ResourceMinNoticeNone"}),t.noticeAdd&&i.default.createElement(i.default.Fragment,null,i.default.createElement("strong",null,i.default.createElement(c.TimeIntervalDisplay,{interval:t.noticeAdd})),a("ResourceAdvanceNoticeCreate"))),i.default.createElement("div",null,!t.noticeUpdate&&i.default.createElement(s.Trans,{i18nKey:"ResourceMinNoticeNoneUpdate"}),t.noticeUpdate&&i.default.createElement(i.default.Fragment,null,i.default.createElement("strong",null,i.default.createElement(c.TimeIntervalDisplay,{interval:t.noticeUpdate})),a("ResourceAdvanceNoticeUpdate"))),i.default.createElement("div",null,!t.noticeDelete&&i.default.createElement(s.Trans,{i18nKey:"ResourceMinNoticeNoneDelete"}),t.noticeDelete&&i.default.createElement(i.default.Fragment,null,i.default.createElement("strong",null,i.default.createElement(c.TimeIntervalDisplay,{interval:t.noticeDelete})),a("ResourceAdvanceNoticeDelete"))),i.default.createElement("div",null,!t.noticeEnd&&i.default.createElement(s.Trans,{i18nKey:"ResourceMaxNoticeNone"}),t.noticeEnd&&i.default.createElement(i.default.Fragment,null,i.default.createElement("strong",null,i.default.createElement(c.TimeIntervalDisplay,{interval:t.noticeEnd})),a("ResourceMaxNoticeEnd"))),i.default.createElement("div",null,!t.requiresApproval&&i.default.createElement(s.Trans,{i18nKey:"ResourceRequiresApprovalNone"}),t.requiresApproval&&i.default.createElement(s.Trans,{i18nKey:"ResourceRequiresApproval"})),i.default.createElement("div",null,!t.requiresCheckin&&i.default.createElement(s.Trans,{i18nKey:"NoCheckInRequiredNotification"}),t.requiresCheckin&&i.default.createElement(s.Trans,{i18nKey:"RequiresCheckInNotification"})),i.default.createElement("div",null,null!==t.autoReleaseMinutes&&t.autoReleaseAction===d.ResourceReleaseAction.Delete&&i.default.createElement(s.Trans,{i18nKey:"AutoReleaseDeleteNotification",values:{s1:t.autoReleaseMinutes}}),null!==t.autoReleaseMinutes&&t.autoReleaseAction===d.ResourceReleaseAction.End&&i.default.createElement(s.Trans,{i18nKey:"AutoReleaseEndNotification",values:{s1:t.autoReleaseMinutes}})),i.default.createElement("div",null,t.enableAutoExtend&&i.default.createElement(s.Trans,{i18nKey:"ReservationsAutomaticallyExtended"})),i.default.createElement("div",null,t.checkinLimitedToAdmins&&i.default.createElement(s.Trans,{i18nKey:"ReservationsCheckinLimitedToAdmin"})),i.default.createElement("div",null,!t.allowConcurrent&&i.default.createElement(s.Trans,{i18nKey:"ResourceConcurrentReservationsNone"}),t.allowConcurrent&&i.default.createElement(s.Trans,{i18nKey:"ResourceConcurrentReservations",values:{s1:t.maxConcurrent}}))))},t.ResourceAccessBulkEditSection=function(e){const{onFieldUpdated:t,onFieldUnchanged:a}=e,[n,l]=(0,i.useState)(!1),[r,o]=(0,i.useState)(!1),[s,u]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),[m,p]=(0,i.useState)(null),[b,g]=(0,i.useState)(null),[v,E]=(0,i.useState)(null),[y,C]=(0,i.useState)(null),[N,O]=(0,i.useState)(0),[S,_]=(0,i.useState)(void 0),[k,R]=(0,i.useState)(!0),[A,M]=(0,i.useState)(!0),[w,x]=(0,i.useState)(!0),[P,I]=(0,i.useState)(!0),[D,T]=(0,i.useState)(!1),[j,U]=(0,i.useState)(null),F=(0,f.useBulkUpdateUnchangedHandlerHooks)({defaultUnchanged:["noticeAdd","noticeUpdate","noticeDelete","noticeEnd","requiresApproval","requiresCheckin","autoReleaseMinutes","autoReleaseAction","enableAutoExtend","checkinLimitedToAdmins","maxConcurrent","allowConcurrent"],onUnchangedToggle:a});return i.default.createElement(h,{isNoticeAddNone:k,isNoticeUpdateNone:A,isNoticeDeleteNone:w,isNoticeMaxNone:P,isAllowConcurrentEnabled:D,isAutoReleaseEnabled:r,isCheckinEnabled:n,isAutoExtend:s,isCheckinLimitedToAdmins:!1,defaultMaxConcurrent:2,autoReleaseMinutes:N,autoReleaseAction:S,onIsNoticeAddNone:function(e){R(e),t(e?{noticeAdd:null}:{noticeAdd:m})},onNoticeAddUpdated:e=>{p(e),t({noticeAdd:e})},onIsNoticeUpdateNone:function(e){M(e),t(e?{noticeUpdate:null}:{noticeUpdate:b})},onIsNoticeDeleteNone:function(e){x(e),t(e?{noticeDelete:null}:{noticeDelete:v})},onIsNoticeMaxNone:function(e){I(e),t(e?{noticeEnd:null}:{noticeEnd:y})},onNoticeUpdateUpdated:e=>{g(e),t({noticeUpdate:e})},onNoticeDeleteUpdated:e=>{E(e),t({noticeDelete:e})},onNoticeMaxUpdated:e=>{C(e),t({noticeEnd:e})},onCheckinChanged:function(e){l(e),e?t({requiresCheckin:e,autoReleaseMinutes:N,enableAutoExtend:s,checkinLimitedToAdmins:c}):(o(!1),u(!1),d(!1),t({requiresCheckin:e,autoReleaseMinutes:0,enableAutoExtend:!1,checkinLimitedToAdmins:!1}))},onAllowConcurrentChanged:e=>{T(e),t({allowConcurrent:e}),t(e?{maxConcurrent:j}:{maxConcurrent:null})},onApprovalChanged:e=>t({requiresApproval:e}),onAutoReleaseMinutesChanged:e=>{const a=e?Number.parseInt(e):0;O(a),t({autoReleaseMinutes:a})},onAutoReleaseChanged:e=>{o(e),t({autoReleaseMinutes:e?N:null})},onAutoReleaseActionChanged:e=>{_(e),t({autoReleaseAction:e?S:null})},onExtendChanged:function(e){t({enableAutoExtend:e}),e||t({enableAutoExtend:!1})},onLimitedToAdminChanged:e=>t({checkinLimitedToAdmins:e}),onConcurrentChanged:e=>{const a=e?Number.parseInt(e):null;U(a),t({maxConcurrent:a})},unchangedHandler:F})}},64105:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceAttributesBulkEditSection=t.ResourceAttributesSection=t.ResourceAttributesEditSection=t.useResourceAttributesEdit=void 0;const o=r(a(67294)),i=a(81468),s=a(38813),u=a(96027),c=a(34297),d=a(78929),m=a(75712),f=a(51073);function p(e){const{resource:t,state:a}=e,[n,l]=(0,o.useState)((null==t?void 0:t.attributeValues)||[]),[r,i]=(0,o.useState)(!1),s=(0,o.useMemo)((()=>e.attributes.filter((e=>0===e.entityIds.length||t&&e.entityIds.includes(t.id)))),[e.attributes]);function u(e){const t=n.find((t=>t.id===e)),a=s.find((t=>t.id===e));return!!a&&(0,m.checkIsAttributeValid)(a,t)}function c(){let e=!0;return s.forEach((t=>{u(t.id)||(e=!1)})),e}return{isLoading:a.isLoading,attributes:s,hasValidationErrors:r,attributeValues:n,isAttributeValid:u,areAllAttributesValid:c,onAttributeValueChanged:function(e,t){const a=n.filter((e=>e.id!==t));a.push({id:t,value:e}),l(a)},onResourceUpdated:function(){if(!t)return Promise.resolve();const e=c();return i(!e),e?a.onAttributesUpdated({id:t.id,attributeValues:n.map((e=>Object.assign(Object.assign({},e),{value:e.value.trim()})))}):Promise.reject()}}}function h(e){const t=(0,o.useContext)(f.AppSettingsContext),{resource:a,onIsEditing:n}=e,{t:l}=(0,i.useTranslation)(),{isLoading:r,hasValidationErrors:d,attributes:m,attributeValues:h,isAttributeValid:b,onAttributeValueChanged:g,onResourceUpdated:v}=p({resource:a,attributes:e.attributes,state:(0,o.useContext)(u.ManageResourcesContext)});return o.default.createElement(s.ResourceEditSection,{isEditing:!0,title:l("Attributes"),setIsEditing:n,isLoading:r,onUpdate:v},o.default.createElement("div",{className:"row attributes-edit-row"},d&&o.default.createElement("span",{className:"custom-attribute-error-summary"},l("CorrectErrorsBelow")),m.map((e=>{var a;return o.default.createElement("div",{key:e.id,className:"col-12 col-lg-6 col-xl-4"},o.default.createElement(c.CustomAttributeEdit,{key:e.id,attribute:e,value:null===(a=h.find((t=>e.id===t.id)))||void 0===a?void 0:a.value,isValid:b(e.id),onChange:t=>g(t||"",e.id),dateTimeFormat:t.dateTimeFormat,firstDayOfWeek:t.firstDayOfWeek,lang:t.lang}))}))))}t.useResourceAttributesEdit=p,t.ResourceAttributesEditSection=h,t.ResourceAttributesSection=function(e){const{resource:t}=e,a=(0,o.useContext)(f.AppSettingsContext),{t:n}=(0,i.useTranslation)(),[l,r]=(0,o.useState)(!1),u=e.attributes.filter((e=>0===e.entityIds.length||e.entityIds.includes(t.id)));function c(e){r(e)}return l?o.default.createElement(h,Object.assign({},e,{onIsEditing:c})):o.default.createElement(s.ResourceEditSection,{isEditing:l,title:n("Attributes"),setIsEditing:c,isLoading:!1},o.default.createElement("div",{className:"attributes-row"},u.map((e=>{var n;return o.default.createElement(d.CustomAttribute,{key:e.id,attribute:e,value:null===(n=t.keyedAttributeValues[e.id])||void 0===n?void 0:n.value,dateTimeFormat:a.dateTimeFormat})}))))},t.ResourceAttributesBulkEditSection=function(e){const{t}=(0,i.useTranslation)(),{attributes:a,attributeValues:n,isAttributeValid:l,onAttributeValueChanged:r,areAllAttributesValid:s}=p({resource:void 0,attributes:e.attributes,state:(0,o.useContext)(u.ManageResourcesContext)}),d=(0,o.useContext)(f.AppSettingsContext),[m,h]=(0,o.useState)(a.map((e=>e.id))),{onAttributeUnchanged:b,onAttributeUpdated:g}=e;function v(e){return m.includes(e)}return o.default.createElement(o.default.Fragment,null,a.map((e=>{var a;return o.default.createElement("div",{key:e.id,className:"mt-3"},o.default.createElement("div",{className:"form-check"},o.default.createElement("label",{htmlFor:`${e.id}-unchanged`},t("Unchanged")),o.default.createElement("input",{id:`${e.id}-unchanged`,className:"form-check-input",type:"checkbox",checked:v(e.id),onChange:t=>{return a=e.id,n=t.target.checked,h(n?[...m,a]:m.filter((e=>e!==a))),void b(a,n);var a,n}})),o.default.createElement(c.CustomAttributeEdit,{key:e.id,attribute:e,value:null===(a=n.find((t=>e.id===t.id)))||void 0===a?void 0:a.value,isValid:l(e.id),onChange:t=>{r(t||"",e.id),l(e.id)&&s()&&g(e.id,t||"")},disabled:v(e.id),dateTimeFormat:d.dateTimeFormat,firstDayOfWeek:d.firstDayOfWeek}))})))}},58967:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceBulkUpdateModal=t.useBulkResourceUpdateHooks=t.BulkResourceUpdateSection=void 0;const i=r(a(67294)),s=a(41773),u=a(28193),c=a(60519),d=a(81468),m=a(97961),f=a(96027),p=a(31679),h=a(51073),b=a(98853),g=a(12774),v=a(64105),E=a(97763),y=a(23873);var C;function N(e){const[t,a]=(0,i.useState)(C.Display),[n,l]=(0,i.useState)(!1),[r,s]=(0,i.useState)({}),[u,c]=(0,i.useState)({}),[d,m]=(0,i.useState)([]),[f,p]=(0,i.useState)([]),[h,b]=(0,i.useState)(!1);return{currentSection:t,isUpdatingAll:n,isSaving:h,resourceUpdateCount:n?e.state.resources.allIds.length:e.filteredResourceIds.length,onSectionChanged:function(e){a(e),s({}),m([])},onToggleUpdateAll:function(e){l(e)},onUpdated:function(){return o(this,void 0,void 0,(function*(){b(!0);const t=e.state.resources.allIds.filter((t=>n||e.filteredResourceIds.includes(t))).map((t=>e.state.resources.byId[t])),a=[];t.forEach((e=>{const t=Object.assign({},e);for(const e in r){const a=r[e];d.includes(e)||(t[e]=a)}for(const e in u){const a=Number.parseInt(e.toString());f.includes(a)||(t.attributeValues=[...t.attributeValues.filter((e=>e.id!==a)),{id:a,value:u[e]}])}a.push(t)})),yield e.state.onResourcesImported(a),e.onUpdateCompleted(),b(!1)}))},onFieldUpdated:function(e){const t=Object.assign({},r);Object.entries(e).forEach((e=>{const a=e[0],n=e[1];t[a]=n})),s(t)},onFieldUnchanged:function(e,t){m(t?[...d,e.toString()]:d.filter((t=>t!==e.toString())))},onAttributeUpdated:function(e,t){const a=Object.assign({},u);a[e]=t,c(a)},onAttributeUnchanged:function(e,t){p(t?[...f,e]:f.filter((t=>t!==e)))}}}!function(e){e[e.Display=0]="Display",e[e.Information=1]="Information",e[e.Duration=2]="Duration",e[e.Access=3]="Access",e[e.Credits=4]="Credits",e[e.Attributes=5]="Attributes"}(C=t.BulkResourceUpdateSection||(t.BulkResourceUpdateSection={})),t.useBulkResourceUpdateHooks=N,t.ResourceBulkUpdateModal=function(e){const{t}=(0,d.useTranslation)(),{isOpen:a,filteredResourceIds:n,attributes:l,onToggle:r,onUpdateCompleted:o}=e,O=(0,i.useContext)(f.ManageResourcesContext),S=(0,i.useContext)(h.AppSettingsContext),_=O.resources.allIds.length,{onAttributeUpdated:k,onUpdated:R,isUpdatingAll:A,isSaving:M,onFieldUpdated:w,onAttributeUnchanged:x,onFieldUnchanged:P,onToggleUpdateAll:I,onSectionChanged:D,currentSection:T,resourceUpdateCount:j}=N({filteredResourceIds:n,state:O,onUpdateCompleted:o});return(0,i.useEffect)((()=>{D(C.Display),I(!1)}),[a]),i.default.createElement(s.Modal,{title:t("BulkResourceUpdate"),isOpen:a,onToggle:r,className:"manage-resources-bulk-update-modal"},i.default.createElement(s.ModalBody,null,i.default.createElement("div",null,i.default.createElement("div",{className:"d-inline-block me-3"},t("ApplyUpdatesTo")),i.default.createElement("div",{className:"form-check form-check-inline"},i.default.createElement("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"bulk-update-filtered-option",checked:!A,onChange:()=>I(!1)}),i.default.createElement("label",{className:"form-check-label",htmlFor:"bulk-update-filtered-option"},t("CurrentlyFilteredResources",{s1:e.filteredResourceIds.length}))),i.default.createElement("div",{className:"form-check form-check-inline"},i.default.createElement("input",{className:"form-check-input",type:"radio",name:"inlineRadioOptions",id:"bulk-update-all-option",checked:A,onChange:()=>I(!0)}),i.default.createElement("label",{className:"form-check-label",htmlFor:"bulk-update-all-option"},t("AllResourcesWithCount",{s1:_})))),i.default.createElement("div",{className:"mt-3 mb-3 form-floating"},i.default.createElement("select",{id:"bulk-update-section",className:"form-select",onChange:e=>D(Number.parseInt(e.target.value)),value:T,"aria-label":t("Section")},i.default.createElement("option",{value:C.Display},t("DisplayInformation")),i.default.createElement("option",{value:C.Information},t("ResourceInformation")),i.default.createElement("option",{value:C.Duration},t("Duration")),i.default.createElement("option",{value:C.Access},t("Access")),S.creditsEnabled&&i.default.createElement("option",{value:C.Credits},t("Credits")),i.default.createElement("option",{value:C.Attributes},t("Attributes"))),i.default.createElement("label",{htmlFor:"bulk-update-section"},t("Section"))),T===C.Information&&i.default.createElement(b.ResourceCommonBulkEditSection,{onFieldUnchanged:P,onFieldUpdated:w}),T===C.Display&&i.default.createElement(E.ResourceDisplayBulkEditSection,{onFieldUnchanged:P,onFieldUpdated:w}),T===C.Duration&&i.default.createElement(y.ResourceDurationBulkEditSection,{onFieldUnchanged:P,onFieldUpdated:w}),T===C.Access&&i.default.createElement(g.ResourceAccessBulkEditSection,{onFieldUnchanged:P,onFieldUpdated:w}),T===C.Credits&&i.default.createElement(p.ResourceCreditsBulkEditSection,{onFieldUnchanged:P,onFieldUpdated:w}),T===C.Attributes&&i.default.createElement(v.ResourceAttributesBulkEditSection,{onAttributeUnchanged:x,onAttributeUpdated:k,attributes:l})),i.default.createElement(s.ModalFooter,null,!M&&i.default.createElement(i.default.Fragment,null,i.default.createElement("div",null,t("BulkUpdateWarning")),i.default.createElement("div",null,i.default.createElement(c.CancelButton,{onClick:r}),i.default.createElement(m.UpdateButton,{onClick:R,text:`${t("Update")} (${j})`}))),M&&i.default.createElement("div",null,i.default.createElement(u.Spinner,null))))}},98853:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceCommonBulkEditSection=t.ResourceCommonSection=t.useResourceCommonEdit=t.ResourceCommonEditFragment=void 0;const s=r(a(67294)),u=i(a(79732)),c=a(81468),d=i(a(27976)),m=a(83231),f=a(96027),p=a(38813),h=a(7445),b=a(12907),g=a(29575);function v(e){const{t}=(0,c.useTranslation)(),{defaultTypeId:a,defaultAdminGroupId:n,defaultCapacity:l,defaultMinParticipants:r,defaultLocation:o,defaultContact:i,defaultDescription:u,defaultNotes:m,types:f,groups:p,isCapacityDisabled:b,isMinParticipantsDisabled:v,isResourceAdminValid:E,onTypeChanged:y,onTypeCreated:C,onAdminChanged:N,onCapacityChanged:O,onMinParticipantsChanged:S,onLocationChanged:_,onContactChanged:k,onDescriptionChanged:R,onNotesChanged:A,onMinParticipantsUnlimitedChanged:M,onCapacityUnlimitedChanged:w,unchangedHandler:x}=e,P=x||(0,g.useNullBulkUpdateUnchangedHandlerHook)();return s.default.createElement("div",null,s.default.createElement("div",{className:"mt-3"},s.default.createElement(g.UnchangedCheckbox,{field:"typeId",unchangedHandler:P}),s.default.createElement("label",{htmlFor:"type-input"},t("ResourceType")),P.enabled&&s.default.createElement("select",{id:"type-input",className:"form-select",defaultValue:a,onChange:e=>y(e.target.value?Number.parseInt(e.target.value):void 0),disabled:P.isUnchanged("typeId")},s.default.createElement("option",{value:""},t("None")),f.map((e=>s.default.createElement("option",{key:e.id,value:e.id},e.name)))),!P.enabled&&s.default.createElement(d.default,{inputId:"type-input",isClearable:!0,defaultValue:f.map((e=>({value:e.id,label:e.name}))).find((e=>e.value===a)),onChange:(e,t)=>{"select-option"!==t.action&&"deselect-option"!==t.action&&"clear"!==t.action||y(null==e?void 0:e.value),"create-option"===t.action&&C(null==e?void 0:e.label)},options:f.map((e=>({value:e.id,label:e.name})))})),s.default.createElement("div",{className:"mt-3"},p.length>0&&s.default.createElement(s.default.Fragment,null,s.default.createElement(g.UnchangedCheckbox,{field:"adminGroupId",unchangedHandler:P}),s.default.createElement("label",{htmlFor:"resource-type-input"},t("ResourceAdministrator")),s.default.createElement("select",{id:"resource-administrator-input",className:"form-select",defaultValue:n||void 0,onChange:e=>N(e.target.value),disabled:P.isUnchanged("adminGroupId")},s.default.createElement("option",{value:""},t("None")),p.map((e=>s.default.createElement("option",{value:e.id,key:e.id},e.name)))),!E&&s.default.createElement("span",{className:"custom-attribute-error"},t("ResourceAdminRequired"))),0===p.length&&s.default.createElement("div",null,s.default.createElement("label",null,t("ResourceAdministrator")),s.default.createElement("div",null,"There are no Resource Administrator groups"))),s.default.createElement("div",{className:"mt-3"},s.default.createElement(g.UnchangedCheckbox,{field:"capacity",unchangedHandler:P}),s.default.createElement("label",{htmlFor:"capacity-input"},t("Capacity")),s.default.createElement("input",{type:"number",min:0,id:"capacity-input",className:"form-control",defaultValue:l||"",onChange:e=>{O((0,h.stringToNumber)(e.target.value))},disabled:b||P.isUnchanged("capacity")}),s.default.createElement("div",{className:"form-check"},s.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"capacity-default-chk",onChange:e=>w(e.target.checked),defaultChecked:b,disabled:P.isUnchanged("capacity")}),s.default.createElement("label",{className:"form-check-label",htmlFor:"capacity-default-chk"},t("Unlimited")))),s.default.createElement("div",{className:"mt-3"},s.default.createElement(g.UnchangedCheckbox,{field:"minParticipants",unchangedHandler:P}),s.default.createElement("label",{htmlFor:"min-participants-input"},t("MinimumParticipants")),s.default.createElement("input",{type:"number",min:0,id:"min-participants-input",className:"form-control",defaultValue:r||"",onChange:e=>{S((0,h.stringToNumber)(e.target.value))},disabled:v||P.isUnchanged("minParticipants")}),s.default.createElement("div",{className:"form-check"},s.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"min-participants-default-chk",onChange:e=>M(e.target.checked),defaultChecked:v,disabled:P.isUnchanged("minParticipants")}),s.default.createElement("label",{className:"form-check-label",htmlFor:"min-participants-default-chk"},t("NoMinimum")))),s.default.createElement("div",{className:"mt-3"},s.default.createElement(g.UnchangedCheckbox,{field:"location",unchangedHandler:P}),s.default.createElement("label",{htmlFor:"location-input"},t("Location")),s.default.createElement("input",{type:"text",maxLength:255,id:"location-input",className:"form-control",defaultValue:o,onChange:e=>_(e.target.value),disabled:P.isUnchanged("location")})),s.default.createElement("div",{className:"mt-3"},s.default.createElement(g.UnchangedCheckbox,{field:"contact",unchangedHandler:P}),s.default.createElement("label",{htmlFor:"contact-input"},t("Contact")),s.default.createElement("input",{type:"text",maxLength:255,id:"contact-input",className:"form-control",defaultValue:i,onChange:e=>k(e.target.value),disabled:P.isUnchanged("contact")})),s.default.createElement("div",{className:"mt-3"},s.default.createElement(g.UnchangedCheckbox,{field:"description",unchangedHandler:P}),s.default.createElement("label",{htmlFor:"description-input"},t("Description")),s.default.createElement("textarea",{id:"description-input",className:"form-control",defaultValue:u,onChange:e=>R(e.target.value),disabled:P.isUnchanged("description")})),s.default.createElement("div",{className:"mt-3"},s.default.createElement(g.UnchangedCheckbox,{field:"notes",unchangedHandler:P}),s.default.createElement("label",{htmlFor:"notes-input"},t("Notes")),s.default.createElement("textarea",{id:"notes-input",className:"form-control",defaultValue:m,onChange:e=>A(e.target.value),disabled:P.isUnchanged("notes")})))}function E(e){const{resource:t,state:a}=e,[n,l]=(0,s.useState)(0===t.capacity||void 0===t.capacity),[r,i]=(0,s.useState)(0===t.minParticipants||void 0===t.minParticipants),[u,c]=(0,s.useState)(t.typeId),[d,f]=(0,s.useState)(""),[p,h]=(0,s.useState)(t.adminGroupId||void 0),[b,g]=(0,s.useState)(t.capacity||void 0),[v,E]=(0,s.useState)(t.minParticipants||void 0),[y,C]=(0,s.useState)(t.location),[N,O]=(0,s.useState)(t.contact),[S,_]=(0,s.useState)(t.description),[k,R]=(0,s.useState)(t.notes);return{types:(0,m.getResourceTypeViews)(a),groups:(0,m.getResourceAdminGroupViews)(a),isCapacityDisabled:n,isMinParticipantsDisabled:r,isLoading:a.isLoading,isResourceAdminValid:void 0!==p||!a.isAdminGroupRequired,isResourceAdminRequired:a.isAdminGroupRequired,onCapacityUnlimitedChanged:function(e){l(e),e&&g(void 0)},onMinParticipantsUnlimitedChanged:function(e){i(e),e&&E(void 0)},onTypeChanged:function(e){c(e),e&&f("")},onTypeCreated:function(e){e?(f(e.trim()),c(void 0)):f("")},onAdminChanged:function(e){h(""===e?void 0:Number.parseInt(e))},onCapacityChanged:function(e){g(e>0?e:void 0)},onMinParticipantsChanged:function(e){E(e>0?e:void 0)},onLocationChanged:function(e){C(e.trim())},onContactChanged:function(e){O(e.trim())},onDescriptionChanged:function(e){_(e.trim())},onNotesChanged:function(e){R(e.trim())},onResourceUpdated:function(){return o(this,void 0,void 0,(function*(){a.isAdminGroupRequired&&void 0===p||(yield a.onCommonUpdated({id:t.id,adminId:p,capacity:b,minParticipants:v,contact:N,description:S,notes:k,location:y,newType:d,typeId:u}))}))}}}function y(e){const{resource:t,onIsEditing:a}=e,{t:n}=(0,c.useTranslation)(),{types:l,groups:r,isCapacityDisabled:o,isMinParticipantsDisabled:i,isLoading:u,isResourceAdminValid:d,isResourceAdminRequired:m,onCapacityUnlimitedChanged:h,onMinParticipantsUnlimitedChanged:b,onTypeChanged:g,onTypeCreated:y,onAdminChanged:C,onCapacityChanged:N,onMinParticipantsChanged:O,onLocationChanged:S,onContactChanged:_,onDescriptionChanged:k,onNotesChanged:R,onResourceUpdated:A}=E({resource:t,state:(0,s.useContext)(f.ManageResourcesContext)});return s.default.createElement(p.ResourceEditSection,{isEditing:!0,title:n("ResourceInformation"),setIsEditing:a,onUpdate:A,isLoading:u},s.default.createElement(v,{types:l,groups:r,onTypeChanged:g,onAdminChanged:C,onCapacityChanged:N,onCapacityUnlimitedChanged:h,onContactChanged:_,onMinParticipantsChanged:O,onMinParticipantsUnlimitedChanged:b,onDescriptionChanged:k,onLocationChanged:S,onNotesChanged:R,onTypeCreated:y,isResourceAdminRequired:m,isCapacityDisabled:o,isResourceAdminValid:d,isMinParticipantsDisabled:i,defaultAdminGroupId:t.adminGroupId,defaultDescription:t.description,defaultCapacity:t.capacity,defaultContact:t.contact,defaultLocation:t.location,defaultMinParticipants:t.minParticipants,defaultNotes:t.notes,defaultTypeId:t.typeId}))}t.ResourceCommonEditFragment=v,t.useResourceCommonEdit=E,t.ResourceCommonSection=function(e){const{resource:t}=e,{t:a}=(0,c.useTranslation)(),[n,l]=(0,s.useState)(!1);function r(e){l(e)}return n?s.default.createElement(y,{resource:t,onIsEditing:r}):s.default.createElement(p.ResourceEditSection,{isEditing:!1,title:a("ResourceInformation"),setIsEditing:r,isLoading:!1},s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("ResourceType")),s.default.createElement("span",{className:"resource-property-value"},t.typeName||a("None"))),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("ResourceAdministrator")),s.default.createElement("span",{className:"resource-property-value"},t.adminGroupName||a("None"))),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("Capacity")),s.default.createElement("span",{className:"resource-property-value"},t.capacity||a("Unlimited"))),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("MinimumParticipants")),s.default.createElement("span",{className:"resource-property-value"},t.minParticipants||a("NoMinimum"))),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("Location")),s.default.createElement("span",{className:"resource-property-value"},t.location?(0,b.linkify)(t.location):a("None"))),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("Contact")),s.default.createElement("span",{className:"resource-property-value"},t.contact?(0,b.linkify)(t.contact):a("None"))),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("Description")),s.default.createElement("span",{className:"resource-property-value"},t.description&&s.default.createElement(u.default,null,t.description),!t.description&&a("None"))),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("Notes")),s.default.createElement("span",{className:"resource-property-value"},t.notes&&s.default.createElement(u.default,null,t.notes),!t.notes&&a("None")))))},t.ResourceCommonBulkEditSection=function(e){const t=(0,s.useContext)(f.ManageResourcesContext),a=(0,g.useBulkUpdateUnchangedHandlerHooks)({defaultUnchanged:["typeId","adminGroupId","capacity","minParticipants","location","contact","description","notes"],onUnchangedToggle:()=>{}}),[n,l]=(0,s.useState)(),[r,o]=(0,s.useState)(),[i,u]=(0,s.useState)(),[c,d]=(0,s.useState)(!0),[p,h]=(0,s.useState)(!0);return s.default.createElement(v,{types:(0,m.getResourceTypeViews)(t),groups:(0,m.getResourceAdminGroupViews)(t),onTypeChanged:t=>e.onFieldUpdated({typeId:t}),onAdminChanged:function(t){const a=t?Number.parseInt(t):void 0;e.onFieldUpdated({adminGroupId:a}),u(a)},onCapacityChanged:function(t){e.onFieldUpdated({capacity:t}),o(t)},onCapacityUnlimitedChanged:function(t){d(t),t?e.onFieldUpdated({capacity:void 0}):e.onFieldUpdated({capacity:r})},onContactChanged:t=>e.onFieldUpdated({contact:t}),onMinParticipantsChanged:function(t){e.onFieldUpdated({minParticipants:t}),l(t)},onMinParticipantsUnlimitedChanged:function(t){h(t),t?e.onFieldUpdated({minParticipants:void 0}):e.onFieldUpdated({minParticipants:n})},onDescriptionChanged:t=>e.onFieldUpdated({description:t}),onLocationChanged:t=>e.onFieldUpdated({location:t}),onNotesChanged:t=>e.onFieldUpdated({notes:t}),onTypeCreated:()=>{},isResourceAdminRequired:t.isAdminGroupRequired,isCapacityDisabled:c,isResourceAdminValid:void 0!==i||!t.isAdminGroupRequired,isMinParticipantsDisabled:p,unchangedHandler:a,onUnchangedToggle:e.onFieldUnchanged})}},31679:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceCreditsSection=t.ResourceCreditsBulkEditSection=t.ResourceCreditsEditFragment=t.useResourceCreditsEdit=void 0;const i=r(a(67294)),s=a(81468),u=a(38813),c=a(51073),d=a(69989),m=a(96027),f=a(7445),p=a(29575);function h(e){const{resource:t,state:a}=e,[n,l]=(0,i.useState)(t.creditsPeak),[r,s]=(0,i.useState)(t.creditsOffPeak),[u,c]=(0,i.useState)(t.creditsCalculated),[d,m]=(0,i.useState)(t.creditsChargedForBlockedSlots);return{isLoading:a.isLoading,onCreditsChargedForBlockedSlotsChanged:e=>m(e),onOffPeakCreditsChanged:e=>s(e),onPeakCreditsChanged:e=>l(e),onCreditsCalculatedChanged:e=>c(e),onResourceUpdated:function(){return o(this,void 0,void 0,(function*(){return a.onCreditsUpdated({id:t.id,creditsPeak:n,creditsOffPeak:r,creditsCalculated:u,creditsChargedForBlockedSlots:d})}))}}}function b(e){const{t}=(0,s.useTranslation)(),{defaultCreditsOffPeak:a,defaultCreditsPeak:n,defaultCreditsCalculated:l,defaultCreditsChargedForBlockedSlots:r,onOffPeakCreditsChanged:o,onPeakCreditsChanged:u,onCreditsCalculatedChanged:c,onCreditsChargedForBlockedSlotsChanged:m}=e,h=e.unchangedHandler||(0,p.useNullBulkUpdateUnchangedHandlerHook)();return i.default.createElement("div",null,i.default.createElement("div",null,i.default.createElement("div",{className:"mt-3"},i.default.createElement(p.UnchangedCheckbox,{field:"creditsOffPeak",unchangedHandler:h}),i.default.createElement("label",{htmlFor:"credits-off-peak-input"},t("CreditsOffPeak")),i.default.createElement("input",{type:"number",min:0,id:"credits-off-peak-input",className:"form-control",defaultValue:a||0,onChange:e=>{o((0,f.stringToFloat)(e.target.value))},disabled:h.isUnchanged("creditsOffPeak")}))),i.default.createElement("div",null,i.default.createElement("div",{className:"mt-3"},i.default.createElement(p.UnchangedCheckbox,{field:"creditsPeak",unchangedHandler:h}),i.default.createElement("label",{htmlFor:"credits-peak-input"},t("CreditsPeak")),i.default.createElement("input",{type:"number",min:0,id:"credits-peak-input",className:"form-control",defaultValue:n||0,onChange:e=>{u((0,f.stringToFloat)(e.target.value))},disabled:h.isUnchanged("creditsPeak")}))),i.default.createElement("div",null,i.default.createElement("div",{className:"mt-3"},i.default.createElement(p.UnchangedCheckbox,{field:"creditsCalculated",unchangedHandler:h}),i.default.createElement("label",{htmlFor:"credits-calculated-input"},t("CreditsCalculated")),i.default.createElement("select",{id:"credits-calculated-input",className:"form-select",defaultValue:l||d.CreditApplicabilityOptions.PerSlot,onChange:e=>{c((0,f.stringToNumber)(e.target.value))},disabled:h.isUnchanged("creditsCalculated")},i.default.createElement("option",{value:d.CreditApplicabilityOptions.PerSlot},t("PerSlot")),i.default.createElement("option",{value:d.CreditApplicabilityOptions.PerReservation},t("PerReservation"))))),i.default.createElement("div",{className:"mt-3"},i.default.createElement(p.UnchangedCheckbox,{field:"creditsChargedForBlockedSlots",unchangedHandler:h}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"credits-blocked-slots-chk",onChange:e=>m(e.target.checked),defaultChecked:r||!1,disabled:h.isUnchanged("creditsChargedForBlockedSlots")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"credits-blocked-slots-chk"},t("CreditsChargedBlockedSlots")))))}function g(e){const{resource:t,onIsEditing:a}=e,{t:n}=(0,s.useTranslation)(),{isLoading:l,onCreditsCalculatedChanged:r,onOffPeakCreditsChanged:o,onPeakCreditsChanged:c,onCreditsChargedForBlockedSlotsChanged:d,onResourceUpdated:f}=h({resource:t,state:(0,i.useContext)(m.ManageResourcesContext)});return i.default.createElement(u.ResourceEditSection,{isEditing:!0,title:n("Credits"),setIsEditing:a,isLoading:l,onUpdate:f},i.default.createElement(b,{defaultCreditsOffPeak:t.creditsOffPeak,defaultCreditsPeak:t.creditsPeak,defaultCreditsCalculated:t.creditsCalculated,defaultCreditsChargedForBlockedSlots:t.creditsChargedForBlockedSlots,onCreditsCalculatedChanged:r,onPeakCreditsChanged:c,onOffPeakCreditsChanged:o,onCreditsChargedForBlockedSlotsChanged:d,unchangedHandler:void 0}))}t.useResourceCreditsEdit=h,t.ResourceCreditsEditFragment=b,t.ResourceCreditsBulkEditSection=function(e){const t=(0,p.useBulkUpdateUnchangedHandlerHooks)({defaultUnchanged:["creditsOffPeak","creditsPeak","creditsCalculated","creditsChargedForBlockedSlots"],onUnchangedToggle:e.onFieldUnchanged});return i.default.createElement(b,{onCreditsCalculatedChanged:t=>e.onFieldUpdated({creditsCalculated:t}),onPeakCreditsChanged:t=>e.onFieldUpdated({creditsPeak:t}),onOffPeakCreditsChanged:t=>e.onFieldUpdated({creditsOffPeak:t}),onCreditsChargedForBlockedSlotsChanged:t=>e.onFieldUpdated({creditsChargedForBlockedSlots:t}),unchangedHandler:t})},t.ResourceCreditsSection=function(e){const{resource:t}=e,{t:a}=(0,s.useTranslation)(),[n,l]=(0,i.useState)(!1);function r(e){l(e)}return(0,i.useContext)(c.AppSettingsContext).creditsEnabled?n?i.default.createElement(g,{resource:t,onIsEditing:r}):i.default.createElement(u.ResourceEditSection,{isEditing:n,title:a("Credits"),setIsEditing:r,isLoading:!1},i.default.createElement("div",{className:"resource-property"},i.default.createElement("span",{className:"resource-property-label"},a("CreditsOffPeak")),i.default.createElement("span",{className:"resource-property-value"},t.creditsOffPeak||0)),i.default.createElement("div",{className:"resource-property"},i.default.createElement("span",{className:"resource-property-label"},a("CreditsPeak")),i.default.createElement("span",{className:"resource-property-value"},t.creditsPeak||0)),i.default.createElement("div",{className:"resource-property"},i.default.createElement("span",{className:"resource-property-label"},a("CreditsCalculated")),t.creditsCalculated===d.CreditApplicabilityOptions.PerSlot&&i.default.createElement("span",{className:"resource-property-value"},a("PerSlot")),t.creditsCalculated===d.CreditApplicabilityOptions.PerReservation&&i.default.createElement("span",{className:"resource-property-value"},a("PerReservation"))),t.creditsChargedForBlockedSlots&&i.default.createElement("div",null,a("CreditsChargedBlockedSlots"))):i.default.createElement("section",{className:"resource-editable-section"},i.default.createElement("div",{className:"resource-editable-header"},i.default.createElement("div",{className:"resource-editable-header-label"},a("Credits"))),i.default.createElement("div",null,a("CreditsAreNotEnabled")))}},97763:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceDisplayBulkEditSection=t.ResourceDisplaySection=t.useResourceDisplayEdit=void 0;const s=r(a(67294)),u=a(81468),c=i(a(74855)),d=a(83231),m=a(96027),f=a(38813),p=a(51073),h=a(7445),b=a(29575);function g(e){const{t}=(0,u.useTranslation)(),{defaultResourceName:a,defaultSortOrder:n,defaultScheduleId:l,defaultSlotLabel:r,defaultShowToPublic:o,schedules:i,isSlotLabelDisabled:c,color:d,onNameChanged:m,onScheduleChanged:f,onSortOrderChanged:p,onSlotLabelChanged:g,onSlotLabelDefaultChanged:v,onColorChanged:E,onShowToPublicChanged:y,unchangedHandler:C}=e,N=C||(0,b.useNullBulkUpdateUnchangedHandlerHook)(),O=N.isUnchanged;return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"mt-3"},s.default.createElement(b.UnchangedCheckbox,{field:"name",unchangedHandler:N}),s.default.createElement("label",{htmlFor:"name-input"},t("Name")),s.default.createElement("input",{type:"text",autoFocus:!0,id:"name-input",required:!0,className:"form-control",defaultValue:a,onChange:e=>{m(e.target.value)},disabled:O("name")})),s.default.createElement("div",{className:"mt-3"},s.default.createElement(b.UnchangedCheckbox,{field:"scheduleId",unchangedHandler:N}),s.default.createElement("label",{htmlFor:"schedule-input"},t("Schedule")),s.default.createElement("select",{id:"schedule-input",className:"form-select",defaultValue:l,onChange:e=>f(e.target.value),disabled:O("scheduleId")},i.map((e=>s.default.createElement("option",{value:e.id,key:e.id},e.name))))),s.default.createElement("div",{className:"mt-3"},s.default.createElement(b.UnchangedCheckbox,{field:"sortOrder",unchangedHandler:N}),s.default.createElement("label",{htmlFor:"sort-input"},t("SortOrder")),s.default.createElement("input",{type:"number",id:"sort-input",className:"form-control",defaultValue:n||"",onChange:e=>{p((0,h.stringToNumber)(e.target.value))},disabled:O("sortOrder")})),s.default.createElement("div",{className:"mt-3"},s.default.createElement(b.UnchangedCheckbox,{field:"slotLabel",unchangedHandler:N}),s.default.createElement("label",{htmlFor:"slot-label-input"},t("SlotLabel")," ",s.default.createElement("a",{href:"https://www.bookedscheduler.com/help/configuration/configuration-settings/#AvailableLabelTokens",target:"_blank",rel:"noreferrer"},s.default.createElement("span",{className:"bi bi-info-circle-fill"}))),s.default.createElement("input",{type:"text",id:"slot-label-input",className:"form-control",defaultValue:r,onChange:e=>g(e.target.value),disabled:c||O("slotLabel")}),s.default.createElement("div",{className:"form-check"},s.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"slot-label-default-chk",onChange:e=>v(e.target.checked),defaultChecked:c||O("slotLabel")}),s.default.createElement("label",{className:"form-check-label",htmlFor:"slot-label-default-chk"},t("UseDefaultLabel")))),s.default.createElement("div",{className:"mt-3"},s.default.createElement(b.UnchangedCheckbox,{field:"color",unchangedHandler:N}),s.default.createElement("div",{className:"d-flex align-items-end"},s.default.createElement("div",null,s.default.createElement("label",{htmlFor:"color-input"},t("Color"))),s.default.createElement("div",{className:"ms-3"},s.default.createElement("input",{type:"color",id:"color-input",className:"form-control",value:d,onChange:e=>{E(e.target.value)},disabled:O("color")})),s.default.createElement("div",{className:"input-group ms-3"},s.default.createElement("span",{className:"input-group-text",id:"hex-addon"},"#"),s.default.createElement("input",{id:"color-hex-code",type:"text",className:"form-control color-hex-code",placeholder:"000000","aria-label":"Color Hex Code",value:d.replace("#",""),"aria-describedby":"hex-addon",maxLength:6,minLength:6,onChange:e=>{E(`#${e.target.value}`)},disabled:O("color")}))),!O("color")&&s.default.createElement("div",{className:"swatches"},s.default.createElement("div",{className:"swatch-none",role:"button",onClick:()=>E(""),title:t("None")}," "),s.default.createElement("div",{role:"button",onClick:()=>E("#1460aa"),style:{backgroundColor:"#1460aa"},title:"Blue"}," "),s.default.createElement("div",{role:"button",onClick:()=>E("#009fd4"),style:{backgroundColor:"#009fd4"},title:"Light Blue"}," "),s.default.createElement("div",{role:"button",onClick:()=>E("#9b59b6"),style:{backgroundColor:"#9b59b6"},title:"Purple"}," "),s.default.createElement("div",{role:"button",onClick:()=>E("#ef4836"),style:{backgroundColor:"#ef4836"},title:"Red"}," "),s.default.createElement("div",{role:"button",onClick:()=>E("#2ecc71"),style:{backgroundColor:"#2ecc71"},title:"Green"}," "),s.default.createElement("div",{role:"button",onClick:()=>E("#f2ca27"),style:{backgroundColor:"#f2ca27"},title:"Yellow"}," "),s.default.createElement("div",{role:"button",onClick:()=>E("#67809f"),style:{backgroundColor:"#67809f"},title:"Gray"}," "),s.default.createElement("div",{role:"button",onClick:()=>E("#e67e22"),style:{backgroundColor:"#e67e22"},title:"Orange"}," "))),s.default.createElement("div",{className:"mt-3"},s.default.createElement(b.UnchangedCheckbox,{field:"showToPublic",unchangedHandler:N}),s.default.createElement("div",{className:"form-check"},s.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"allow-public-chk",onChange:e=>y(e.target.checked),defaultChecked:o,disabled:O("showToPublic")}),s.default.createElement("label",{className:"form-check-label",htmlFor:"allow-public-chk"},t("AllowPublicAccess")," ",s.default.createElement("a",{href:"https://www.bookedscheduler.com/help/administration/resources/#ResourcePublicAccess",target:"_blank",rel:"noreferrer"},s.default.createElement("span",{className:"bi bi-info-circle-fill"}))))))}function v(e){const{resource:t,state:a}=e,[n,l]=(0,s.useState)(""===t.slotLabel||!t.slotLabel),[r,i]=(0,s.useState)(t.name),[u,c]=(0,s.useState)(t.scheduleId),[m,f]=(0,s.useState)(t.sortOrder),[p,h]=(0,s.useState)(t.slotLabel),[b,g]=(0,s.useState)(t.showToPublic),[v,E]=(0,s.useState)(t.color);return{schedules:(0,d.getScheduleViews)(a),isSlotLabelDisabled:n,color:v||"",isLoading:a.isLoading,onNameChanged:function(e){i(e.trim())},onScheduleChanged:function(e){c(Number.parseInt(e))},onSlotLabelDefaultChanged:function(e){l(e),e&&h("")},onSortOrderChanged:function(e){f(e)},onSlotLabelChanged:function(e){h(e.trim())},onResourceUpdated:function(){return o(this,void 0,void 0,(function*(){yield a.onDisplayUpdated({id:t.id,name:r,scheduleId:u,slotLabel:p,sortOrder:m,color:v||void 0,showToPublic:b})}))},onShowToPublicChanged:function(e){g(e)},onColorChanged:function(e){E(e)}}}function E(e){const{resource:t,onIsEditing:a}=e,{t:n}=(0,u.useTranslation)(),{schedules:l,isSlotLabelDisabled:r,color:o,isLoading:i,onNameChanged:c,onScheduleChanged:d,onSlotLabelDefaultChanged:p,onSortOrderChanged:h,onSlotLabelChanged:b,onResourceUpdated:E,onShowToPublicChanged:y,onColorChanged:C}=v({resource:t,state:(0,s.useContext)(m.ManageResourcesContext)});return s.default.createElement(f.ResourceEditSection,{isEditing:!0,title:n("ResourceInformation"),setIsEditing:a,onUpdate:E,isLoading:i},s.default.createElement(g,{schedules:l,color:o,isSlotLabelDisabled:r,defaultResourceName:t.name,defaultScheduleId:t.scheduleId,defaultSortOrder:t.sortOrder,defaultSlotLabel:t.slotLabel,defaultShowToPublic:t.showToPublic,onColorChanged:C,onNameChanged:c,onScheduleChanged:d,onShowToPublicChanged:y,onSlotLabelChanged:b,onSlotLabelDefaultChanged:p,onSortOrderChanged:h}))}t.useResourceDisplayEdit=v,t.ResourceDisplaySection=function(e){const{resource:t}=e,{t:a}=(0,u.useTranslation)(),n=(0,s.useContext)(p.AppSettingsContext),[l,r]=(0,s.useState)(!1),[o,i]=(0,s.useState)(!1);function d(e){r(e)}function m(){i(!0),setTimeout((()=>{i(!1)}),3e3)}return l?s.default.createElement(E,{resource:t,onIsEditing:d}):s.default.createElement(f.ResourceEditSection,{isEditing:!1,title:a("DisplayInformation"),setIsEditing:d,isLoading:!1},s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("Name")),s.default.createElement("span",{className:"resource-property-value"},t.name)),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("Schedule")),s.default.createElement("span",{className:"resource-property-value"},t.scheduleName)),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("SortOrder")),s.default.createElement("span",{className:"resource-property-value"},t.sortOrder||a("Default"))),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("SlotLabel")),s.default.createElement("span",{className:"resource-property-value"},t.slotLabel||a("Default"))),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("Color")),s.default.createElement("span",{className:"resource-property-value"},t.color&&s.default.createElement("div",{style:{backgroundColor:t.color},className:"resource-color-display"}," "),!t.color&&a("None"))),s.default.createElement("div",{className:"resource-property"},s.default.createElement("span",{className:"resource-property-label"},a("PublicAccess")),s.default.createElement("span",{className:"resource-property-value resource-public-links"},t.showToPublic&&s.default.createElement(s.default.Fragment,null,s.default.createElement(c.default,{onCopy:()=>m(),text:t.publicId.toString()||""},s.default.createElement("button",{type:"button",title:a("CopyId"),className:"no-padding btn btn-link"},s.default.createElement("span",{className:"bi bi-hash"}))),s.default.createElement(c.default,{onCopy:()=>m(),text:t.webCalUrl||""},s.default.createElement("button",{type:"button",title:a("CopyICalLink"),className:"no-padding btn btn-link"},s.default.createElement("span",{className:"bi bi-calendar-check"}))),s.default.createElement(c.default,{onCopy:()=>m(),text:t.rssUrl||""},s.default.createElement("button",{type:"button",title:a("CopyRssLink"),className:"no-padding btn btn-link"},s.default.createElement("span",{className:"bi bi-rss"}))),s.default.createElement(c.default,{onCopy:()=>m(),text:`<script async src="${n.path}/scripts/embed-calendar.js&rid=${t.publicId}" crossorigin="anonymous"><\/script>`,options:{message:"Copied"}},s.default.createElement("button",{type:"button",title:a("CopyEmbedCode"),className:"no-padding btn btn-link"},s.default.createElement("span",{className:"bi bi-code-slash"}))),s.default.createElement(c.default,{onCopy:()=>m(),text:t.resourceDisplayUrl||""},s.default.createElement("button",{type:"button",title:a("CopyToResourceDisplay"),className:"no-padding btn btn-link"},s.default.createElement("span",{className:"bi bi-tablet"}))),o&&s.default.createElement("div",{className:"copied-success"},a("CopiedToClipboard"))),!t.showToPublic&&a("None")))))},t.ResourceDisplayBulkEditSection=function(e){const t=(0,s.useContext)(m.ManageResourcesContext),{onFieldUnchanged:a,onFieldUpdated:n}=e,l=(0,b.useBulkUpdateUnchangedHandlerHooks)({defaultUnchanged:["name","scheduleId","sortOrder","slotLabel","color","showToPublic"],onUnchangedToggle:a}),[r,o]=(0,s.useState)(!0),[i,u]=(0,s.useState)(""),[c,f]=(0,s.useState)("");return s.default.createElement(g,{schedules:(0,d.getScheduleViews)(t),isSlotLabelDisabled:r,color:i,onColorChanged:function(e){u(e),n({color:e})},onNameChanged:()=>{},onSortOrderChanged:e=>n({sortOrder:e}),onSlotLabelDefaultChanged:function(e){o(e),n(e?{slotLabel:""}:{slotLabel:c})},onSlotLabelChanged:function(e){f(e),n({slotLabel:e})},onShowToPublicChanged:e=>n({showToPublic:e}),onScheduleChanged:e=>{n({scheduleId:Number.parseInt(e)})},defaultShowToPublic:void 0,defaultSlotLabel:void 0,defaultSortOrder:void 0,defaultScheduleId:void 0,defaultResourceName:void 0,unchangedHandler:l})}},23873:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceDurationBulkEditSection=t.ResourceDurationSection=t.useResourceDurationEdit=void 0;const i=r(a(67294)),s=a(81468),u=a(38813),c=a(90416),d=a(96027),m=a(29575);function f(e){const{t}=(0,s.useTranslation)(),{defaultMinDuration:a,defaultMaxDuration:n,defaultBuffer:l,isMaxDurationNone:r,isMinDurationNone:o,isCrossDayAllowed:u,isBufferNone:d,onMinDurationUpdated:f,onIsMaxDurationNone:p,onIsMinDurationNone:h,onIsCrossDayAllowed:b,onBufferUpdated:g,onMaxDurationUpdated:v,onIsBufferNone:E,unchangedHandler:y}=e,C=y||(0,m.useNullBulkUpdateUnchangedHandlerHook)(),N=C.isUnchanged;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"mt-3"},i.default.createElement(m.UnchangedCheckbox,{field:"minDuration",unchangedHandler:C}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"min-duration-chk",onChange:e=>h(e.target.checked),defaultChecked:o,disabled:N("minDuration")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"min-duration-chk"},i.default.createElement(s.Trans,{i18nKey:"ResourceMinLengthNone"}))),!o&&i.default.createElement("div",{className:"ms-4"},t("ReservationsMustLastAtLeast"),i.default.createElement(c.TimeIntervalEdit,{interval:a,onUpdated:e=>f(e),disabled:N("minDuration")}))),i.default.createElement("div",{className:"mt-3"},i.default.createElement(m.UnchangedCheckbox,{field:"maxDuration",unchangedHandler:C}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"max-duration-chk",onChange:e=>p(e.target.checked),defaultChecked:r,disabled:N("maxDuration")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"max-duration-chk"},i.default.createElement(s.Trans,{i18nKey:"ResourceMaxLengthNone"}))),!r&&i.default.createElement("div",{className:"ms-4"},t("ReservationsCannotLastMoreThan"),i.default.createElement(c.TimeIntervalEdit,{interval:n,onUpdated:e=>v(e),disabled:N("maxDuration")}))),i.default.createElement("div",{className:"mt-3"},i.default.createElement(m.UnchangedCheckbox,{field:"buffer",unchangedHandler:C}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"buffer-chk",onChange:e=>E(e.target.checked),defaultChecked:d,disabled:N("buffer")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"buffer-chk"},i.default.createElement(s.Trans,{i18nKey:"ResourceBufferTimeNone"}))),!d&&i.default.createElement("div",{className:"ms-4"},t("BetweenReservationsThereMustBeAtLeast"),i.default.createElement(c.TimeIntervalEdit,{interval:l,onUpdated:e=>g(e),disabled:N("buffer")}))),i.default.createElement("div",{className:"mt-3"},i.default.createElement(m.UnchangedCheckbox,{field:"allowCrossDay",unchangedHandler:C}),i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"cross-day-chk",onChange:e=>b(e.target.checked),defaultChecked:u,disabled:N("allowCrossDay")}),i.default.createElement("label",{className:"form-check-label",htmlFor:"cross-day-chk"},i.default.createElement(s.Trans,{i18nKey:"ResourceAllowMultiDay"})))))}function p(e){const{resource:t,state:a}=e,[n,l]=(0,i.useState)(!t.minDuration),[r,s]=(0,i.useState)(!t.maxDuration),[u,c]=(0,i.useState)(!t.buffer),[d,m]=(0,i.useState)(t.minDuration),[f,p]=(0,i.useState)(t.maxDuration),[h,b]=(0,i.useState)(t.buffer),[g,v]=(0,i.useState)(t.allowCrossDay);return{isMinDurationNone:n,isMaxDurationNone:r,isBufferNone:u,isCrossDayAllowed:g,isLoading:a.isLoading,onIsMinDurationNone:function(e){l(e)},onMinDurationUpdated:function(e){m(e)},onIsMaxDurationNone:function(e){s(e)},onMaxDurationUpdated:function(e){p(e)},onIsBufferNone:function(e){c(e)},onBufferUpdated:function(e){b(e)},onIsCrossDayAllowed:function(e){v(e)},onResourceUpdated:function(){return o(this,void 0,void 0,(function*(){const e={id:t.id,allowCrossDay:g,buffer:u?null:h,minDuration:n?null:d,maxDuration:r?null:f};yield a.onDurationUpdated(e)}))}}}function h(e){const{resource:t,onIsEditing:a}=e,{t:n}=(0,s.useTranslation)(),{isLoading:l,isMinDurationNone:r,isMaxDurationNone:o,isBufferNone:c,isCrossDayAllowed:m,onIsMinDurationNone:h,onMinDurationUpdated:b,onIsMaxDurationNone:g,onMaxDurationUpdated:v,onIsBufferNone:E,onBufferUpdated:y,onIsCrossDayAllowed:C,onResourceUpdated:N}=p({resource:t,state:(0,i.useContext)(d.ManageResourcesContext)});return i.default.createElement(u.ResourceEditSection,{isEditing:!0,title:n("Duration"),setIsEditing:a,isLoading:l,onUpdate:N},i.default.createElement(f,{defaultMinDuration:t.minDuration,defaultMaxDuration:t.maxDuration,defaultBuffer:t.buffer,isMaxDurationNone:o,isMinDurationNone:r,isBufferNone:c,isCrossDayAllowed:m,onIsMaxDurationNone:g,onMaxDurationUpdated:v,onIsMinDurationNone:h,onIsBufferNone:E,onMinDurationUpdated:b,onIsCrossDayAllowed:C,onBufferUpdated:y}))}t.useResourceDurationEdit=p,t.ResourceDurationSection=function(e){const{resource:t}=e,{t:a}=(0,s.useTranslation)(),[n,l]=(0,i.useState)(!1);function r(e){l(e)}return n?i.default.createElement(h,{resource:t,onIsEditing:r}):i.default.createElement(u.ResourceEditSection,{isEditing:n,title:a("Duration"),setIsEditing:r,isLoading:!1},i.default.createElement("div",{className:"minDuration"},!t.minDuration&&i.default.createElement("span",null,i.default.createElement(s.Trans,{i18nKey:"ResourceMinLengthNone"})),t.minDuration&&i.default.createElement("span",null,a("ReservationsMustLastAtLeast")," ",i.default.createElement("strong",null,i.default.createElement(c.TimeIntervalDisplay,{interval:t.minDuration})))),i.default.createElement("div",{className:"maxDuration"},!t.maxDuration&&i.default.createElement("span",null,i.default.createElement(s.Trans,{i18nKey:"ResourceMaxLengthNone"})),t.maxDuration&&i.default.createElement("span",null,a("ReservationsCannotLastMoreThan")," ",i.default.createElement("strong",null,i.default.createElement(c.TimeIntervalDisplay,{interval:t.maxDuration})))),i.default.createElement("div",{className:"bufferTime"},!t.buffer&&i.default.createElement("span",null,i.default.createElement(s.Trans,{i18nKey:"ResourceBufferTimeNone"})),t.buffer&&i.default.createElement("span",null,a("BetweenReservationsThereMustBeAtLeast")," ",i.default.createElement("strong",null,i.default.createElement(c.TimeIntervalDisplay,{interval:t.buffer})))),i.default.createElement("div",{className:"allowMultiDay"},!t.allowCrossDay&&i.default.createElement("span",null,i.default.createElement(s.Trans,{i18nKey:"ResourceNotAllowMultiDay"})),t.allowCrossDay&&i.default.createElement("span",null,i.default.createElement(s.Trans,{i18nKey:"ResourceAllowMultiDay"}))))},t.ResourceDurationBulkEditSection=function(e){const[t,a]=(0,i.useState)(!0),[n,l]=(0,i.useState)(null),[r,o]=(0,i.useState)(!0),[s,u]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0),[p,h]=(0,i.useState)(null),{onFieldUpdated:b,onFieldUnchanged:g}=e,v=(0,m.useBulkUpdateUnchangedHandlerHooks)({defaultUnchanged:["minDuration","maxDuration","buffer","allowCrossDay"],onUnchangedToggle:g});return i.default.createElement(f,{isMinDurationNone:t,isMaxDurationNone:r,isBufferNone:c,isCrossDayAllowed:!0,defaultMinDuration:void 0,defaultMaxDuration:void 0,defaultBuffer:void 0,onIsMinDurationNone:function(e){a(e),b(e?{minDuration:n}:{minDuration:null})},onMinDurationUpdated:e=>{l(e),b({minDuration:e})},onIsMaxDurationNone:function(e){o(e),b(e?{maxDuration:s}:{maxDuration:null})},onMaxDurationUpdated:e=>{u(e),b({maxDuration:e})},onIsBufferNone:function(e){d(e),b(e?{buffer:p}:{buffer:null})},onBufferUpdated:e=>{h(e),b({buffer:e})},onIsCrossDayAllowed:e=>b({allowCrossDay:e}),unchangedHandler:v})}},38813:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceEditSection=void 0;const o=r(a(67294)),i=a(81468),s=a(90145),u=a(7781),c=a(28193);t.ResourceEditSection=function({children:e,isEditing:t,isLoading:a,onUpdate:n,setIsEditing:l,title:r}){const{t:d}=(0,i.useTranslation)(),[m,f]=(0,o.useState)(!1),p=(0,o.useRef)(null);function h(e){if(!e&&p.current){const e=window.pageYOffset-50,t=p.current.getBoundingClientRect().top+e;t<e&&window.scrollTo({top:t,behavior:"smooth"})}l(e)}return(0,s.useOnEscape)((()=>{h(!1)})),a?o.default.createElement(c.Spinner,null):t?o.default.createElement("div",{ref:p},o.default.createElement("section",{className:"resource-editable-section edit-active"},o.default.createElement("div",{className:"resource-editable-header"},o.default.createElement("div",{className:"resource-editable-header-label"},r),o.default.createElement("div",{className:"resource-editable-header-cancel"},o.default.createElement("button",{onClick:()=>l(!1),type:"button",className:"btn-close","aria-label":"Close"}))),e,o.default.createElement("div",{className:"mt-3 text-end"},o.default.createElement(u.UpdateAndCancelButtons,{onCancel:()=>h(!1),onUpdate:()=>{n&&n().then((()=>{h(!1)}))}}))),o.default.createElement("div",{className:"fade-background"})):o.default.createElement("div",{ref:p},o.default.createElement("section",{className:"resource-editable-section "+(m?"edit-hover":"")},o.default.createElement("div",{className:"resource-editable-header"},o.default.createElement("div",{className:"resource-editable-header-label"},r),o.default.createElement("div",null,o.default.createElement("button",{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onClick:()=>{f(!1),l(!0)},className:"btn btn-link"},d("Edit")," ",o.default.createElement("span",{className:"bi bi-pencil-square"})))),e))}},4457:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceGroupsComponent=t.useResourceGroupsComponent=void 0;const o=r(a(67294)),i=a(81468),s=r(a(43410)),u=a(96027),c=a(28193),d=a(15127),m=a(60519),f=a(88554),p=a(97961),h=a(83231);function b(e){const{state:t}=e,a=(0,o.useMemo)((()=>(0,h.getResourceGroupViews)(t)),[t.resourceGroups]),n=(0,o.useMemo)((()=>(0,h.getAdminResourceViews)(t)),[t]),[l,r]=(0,o.useState)(f()),[i,s]=(0,o.useState)([]);function u(e){return`group-${e}`}function c(e,t){return`resource-${e}-${t}`}function d(e){const t=a.filter((t=>t.parentId===e.id)).map((e=>u(e.id))),l=n.filter((t=>t.resourceGroupIds.includes(e.id))).map((t=>c(t.id,e.id)));return{id:u(e.id),data:{id:e.id,title:e.name,type:1},isExpanded:t.length+l.length>0,hasChildren:t.length+l.length>0,children:[...t,...l]}}function m(e,t){return{id:c(e.id,t),data:{id:e.id,title:e.name,type:2},isExpanded:!1,hasChildren:!1,children:[]}}function f(){const e=a.filter((e=>null===e.parentId)).map((e=>u(e.id))),t={};return t.root={id:"root",hasChildren:e.length>0,children:e,isExpanded:!0},a.forEach((e=>{t[u(e.id)]=d(e)})),n.forEach((e=>{e.resourceGroupIds.forEach((a=>{t[c(e.id,a)]=m(e,a)}))})),{rootId:"root",items:t}}function p(e,t){const a=Object.assign({},t),n=u(e.split("-")[2]),l=t.items[n].children.filter((t=>t.toString()!==e));return a.items[n]=Object.assign(Object.assign({},a.items[n]),{children:l,hasChildren:l.length>0,isExpanded:l.length>0}),delete a.items[e],a}function b(e,t){let a=Object.assign({},t);return a.items[e].children.forEach((e=>{a=e.toString().includes("resource")?p(e.toString(),a):b(e.toString(),a)})),Object.keys(a.items).forEach((t=>{a.items[t].children=a.items[t].children.filter((t=>t.toString()!==e)),a.items[t].hasChildren=a.items[t].children.length>0,a.items[t].isExpanded=a.items[t].children.length>0})),delete a.items[e],a}return(0,o.useEffect)((()=>{r(f())}),[t]),{resources:(0,h.getAdminResourceViews)(t),groups:a,tree:l,isLoading:t.isLoading,onGroupsUpdated:function(){const e=[],a=Object.keys(l.items);return a.forEach((t=>{const n=l.items[t];if("root"!==t&&1===n.data.type){const r=l.items[t].children.filter((e=>e.toString().includes("resource"))).map((e=>{const t=e.toString().split("-");return Number.parseInt(t[1])})),o=()=>{for(const e of a)if("root"!==e&&l.items[e].children.includes(t))return l.items[e].data.id.toString();return null};e.push({id:n.data.id.toString(),name:n.data.title,parentId:o(),resourceIds:r})}})),t.onResourceGroupTreeUpdated(e)},onTreeUpdated:function(e){r(e)},onResourceAdded:function(e,t){const a=[...l.items[t].children],o=Number.parseInt(t.split("-")[1]),i=c(e,o);a.push(i);const s=Object.assign({},l);s.items[i]=m(n.find((t=>t.id===Number.parseInt(e))),o),s.items[t]=Object.assign(Object.assign({},s.items[t]),{children:a,hasChildren:!0,isExpanded:!0}),r(s)},onItemDeleted:function(e,t){r(2!==t?b(e,Object.assign({},l)):p(e,Object.assign({},l)))},onGroupAdded:function(e){const t={id:`${i.length+1}-new`,name:e,parentId:null};s([...i,t]);const a=d(t),n=Object.assign({},l);n.items[a.id]=a,n.items.root.children.push(a.id),r(n)},onGroupNameChanged:function(e,t){const a=Object.assign({},l);a.items[e].data.title=t,r(a)}}}function g(e){const t=(0,o.useRef)(null);return o.default.createElement("div",{className:"d-inline-block"},o.default.createElement("select",{style:{width:"auto"},className:"form-select form-select-sm",ref:t,onChange:a=>{e.onChange(a.target.value),t.current.value=""}},o.default.createElement("option",{value:""},"Add Resource..."),e.resources.map((e=>o.default.createElement("option",{key:e.id,value:e.id},e.name)))))}function v(e){const{t}=(0,i.useTranslation)(),[a,n]=(0,o.useState)("");return o.default.createElement("form",{onSubmit:t=>{t.preventDefault(),""!==a.trim()&&(e.onGroupAdded(a),n(""))}},o.default.createElement("div",{className:"mt-1 mb-1 d-flex"},o.default.createElement("input",{type:"text",value:a,className:"form-control form-control-sm me-1",onChange:e=>n(e.target.value),placeholder:t("GroupName"),"aria-label":t("GroupName")}),o.default.createElement("button",{type:"submit",className:"btn btn-light"},t("Add"))))}function E(e){const{t}=(0,i.useTranslation)(),{item:a,onExpand:n,onCollapse:l,provided:r,snapshot:s,resources:u,tree:c,onItemDeleted:d,onResourceAdded:m,onGroupNameChanged:f}=e,[p,h]=(0,o.useState)(!1),[b,v]=(0,o.useState)(a.data.title);function E(){h(!p)}const y=(e,t)=>Object.assign({overflow:"auto",boxShadow:e?"0px 0px 5px 1px #ccc":"none"},t);return(0,o.useEffect)((()=>{v(a.data.title)}),[p]),p?o.default.createElement("form",{onSubmit:e=>{e.preventDefault(),f(a.id.toString(),b.trim()),h(!1)}},o.default.createElement("div",{className:"d-flex"},o.default.createElement("div",null,o.default.createElement("label",{htmlFor:`edit-group-name-${a.id}`,className:"visually-hidden"},"Group Name"),o.default.createElement("input",{required:!0,autoFocus:!0,id:`edit-group-name-${a.id}`,className:"form-control form-control-sm",type:"text",value:b,onChange:e=>{return t=e.target.value,void v(t);var t}})),o.default.createElement("div",{className:"tree-item-actions"},o.default.createElement("button",{type:"submit",title:t("Update"),className:"btn btn-link"},o.default.createElement("span",{className:"bi bi-check"})),o.default.createElement("span",{className:"d-inline-block"},"|"),o.default.createElement("button",{title:t("Cancel"),className:"btn btn-link",onClick:()=>E()},o.default.createElement("span",{className:"bi bi-x"}))))):o.default.createElement(o.default.Fragment,null,o.default.createElement("div",Object.assign({ref:r.innerRef},r.draggableProps,r.dragHandleProps,{style:y(s.isDragging,r.draggableProps.style),className:"resource-group-tree-item"}),o.default.createElement(o.default.Fragment,null,a.children&&a.children.length>0?a.isExpanded?o.default.createElement("span",{role:"button",className:"bi bi-chevron-down resource-group-tree-navigation",onClick:()=>l(a.id)}):o.default.createElement("span",{role:"button",className:"bi bi-chevron-right resource-group-tree-navigation",onClick:()=>n(a.id)}):o.default.createElement("span",{role:"button",className:"bi bi-dot resource-group-tree-navigation"}),o.default.createElement("div",{className:1===a.data.type?"tree-group":"tree-resource"},a.data?a.data.title:""),!s.isDragging&&o.default.createElement("div",{className:"tree-item-actions"},1===a.data.type&&o.default.createElement(o.default.Fragment,null,o.default.createElement("button",{className:"btn btn-link",onClick:()=>E()},o.default.createElement("span",{className:"bi bi-pencil-square"})),o.default.createElement("span",{className:"d-inline-block"},"|")),o.default.createElement("button",{className:"btn btn-link",onClick:()=>d(a.id.toString(),a.data.type)},o.default.createElement("span",{className:"bi bi-trash delete icon"}))))),!1===s.isDragging&&(a.isExpanded||0===a.children.length)&&1===a.data.type&&o.default.createElement("div",{style:y(s.isDragging,r.draggableProps.style),className:"resource-group-add-resource"},o.default.createElement("span",{style:{paddingLeft:"15px"},className:"bi bi-dot resource-group-tree-navigation"}),o.default.createElement(g,{resources:function(e){const t=c.items[e].data.id;return u.filter((a=>!c.items[e].children.some((e=>e.toString()===`resource-${a.id}-${t}`))))}(a.id.toString()),onChange:e=>m(e,a.id.toString())})))}t.useResourceGroupsComponent=b,t.ResourceGroupsComponent=function(){const{resources:e,isLoading:t,tree:a,onGroupAdded:n,onGroupsUpdated:l,onTreeUpdated:r,onResourceAdded:h,onItemDeleted:g,onGroupNameChanged:y}=b({state:(0,o.useContext)(u.ManageResourcesContext)}),{changeHash:C}=(0,f.useHashChange)(),{t:N}=(0,i.useTranslation)();return t?o.default.createElement(c.Spinner,null):o.default.createElement("div",{className:"default-box default-box-1-padding mb-2"},o.default.createElement("div",{className:"default-box-header"},N("ManageResourceGroups")),o.default.createElement("div",{className:"default-box-content margin-bottom-15 row"},o.default.createElement(v,{onGroupAdded:n}),0===a.items.root.children.length&&o.default.createElement("div",null,N("NoResourceGroups")),a.items.root.children.length>0&&o.default.createElement("div",{className:"manage-resource-group-tree resource-group-tree"},o.default.createElement(s.default,{tree:a,renderItem:t=>o.default.createElement(E,Object.assign({},t,{resources:e,tree:a,onResourceAdded:h,onItemDeleted:g,onGroupNameChanged:y})),onExpand:e=>{r((0,s.mutateTree)(a,e,{isExpanded:!0}))},onCollapse:e=>{r((0,s.mutateTree)(a,e,{isExpanded:!1}))},onDragEnd:(e,t)=>{t&&t.parentId&&!t.parentId.toString().includes("resource")&&r((0,s.moveItemOnTree)(a,e,t))},isDragEnabled:e=>1===e.data.type,isNestingEnabled:!0}))),o.default.createElement("div",{className:"default-box-footer"},o.default.createElement(m.CancelButton,{onClick:function(){C(d.NavigationPaths.Home)}}),o.default.createElement(p.UpdateButton,{onClick:l})))}},83017:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceGroupsSection=t.useResourceGroupsEdit=void 0;const o=r(a(67294)),i=a(81468),s=r(a(43410)),u=a(38813),c=a(94559),d=a(96027);function m(e){const[t,a]=(0,o.useState)(e.resource.resourceGroupIds.map((e=>e.toString()))),[n,l]=(0,o.useState)([]),[r,i]=(0,o.useState)(function(){const t=e.groups.filter((e=>null===e.parentId)).map((e=>e.id)),a={};return a.root={id:"root",hasChildren:t.length>0,children:t,isExpanded:!0},e.groups.forEach((t=>{a[`${t.id}`]=function(t){const a=e.groups.filter((e=>e.parentId===t.id)).map((e=>e.id));return{id:`${t.id}`,data:{title:t.name},isExpanded:a.length>0,hasChildren:a.length>0,children:a}}(t)})),{rootId:"root",items:a}}());return{tree:r,resourceGroupsIds:t,newGroups:n,isLoading:e.state.isLoading,onResourceGroupIdChanged:function(e,n){if(n){const n=[...t];n.push(e),a(n)}else a(t.filter((t=>t!==e)))},onTreeUpdated:function(e){i(e)},onGroupAdded:function(e){const t=`new-${n.length+1}`,a={id:t,name:e,parentId:null};l([...n,a]);const o=Object.assign({},r);o.items[t]={id:t,children:[],data:{title:e},isExpanded:!1,hasChildren:!1},o.items.root.children.push(t),i(o)},onResourceUpdated:function(){const a=[];return n.forEach((e=>{let t=null;Object.keys(r.items).forEach((a=>{r.items[a].children.includes(e.id)&&(t="root"===a?null:a)})),a.push(Object.assign(Object.assign({},e),{parentId:t}))})),e.state.onGroupsUpdated({id:e.resource.id,groupIds:t,addedGroups:a})}}}function f(e){const{t}=(0,i.useTranslation)(),{tree:a,resourceGroupsIds:n,isLoading:l,onResourceGroupIdChanged:r,onGroupAdded:c,onTreeUpdated:f,onResourceUpdated:p}=m({groups:e.resourceGroups,resource:e.resource,state:(0,o.useContext)(d.ManageResourcesContext)}),[h,b]=(0,o.useState)("");return o.default.createElement(u.ResourceEditSection,{isEditing:!0,title:t("Groups"),setIsEditing:e.onIsEditing,isLoading:l,onUpdate:p},o.default.createElement("form",{onSubmit:e=>{e.preventDefault(),""!==h.trim()&&(c(h),b(""))}},o.default.createElement("div",{className:"mt-1 mb-1 d-flex"},o.default.createElement("input",{type:"text",value:h,className:"form-control form-control-sm me-1",onChange:e=>b(e.target.value),required:!0,placeholder:t("GroupName"),"aria-label":t("GroupName")}),o.default.createElement("button",{type:"submit",className:"btn btn-light"},t("Add")))),o.default.createElement("div",{className:"resource-group-tree"},o.default.createElement(s.default,{tree:a,renderItem:({item:e,onExpand:a,onCollapse:l,provided:i,snapshot:s})=>{return o.default.createElement("div",Object.assign({ref:i.innerRef},i.draggableProps,i.dragHandleProps,{style:(u=s.isDragging,c=i.draggableProps.style,Object.assign({overflow:"auto",boxShadow:u?"0px 0px 5px 1px #ccc":"none"},c)),className:"resource-group-tree-item"}),o.default.createElement(o.default.Fragment,null,((e,t,a)=>e.children&&e.children.length>0?e.isExpanded?o.default.createElement("span",{role:"button",className:"bi bi-chevron-down resource-group-tree-navigation",onClick:()=>a(e.id)}):o.default.createElement("span",{role:"button",className:"bi bi-chevron-right resource-group-tree-navigation",onClick:()=>t(e.id)}):o.default.createElement("span",{role:"button",className:"bi bi-dot resource-group-tree-navigation"}))(e,a,l),o.default.createElement("div",null,e.data?e.data.title:""),!s.isDragging&&o.default.createElement("div",{className:"form-check"},o.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"resource-groupids-chk",defaultChecked:n.includes(e.id.toString()),onChange:t=>r(e.id.toString(),t.target.checked)}),o.default.createElement("label",{className:"form-check-label visually-hidden",htmlFor:"resource-groupids-chk"},t("Resource")))));var u,c},onExpand:e=>{f((0,s.mutateTree)(a,e,{isExpanded:!0}))},onCollapse:e=>{f((0,s.mutateTree)(a,e,{isExpanded:!1}))},onDragEnd:(e,t)=>{t&&f((0,s.moveItemOnTree)(a,e,t))},isDragEnabled:!0,isNestingEnabled:!0,offsetPerLevel:20})))}t.useResourceGroupsEdit=m,t.ResourceGroupsSection=function(e){const{resource:t,resourceGroups:a}=e,{t:n}=(0,i.useTranslation)(),[l,r]=(0,o.useState)(!1),s=(0,c.createIndexed)(a);function d(e){r(e)}function m(e){if(!e)return"";("string"==typeof e||e instanceof String)&&(e=Number.parseInt(e.toString()));const t=s[e];let a=t.name;return t.parentId&&(a=`${m(t.parentId)} > ${a}`),a}return l?o.default.createElement(f,{resource:t,resourceGroups:a,onIsEditing:d}):o.default.createElement(u.ResourceEditSection,{isEditing:l,title:n("Groups"),setIsEditing:d,isLoading:!1},o.default.createElement("div",null,t.resourceGroupIds.map((e=>o.default.createElement("div",{key:e},m(e)))),0===t.resourceGroupIds.length&&o.default.createElement("div",null,n("None"))))}},11966:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceImage=void 0;const o=r(a(67294)),i=a(45156),s=a(81468),u=a(51073),c=a(28194);t.ResourceImage=function(e){const t=(0,o.useContext)(u.AppSettingsContext),{image:a,isEditing:n,index:l}=e,r=(0,o.useRef)(null),[d,m]=(0,c.useFullscreenStatus)(r),{t:f}=(0,s.useTranslation)();return n?o.default.createElement(o.default.Fragment,null,o.default.createElement(i.Draggable,{key:a.name,draggableId:a.name,index:l},((e,n)=>{return o.default.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,e.dragHandleProps,{style:(n.isDragging,l=e.draggableProps.style,Object.assign({userSelect:"none"},l))}),o.default.createElement("div",{key:a.name,className:"image"},o.default.createElement("div",null,a.isNew&&o.default.createElement("img",{ref:r,src:a.src,alt:a.name,className:"img-thumbnail"}),!a.isNew&&o.default.createElement("img",{ref:r,src:`${t.uploadImagesPath}/${a.src}`,alt:a.name,className:"img-thumbnail"}))));var l})),o.default.createElement("div",{className:"center resource-image-remove"},o.default.createElement("button",{className:"btn btn-link me-1",onClick:m,title:f("ViewFullSizeImage")},o.default.createElement("span",{className:"bi bi-fullscreen"})),o.default.createElement("button",{className:"btn btn-link",onClick:()=>e.onRemove(a.name),title:f("Remove")},o.default.createElement("span",{className:"bi bi-trash delete icon"})))):o.default.createElement("div",{key:a.name,className:"image"},o.default.createElement("div",{onClick:m},a.isNew&&o.default.createElement("img",{ref:r,src:a.src,alt:a.name,className:"img-thumbnail"}),!a.isNew&&o.default.createElement("img",{ref:r,src:`${t.uploadImagesPath}/${a.src}`,alt:a.name,className:"img-thumbnail"})))}},89941:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useResourceImages=void 0;const n=a(67294);t.useResourceImages=function(e){const{files:t,allImages:a,onImagesChanged:l,urlMethods:r}=e;return(0,n.useEffect)((()=>()=>{t.forEach((e=>r.revokeObjectURL(e.preview)))}),[t]),{onCancelled:function(){l(a,[])},onImagesDropped:function(e){if(e.length+a.length>10)return;const n=[...t],o=[...a];e.forEach((e=>{Object.assign(e,{preview:r.createObjectURL(e)}),n.push(e),o.unshift({src:e.preview,name:e.name,isNew:!0})})),l(o,n)},onRemove:function(e){l(a.filter((t=>t.name!==e)),t.filter((t=>t.name!==e)))},onReorder:function(e,n){const r=[...a],[o]=r.splice(e,1);r.splice(n,0,o),l(r,t)}}}},94964:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceImages=t.useResourceImagesEdit=void 0;const i=r(a(67294)),s=a(45156),u=a(41389),c=a(81468),d=a(83231),m=a(96027),f=a(11966),p=a(7781),h=a(90145),b=a(28193),g=a(89941),v=a(68208);function E(e){const[t,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)(!1),[r,s]=(0,i.useState)([]),[u,c]=(0,i.useState)((0,d.getResourceImageViews)(e.resource.images)),{onCancelled:m,onReorder:f,onImagesDropped:p,onRemove:h}=(0,g.useResourceImages)({allImages:u,files:r,onImagesChanged:function(e,t){c(e),s(t)},urlMethods:e.urlMethods});return{files:r,isEditing:n,isSaving:t,allImages:u,onReorder:f,onImagesDropped:p,onRemove:h,onSaved:function(){return o(this,void 0,void 0,(function*(){a(!0),yield e.state.onImagesUpdated(e.resource.id,u.map((e=>e.name)),r),a(!1),l(!1)}))},onCancelled:function(){m(),l(!1)},onIsEditing:function(){l(!0)}}}t.useResourceImagesEdit=E,t.ResourceImages=function(e){const{allImages:t,isEditing:a,isSaving:n,onImagesDropped:l,onReorder:r,onRemove:o,onCancelled:d,onSaved:g,onIsEditing:y}=E({resource:e.resource,state:(0,i.useContext)(m.ManageResourcesContext),urlMethods:(0,v.getDefaultFileUrlMethods)()}),[C,N]=(0,i.useState)(!1),{t:O}=(0,c.useTranslation)();(0,h.useOnEscape)((()=>{d()}));const{getRootProps:S,getInputProps:_}=(0,u.useDropzone)({accept:{"image/*":[]},maxFiles:10,maxSize:2097152,minSize:1,onDropAccepted:e=>{N(!1),l(e)},onDropRejected:()=>{N(!0)}});return n?i.default.createElement("div",{className:"resource-image-row view"},i.default.createElement(b.Spinner,null)):a?i.default.createElement("div",null,i.default.createElement("div",{className:"resource-image-row edit"},i.default.createElement("div",Object.assign({},S({className:"dropzone resource-image-add"})),i.default.createElement("div",null,i.default.createElement("input",Object.assign({},_({capture:!1}))),i.default.createElement("span",{className:"bi bi-image"}),i.default.createElement("br",null),O("AddImage"))),i.default.createElement(s.DragDropContext,{onDragEnd:e=>{e.destination&&r(e.source.index,e.destination.index)}},i.default.createElement(s.Droppable,{droppableId:"droppable",direction:"horizontal"},((e,n)=>{return i.default.createElement("div",Object.assign({ref:e.innerRef,style:(l=n.isDraggingOver,{background:l?"lightblue":"",display:"flex",overflow:"auto"})},e.droppableProps),t.map(((e,t)=>i.default.createElement("div",{key:e.name},i.default.createElement(f.ResourceImage,{image:e,index:t,isEditing:a,onRemove:o})))),e.placeholder);var l})))),i.default.createElement("div",{className:"resource-image-action-row"},i.default.createElement("div",{className:"note"},C&&i.default.createElement("span",{className:"error d-block"},O("ResourceImageUploadError")),O("ResourceImageInstructions",{s1:"2"})),i.default.createElement("div",null,i.default.createElement(p.UpdateAndCancelButtons,{onCancel:d,onUpdate:g})))):i.default.createElement("div",{className:"resource-image-row view"},i.default.createElement("div",null,i.default.createElement("button",{className:"btn btn-link btn-icon",title:"Change Images",onClick:()=>y()},i.default.createElement("span",{className:"bi bi-image"}))),0===t.length&&i.default.createElement("div",{className:"align-self-center"},"No images"),t.map(((e,t)=>i.default.createElement(f.ResourceImage,{key:e.name,image:e,isEditing:a,index:t,onRemove:o}))))}},34700:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourcePermissionsSection=t.ResourcePermissionsEditSection=t.useResourcePermissionsEdit=void 0;const o=r(a(67294)),i=a(81468),s=r(a(23157)),u=a(38813),c=a(96027),d=a(69989),m=a(83231);function f(e){const[t,a]=(0,o.useState)([]),[n,l]=(0,o.useState)([]),[r,i]=(0,o.useState)([]),[s,u]=(0,o.useState)([]),[c,f]=(0,o.useState)(!0),[p,h]=(0,o.useState)(e.resource.autoPermission),b=(0,o.useMemo)((()=>t.filter((e=>!r.some((t=>e.id===t.id))||r.some((t=>e.id===t.id&&t.permissionType===d.PermissionType.Inherit))))),[r]),g=(0,o.useMemo)((()=>{const e=new Set(s.filter((e=>e.permissionType!==d.PermissionType.None)).map((e=>e.id)));return n.filter((t=>!e.has(t.id)))}),[s]);return(0,o.useEffect)((()=>{f(!0),e.state.loadResourcePermissions(e.resource.id).then((e=>{a(e.allUsers),l(e.allGroups),i(e.userPermissions),u(e.groupPermissions),f(!1)}))}),[]),{isLoading:e.state.isLoading||c,users:b,groups:g,usersWithPermission:function(){const e=[];return t.forEach((t=>{const a=r.find((e=>t.id===e.id&&e.permissionType!==d.PermissionType.Inherit));a&&e.push((0,m.getUserPermissionView)(t,a.permissionType))})),e.sort(((e,t)=>e.lastName===t.lastName?e.firstName.localeCompare(t.firstName):e.lastName.localeCompare(t.lastName)))}(),groupsWithPermission:function(){const e=[];return n.forEach((t=>{const a=s.find((e=>t.id===e.id&&e.permissionType!==d.PermissionType.None));a&&e.push((0,m.getGroupPermissionView)(t,a.permissionType))})),e.sort(((e,t)=>e.name.localeCompare(t.name)))}(),onResourceUpdated:function(){return e.state.onPermissionsUpdated({id:e.resource.id,groupPermissions:s,userPermissions:r,autoPermission:p})},onUserAdded:function(e){i([...r,{id:e.id,permissionType:d.PermissionType.Full}])},onUserRemoved:function(e){i(r.map((t=>t.id===e?{id:e,permissionType:d.PermissionType.Inherit}:t)))},onAllUsersRemoved:function(){i(r.map((e=>({id:e.id,permissionType:d.PermissionType.Inherit}))))},onAllUsersAdded:function(){const e=b;i(r.concat(e.map((e=>({id:e.id,permissionType:d.PermissionType.Full})))))},onUserPermissionChanged:function(e,t){i(r.map((a=>a.id===e?{id:e,permissionType:t}:a)))},onAllPermissionsChanged:function(e){i(r.map((t=>({id:t.id,permissionType:e}))))},onGroupAdded:function(e){u([...s,{id:e.id,permissionType:d.PermissionType.Full}])},onGroupRemoved:function(e){u([...s.filter((t=>t.id!==e)),{id:e,permissionType:d.PermissionType.None}])},onGroupPermissionChanged:function(e,t){u(s.map((a=>a.id===e?{id:e,permissionType:t}:a)))},onAllGroupPermissionsChanged:function(e){u(s.map((t=>({id:t.id,permissionType:e}))))},onAllGroupsAdded:function(){const e=g;u(s.concat(e.map((e=>({id:e.id,permissionType:d.PermissionType.Full})))))},onAllGroupsRemoved:function(){u([])},onAutomaticPermissionChanged:function(e){h(e)}}}function p(e){const{resource:t,onIsEditing:a}=e,{t:n}=(0,i.useTranslation)(),[l,r]=(0,o.useState)(0),[m,p]=(0,o.useState)(null),[h,b]=(0,o.useState)(null),{isLoading:g,users:v,groups:E,usersWithPermission:y,groupsWithPermission:C,onUserAdded:N,onUserRemoved:O,onAllUsersRemoved:S,onAllUsersAdded:_,onAllPermissionsChanged:k,onResourceUpdated:R,onUserPermissionChanged:A,onGroupAdded:M,onGroupRemoved:w,onGroupPermissionChanged:x,onAllGroupPermissionsChanged:P,onAllGroupsAdded:I,onAllGroupsRemoved:D,onAutomaticPermissionChanged:T}=f({resource:t,state:(0,o.useContext)(c.ManageResourcesContext)});function j(e){return e===l?"block":"none"}function U(e){return e===l?"active":""}return o.default.createElement(u.ResourceEditSection,{isEditing:!0,title:n("Permissions"),setIsEditing:a,isLoading:g,onUpdate:R},o.default.createElement("div",{className:"mt-1 mb-2"},o.default.createElement("div",{className:"form-check"},o.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"auto-permission-chk",onChange:e=>T(e.target.checked),defaultChecked:t.autoPermission}),o.default.createElement("label",{className:"form-check-label",htmlFor:"auto-permission-chk"},o.default.createElement(i.Trans,{i18nKey:"ResourcePermissionAutoGranted"})))),o.default.createElement("div",null,o.default.createElement("ul",{className:"nav nav-tabs mb-1"},o.default.createElement("li",{className:"nav-item"},o.default.createElement("button",{className:`nav-link ${U(0)}`,"aria-current":"page",onClick:()=>r(0)},n("Users")," ",o.default.createElement("span",{className:"badge bg-secondary"},y.length))),o.default.createElement("li",{className:"nav-item"},o.default.createElement("button",{className:`nav-link ${U(1)}`,onClick:()=>r(1)},n("Groups")," ",o.default.createElement("span",{className:"badge bg-secondary"},C.length)))),o.default.createElement("div",{style:{display:j(0)}},o.default.createElement("div",{className:"d-flex"},o.default.createElement("div",{className:"flex-grow-1"},o.default.createElement(s.default,{isSearchable:!0,isMulti:!1,isClearable:!0,options:v,components:{Option:e=>o.default.createElement(s.components.Option,Object.assign({},e),o.default.createElement("div",null,e.data.firstName," ",e.data.lastName),o.default.createElement("div",null,e.data.email))},getOptionLabel:e=>e.fullName,getOptionValue:e=>e.id.toString(),onChange:e=>{p(e)},value:m})),o.default.createElement("div",{className:"btn-group"},o.default.createElement("button",{className:"btn btn-light ms-1",onClick:()=>{m&&(N(m),p(null))}},n("Add")),o.default.createElement("button",{type:"button",className:"btn btn-light dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown",id:"add-all-users-dropdown","aria-haspopup":"true","aria-expanded":"false","aria-label":"More add options"},o.default.createElement("span",{className:"bi bi-three-dots-vertical"})),o.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"add-all-users-dropdown"},o.default.createElement("button",{className:"dropdown-item",onClick:()=>_()},n("AddAllUsers"))))),0===y.length&&o.default.createElement("div",{className:"center"},n("NoUsersHavePermission")),y.length>0&&o.default.createElement("div",{className:"resource-permissions"},o.default.createElement("div",{className:"resource-permissions-header d-flex align-items-center mb-1 mt-1"},o.default.createElement("div",{className:"flex-grow-1"},o.default.createElement("strong",null,n("User"))),o.default.createElement("div",null,o.default.createElement("div",{className:"dropdown"},o.default.createElement("button",{className:"btn btn-link dropdown-toggle btn-sm",type:"button",id:"users-bulk-permissions-dropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},n("Access")),o.default.createElement("ul",{className:"dropdown-menu","aria-labelledby":"users-bulk-permissions-dropdown"},o.default.createElement("li",{className:"dropdown-title"},o.default.createElement("span",null,n("ChangeAllAccess"))),o.default.createElement("li",null,o.default.createElement("button",{className:"dropdown-item",onClick:()=>k(d.PermissionType.Full)},n("Reserve"))),o.default.createElement("li",null,o.default.createElement("button",{className:"dropdown-item",onClick:()=>k(d.PermissionType.View)},n("View"))),o.default.createElement("li",null,o.default.createElement("button",{className:"dropdown-item",onClick:()=>k(d.PermissionType.None)},n("None")))))),o.default.createElement("div",null,o.default.createElement("button",{className:"btn btn-link btn-sm",title:n("RemoveAllPermissions"),onClick:()=>S()},o.default.createElement("span",{className:"bi bi-x-circle"})))),y.map((e=>o.default.createElement("div",{key:e.id,className:"d-flex mb-1"},o.default.createElement("div",{className:"flex-grow-1"},e.firstName," ",e.lastName,o.default.createElement("br",null),e.email),o.default.createElement("div",null,o.default.createElement("label",{htmlFor:`permission-type-${e.id}`,className:"visually-hidden reservations-filter"},n("PermissionLevel")),o.default.createElement("select",{id:`permission-type-${e.id}`,value:e.permissionType,className:"form-select form-select-sm",onChange:t=>A(e.id,Number.parseInt(t.target.value))},o.default.createElement("option",{value:d.PermissionType.Full},n("Reserve")),o.default.createElement("option",{value:d.PermissionType.View},n("View")),o.default.createElement("option",{value:d.PermissionType.None},n("None")))),o.default.createElement("div",null,o.default.createElement("button",{className:"btn btn-link btn-sm",title:n("InheritPermissions"),onClick:()=>O(e.id)},o.default.createElement("span",{className:"bi bi-x-circle"})))))))),o.default.createElement("div",{style:{display:j(1)}},o.default.createElement("div",{className:"d-flex"},o.default.createElement("div",{className:"flex-grow-1"},o.default.createElement(s.default,{isSearchable:!0,isMulti:!1,isClearable:!0,options:E,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),onChange:e=>{b(e)},value:h})),o.default.createElement("div",{className:"btn-group"},o.default.createElement("button",{className:"btn btn-light ms-1",onClick:()=>{h&&(M(h),b(null))}},n("Add")),o.default.createElement("button",{type:"button",className:"btn btn-light dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown",id:"add-all-groups-dropdown","aria-haspopup":"true","aria-expanded":"false","aria-label":"More add options"},o.default.createElement("span",{className:"bi bi-three-dots-vertical"})),o.default.createElement("div",{className:"dropdown-menu","aria-labelledby":"add-all-groups-dropdown"},o.default.createElement("button",{className:"dropdown-item",onClick:()=>I()},n("AddAllGroups"))))),0===C.length&&o.default.createElement("div",{className:"center"},n("NoGroupsHavePermission")),C.length>0&&o.default.createElement("div",{className:"resource-permissions"},o.default.createElement("div",{className:"resource-permissions-header d-flex align-items-center mb-1 mt-1"},o.default.createElement("div",{className:"flex-grow-1"},o.default.createElement("strong",null,n("Group"))),o.default.createElement("div",null,o.default.createElement("div",{className:"dropdown"},o.default.createElement("button",{className:"btn btn-link dropdown-toggle btn-sm",type:"button",id:"groups-bulk-permissions-dropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},n("Access")),o.default.createElement("ul",{className:"dropdown-menu","aria-labelledby":"groups-bulk-permissions-dropdown"},o.default.createElement("li",{className:"dropdown-title"},o.default.createElement("span",null,n("ChangeAllGroupAccess"))),o.default.createElement("li",null,o.default.createElement("button",{className:"dropdown-item",onClick:()=>P(d.PermissionType.Full)},n("Reserve"))),o.default.createElement("li",null,o.default.createElement("button",{className:"dropdown-item",onClick:()=>P(d.PermissionType.View)},n("View")))))),o.default.createElement("div",null,o.default.createElement("button",{className:"btn btn-link btn-sm",title:n("RemoveAllPermissions"),onClick:()=>D()},o.default.createElement("span",{className:"bi bi-x-circle"})))),C.map((e=>o.default.createElement("div",{key:e.id,className:"d-flex mb-1"},o.default.createElement("div",{className:"flex-grow-1"},e.name),o.default.createElement("div",null,o.default.createElement("label",{htmlFor:`permission-type-group-${e.id}`,className:"visually-hidden reservations-filter"},n("PermissionLevel")),o.default.createElement("select",{id:`permission-type-group-${e.id}`,value:e.permissionType,className:"form-select form-select-sm",onChange:t=>x(e.id,Number.parseInt(t.target.value))},o.default.createElement("option",{value:d.PermissionType.Full},n("Reserve")),o.default.createElement("option",{value:d.PermissionType.View},n("View")))),o.default.createElement("div",null,o.default.createElement("button",{className:"btn btn-link btn-sm",title:n("RemovePermissions"),onClick:()=>w(e.id)},o.default.createElement("span",{className:"bi bi-x-circle"}))))))))))}t.useResourcePermissionsEdit=f,t.ResourcePermissionsEditSection=p,t.ResourcePermissionsSection=function(e){const{resource:t}=e,{t:a}=(0,i.useTranslation)(),[n,l]=(0,o.useState)(!1);return n?o.default.createElement(p,{resource:t,onIsEditing:l}):o.default.createElement(u.ResourceEditSection,{isEditing:n,title:a("Permissions"),setIsEditing:l,isLoading:!1},o.default.createElement("div",null,!t.autoPermission&&o.default.createElement(i.Trans,{i18nKey:"ResourcePermissionNotAutoGranted"}),t.autoPermission&&o.default.createElement(i.Trans,{i18nKey:"ResourcePermissionAutoGranted"})),o.default.createElement("span",null,a("ChangeUserAndGroupPermissions")))}},13352:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceRelationshipsSection=t.useResourceRelationshipsEdit=void 0;const i=r(a(67294)),s=a(81468),u=o(a(23157)),c=a(38813),d=a(96027);function m(e){const{resource:t,resources:a,state:n}=e,[l,r]=(0,i.useState)(t.relationshipsRequired.map((e=>e.id))),[o,s]=(0,i.useState)(t.relationshipsRequiredOneWay.map((e=>e.id))),[u,c]=(0,i.useState)(t.relationshipsExcluded.map((e=>e.id))),[d,m]=(0,i.useState)(t.relationshipsExcludedAtTime.map((e=>e.id)));function f(e){return a.filter((a=>a.id!==t.id&&(e.includes(a.id)||!l.includes(a.id)&&!o.includes(a.id)&&!u.includes(a.id)&&!d.includes(a.id))))}return{isLoading:n.isLoading,required:l,requiredOneWay:o,excluded:u,excludedAtTime:d,requiredOptions:f(l),excludedOptions:f(u),excludedAtTimeOptions:f(d),requiredOneWayOptions:f(o),onRequiredChanged:function(e){r(e.map((e=>e.id)))},onRequiredOneWayChanged:function(e){s(e.map((e=>e.id)))},onExcludedChanged:function(e){c(e.map((e=>e.id)))},onExcludedAtTimeChanged:function(e){m(e.map((e=>e.id)))},onResourceUpdated:function(){return n.onRelationshipsUpdated({id:t.id,excluded:u,excludedAtTime:d,required:l,requiredOneWay:o})}}}function f(e){const{resource:t,resources:a,onIsEditing:n}=e,{t:l}=(0,s.useTranslation)(),{isLoading:r,requiredOptions:o,requiredOneWayOptions:f,required:p,requiredOneWay:h,excluded:b,excludedAtTime:g,excludedOptions:v,excludedAtTimeOptions:E,onRequiredChanged:y,onRequiredOneWayChanged:C,onExcludedChanged:N,onExcludedAtTimeChanged:O,onResourceUpdated:S}=m({resource:t,resources:a,state:(0,i.useContext)(d.ManageResourcesContext)});return i.default.createElement(c.ResourceEditSection,{isEditing:!0,title:l("ResourceRelationships"),setIsEditing:n,isLoading:r,onUpdate:S},i.default.createElement("div",null,i.default.createElement("div",null,l("MustBeBookedWith"),i.default.createElement(u.default,{options:o,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),isMulti:!0,defaultValue:o.filter((e=>p.includes(e.id))),onChange:e=>y(e)})),i.default.createElement("div",null,l("MustBeBookedWithOneWay"),i.default.createElement(u.default,{options:f,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),isMulti:!0,defaultValue:f.filter((e=>h.includes(e.id))),onChange:e=>C(e)})),i.default.createElement("div",null,l("CannotBeBookedWith"),i.default.createElement(u.default,{options:v,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),isMulti:!0,defaultValue:v.filter((e=>b.includes(e.id))),onChange:e=>N(e)})),i.default.createElement("div",null,l("CannotBeBookedAtSameTime"),i.default.createElement(u.default,{options:E,getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),isMulti:!0,defaultValue:E.filter((e=>g.includes(e.id))),onChange:e=>O(e)}))))}t.useResourceRelationshipsEdit=m,t.ResourceRelationshipsSection=function(e){const{resource:t,resources:a}=e,{t:n}=(0,s.useTranslation)(),[l,r]=(0,i.useState)(!1);function o(e){r(e)}return l?i.default.createElement(f,{resource:t,resources:a,onIsEditing:o}):i.default.createElement(c.ResourceEditSection,{isEditing:l,title:n("ResourceRelationships"),setIsEditing:o,isLoading:!1},i.default.createElement("div",null,i.default.createElement("div",{className:"resource-property"},i.default.createElement("span",{className:"resource-property-label"},n("MustBeBookedWith")),i.default.createElement("span",{className:"resource-property-value"},0===t.relationshipsRequired.length&&i.default.createElement("span",null,"None"),t.relationshipsRequired.map((e=>e.name)).join(", "))),i.default.createElement("div",{className:"resource-property"},i.default.createElement("span",{className:"resource-property-label"},n("MustBeBookedWithOneWay")),i.default.createElement("span",{className:"resource-property-value"},0===t.relationshipsRequiredOneWay.length&&i.default.createElement("span",null,"None"),t.relationshipsRequiredOneWay.map((e=>e.name)).join(", "))),i.default.createElement("div",{className:"resource-property"},i.default.createElement("span",{className:"resource-property-label"},n("CannotBeBookedWith")),i.default.createElement("span",{className:"resource-property-value"},0===t.relationshipsExcluded.length&&i.default.createElement("span",null,"None"),t.relationshipsExcluded.map((e=>e.name)).join(", "))),i.default.createElement("div",{className:"resource-property"},i.default.createElement("span",{className:"resource-property-label"},n("CannotBeBookedAtSameTime")),i.default.createElement("span",{className:"resource-property-value"},0===t.relationshipsExcludedAtTime.length&&i.default.createElement("span",null,"None"),t.relationshipsExcludedAtTime.map((e=>e.name)).join(", ")))))}},93858:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceStatusEdit=t.useResourceStatusEdit=void 0;const i=r(a(67294)),s=a(81468),u=o(a(27976)),c=a(69989),d=a(83039),m=a(83231),f=a(96027),p=a(7781);function h(e){var t;const[a,n]=(0,i.useState)(e.resource.statusId),[l,r]=(0,i.useState)(e.resource.statusReasonId),[o,s]=(0,i.useState)(),[u,c]=(0,i.useState)(!1),[d,f]=(0,i.useState)(!1),[p,h]=(0,i.useState)(30),[b,g]=(0,i.useState)(""),v=(0,i.useMemo)((()=>(0,m.getResourceStatusViews)(e.state)),[e.state.statuses]);return{statusId:a,statuses:v,reasons:(null===(t=v.find((e=>e.id===a)))||void 0===t?void 0:t.reasons)||[],reasonId:l||void 0,changingStatus:u,notifyUsers:d,notifyDays:p,notificationMessage:b,allowEmailSend:e.resource.statusId!==a||e.resource.statusReasonId!==l,onStatusChange:function(e){n(e)},onReasonChange:function(e){r(e||null),e||s(void 0)},onReasonCreated:function(e){s(e)},onChangingStatus:function(t){c(t),t||(n(e.resource.statusId),r(e.resource.statusReasonId),f(!1),h(30),g(""),s(void 0))},onNotifyUsersChange:function(e){f(e)},onNotifyDaysChange:function(e){h(e<1?1:e>180?180:e)},onNotificationMessageChanged:function(e){g(e)},onStatusUpdated:function(){const t={resourceId:e.resource.id,statusId:a,reasonId:l||void 0,notifyUsers:d,notificationMessage:d?b.trim():void 0,notificationDays:d?p:void 0,reasonCreated:o||void 0};e.state.onStatusUpdated(t),c(!1)}}}t.useResourceStatusEdit=h,t.ResourceStatusEdit=function(e){const{statusId:t,statuses:a,reasonId:n,reasons:l,notifyUsers:r,notifyDays:o,allowEmailSend:m,changingStatus:b,onReasonChange:g,onStatusChange:v,onChangingStatus:E,onNotifyUsersChange:y,onNotifyDaysChange:C,onNotificationMessageChanged:N,onStatusUpdated:O,onReasonCreated:S}=h({resource:e.resource,state:(0,i.useContext)(f.ManageResourcesContext)}),{t:_}=(0,s.useTranslation)(),k=(0,i.useRef)(null);return(0,d.useClickOutside)(k,(()=>E(!1))),i.default.createElement("div",{className:`resource-status ${function(){switch(t){case c.ResourceStatusOptions.Unavailable:return"offline";case c.ResourceStatusOptions.Hidden:return"hidden";default:return"online"}}()}`},i.default.createElement("button",{className:"btn btn-clear btn-icon",onClick:()=>E(!b)},i.default.createElement("i",{className:"bi "+(t===c.ResourceStatusOptions.Hidden?"bi-eye-slash":"bi-power")})),b&&i.default.createElement("div",{ref:k,className:"change-status"},i.default.createElement("div",null,i.default.createElement("label",{htmlFor:"resource-status-select"},_("Status")),i.default.createElement("select",{id:"resource-status-select",className:"form-select",defaultValue:t,onChange:e=>v(Number.parseInt(e.target.value))},a.map((e=>i.default.createElement("option",{key:e.id,value:e.id},e.name))))),i.default.createElement("div",{className:"mt-2"},i.default.createElement("label",{htmlFor:"reason-input"},_("Reason")),i.default.createElement(u.default,{inputId:"reason-input",isClearable:!0,defaultValue:l.map((e=>({value:e.id,label:e.description}))).find((e=>e.value===n)),onChange:(e,t)=>{"select-option"!==t.action&&"deselect-option"!==t.action&&"clear"!==t.action||g(null==e?void 0:e.value),"create-option"===t.action&&S(null==e?void 0:e.label)},options:l.map((e=>({value:e.id,label:e.description})))})),m&&i.default.createElement("div",{className:"mt-3"},i.default.createElement("div",{className:"form-check"},i.default.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"notify-users-chk",onChange:e=>y(e.target.checked)}),i.default.createElement("label",{className:"form-check-label",htmlFor:"notify-users-chk"},_("NotifyUsers")))),r&&i.default.createElement("div",{className:"mt-3"},i.default.createElement("label",{htmlFor:"notify-days"},_("AllUsersWhoHaveAReservationInTheNext")),i.default.createElement("div",{className:"input-group"},i.default.createElement("input",{type:"number",min:1,max:180,id:"notify-days",className:"form-control",value:o,onChange:e=>C(Number.parseInt(e.target.value))}),i.default.createElement("span",{className:"input-group-text"},_("days"))),i.default.createElement("div",null,i.default.createElement("label",{htmlFor:"resource-status-message"},_("Message")),i.default.createElement("textarea",{id:"resource-status-message",className:"form-control",onChange:e=>N(e.target.value)}))),i.default.createElement("div",{className:"change-status-footer"},i.default.createElement(p.UpdateAndCancelButtons,{onCancel:()=>E(!1),onUpdate:()=>O(),updateText:_(r?"UpdateAndSend":"Update")}))))}},53198:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceStatusesComponent=t.ResourceStatusComponent=t.useResourceStatusesComponentHooks=void 0;const i=r(a(67294)),s=a(81468),u=a(96027),c=a(83231),d=a(69989),m=a(68442),f=a(28193),p=a(41773),h=a(50208),b=a(60519);function g(e){const{state:t}=e,[a,n]=(0,i.useState)(!1);return{isProcessing:a,statuses:(0,c.getResourceStatusViews)(t),onReasonAdded:function(e,a){return o(this,void 0,void 0,(function*(){n(!0),yield t.onStatusReasonAdded(e,a),n(!1)}))},onReasonUpdated:function(e,a){return o(this,void 0,void 0,(function*(){n(!0),yield t.onStatusReasonUpdated(e,a),n(!1)}))},onReasonRemoved:function(e){return o(this,void 0,void 0,(function*(){n(!0),yield t.onStatusReasonDeleted(e),n(!1)}))}}}function v(e){const{status:t}=e,{t:a}=(0,s.useTranslation)(),[n,l]=(0,i.useState)(""),[r,o]=(0,i.useState)(null),[u,c]=(0,i.useState)("");function f(){o(null)}return i.default.createElement("div",{className:"resource-status-item"},i.default.createElement("div",{className:"resource-status-item-header"},i.default.createElement("div",null,t.name," ",i.default.createElement("span",{className:function(e){switch(e){case d.ResourceStatusOptions.Unavailable:return"offline";case d.ResourceStatusOptions.Hidden:return"hidden";default:return"online"}}(t.id)},i.default.createElement("span",{className:"bi "+(p=t.id,p===d.ResourceStatusOptions.Hidden?"bi-eye-slash":"bi-power")})))),i.default.createElement("div",null,i.default.createElement("form",{onSubmit:a=>{a.preventDefault(),e.onReasonAdded(t.id,{id:0,description:n}).then((()=>l(""))).catch((e=>console.error(e)))}},i.default.createElement("div",{className:"row align-items-end"},i.default.createElement("div",{className:"col-6"},i.default.createElement("label",{htmlFor:`add-status-${t.id}`},a("Reason")),i.default.createElement("input",{required:!0,value:n,id:`add-status-${t.id}`,type:"text",className:"form-control form-control-sm",onChange:e=>l(e.target.value)})),i.default.createElement("div",{className:"col-6"},i.default.createElement("button",{type:"submit",className:"btn btn-link text-decoration-none"},a("Add")," ",i.default.createElement("span",{className:"bi bi-plus-circle"}))))),0===t.reasons.length&&i.default.createElement("div",null,"No status reasons"),t.reasons.map((n=>function(n){return r===n.id?i.default.createElement("form",{key:n.id,onSubmit:a=>{a.preventDefault(),e.onReasonUpdated(t.id,{id:r||0,description:u}).then((()=>o(null))).catch((e=>console.error(e)))}},i.default.createElement("div",{className:"row align-items-end"},i.default.createElement("label",{htmlFor:`reason-edit-${r}`,className:"visually-hidden"},a("Reason")),i.default.createElement("div",{className:"col-6"},i.default.createElement("input",{type:"text",className:"form-control form-control-sm",value:u,onChange:e=>c(e.target.value),autoFocus:!0})),i.default.createElement("div",{className:"col-6"},i.default.createElement(b.CancelButton,{onClick:f}),i.default.createElement(m.SubmitButton,{text:a("Update")})))):i.default.createElement("div",{key:n.id,className:"row align-items-end"},i.default.createElement("div",{className:"col-6"},n.description),i.default.createElement("div",{className:"col-6"},i.default.createElement("button",{className:"btn btn-link",title:a("Edit"),onClick:()=>{return e=n.id,o(e),void c((null===(a=t.reasons.find((t=>t.id===e)))||void 0===a?void 0:a.description)||"");var e,a}},i.default.createElement("span",{className:"bi bi-pencil-square"})),i.default.createElement("button",{className:"btn btn-link",title:a("Delete"),onClick:()=>e.onReasonRemoveToggled(t.id,n.id)},i.default.createElement("span",{className:"bi bi-trash delete icon"}))))}(n)))));var p}t.useResourceStatusesComponentHooks=g,t.ResourceStatusComponent=v,t.ResourceStatusesComponent=function(){var e,t;const{t:a}=(0,s.useTranslation)(),n=(0,i.useContext)(u.ManageResourcesContext),[l,r]=(0,i.useState)(!1),[o,c]=(0,i.useState)(null),[d,m]=(0,i.useState)(null),{statuses:E,isProcessing:y,onReasonAdded:C,onReasonUpdated:N,onReasonRemoved:O}=g({state:(0,i.useContext)(u.ManageResourcesContext)});if(n.isLoading&&!y)return i.default.createElement(f.Spinner,null);function S(e,t){r(!l),c(e),m(t)}return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:"default-box default-box-1-padding mb-2",id:"resource-status-list"},i.default.createElement("div",{className:"default-box-header"},a("ManageResourceStatus")),i.default.createElement("div",{className:"default-box-content margin-bottom-15 row"},i.default.createElement("div",{className:"col-xs-12"},E.map((e=>i.default.createElement(v,{key:e.id,status:e,onReasonAdded:C,onReasonUpdated:N,onReasonRemoveToggled:S})))))),i.default.createElement(p.Modal,{isOpen:l,onToggle:()=>r(!1),title:a("DeleteItemModalTitle",{itemName:null===(t=null===(e=E.find((e=>e.id===o)))||void 0===e?void 0:e.reasons.find((e=>e.id===d)))||void 0===t?void 0:t.description})},i.default.createElement(p.ModalBody,null,a("DeleteWarning")),i.default.createElement(p.ModalFooter,null,i.default.createElement(b.CancelButton,{onClick:()=>r(!1)}),i.default.createElement(h.DeleteButton,{onClick:()=>{O(d||0).then((()=>{r(!1),c(null),m(null)}))}}))))}},30108:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceTypesComponent=t.EditResourceType=t.AddResourceType=t.useResourceTypesComponentHooks=void 0;const i=r(a(67294)),s=a(81468),u=a(96027),c=a(83231),d=a(34297),m=a(75712),f=a(68442),p=a(28193),h=a(78929),b=a(7781),g=a(41773),v=a(50208),E=a(60519),y=a(51073);function C(e){const{state:t}=e;return{types:(0,c.getResourceTypeViews)(t),attributes:(0,c.getTypeAttributeViews)(t),onTypeAdded:function(e){return o(this,void 0,void 0,(function*(){return t.onResourceTypeAdded(e)}))},onTypeRemoved:function(e){return o(this,void 0,void 0,(function*(){return t.onResourceTypeDeleted(e)}))},onTypeUpdated:function(e){return o(this,void 0,void 0,(function*(){return t.onResourceTypeUpdated(e)}))}}}function N(e){const{t}=(0,s.useTranslation)(),{attributes:a}=e,[n,l]=(0,i.useState)([]),[r,o]=(0,i.useState)(""),[u,c]=(0,i.useState)(""),p=(0,i.useContext)(y.AppSettingsContext);function h(e){const t=n.find((t=>t.id===e)),l=a.find((t=>t.id===e));return!!l&&(0,m.checkIsAttributeValid)(l,t)}return i.default.createElement("form",{onSubmit:function(t){t.preventDefault(),""!==r.trim()&&a.every((e=>h(e.id)))&&e.onTypeAdded({id:0,name:r,description:u,attributeValues:n}).then((()=>{o(""),c(""),l([])})).catch((e=>console.error(e)))}},i.default.createElement("div",{className:"default-box default-box-1-padding mb-2"},i.default.createElement("div",{className:"default-box-header"},t("AddResourceType")),i.default.createElement("div",{className:"default-box-content margin-bottom-15 row"},i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-xs-12 col-sm-6 clearable"},i.default.createElement("label",{htmlFor:"add-type-name",className:"form-label"},t("Name")),i.default.createElement("input",{value:r,id:"add-type-name",type:"text",required:!0,className:"form-control",onChange:e=>{return t=e.target.value,void o(t);var t}}),i.default.createElement("i",{className:"clearable__clear",style:{display:""===r?"none":"block"},onClick:()=>o("")},"×")),i.default.createElement("div",{className:"col-xs-12 col-sm-6 clearable"},i.default.createElement("label",{htmlFor:"add-type-description",className:"form-label"},t("Description")),i.default.createElement("input",{id:"add-type-description",type:"text",className:"form-control",onChange:e=>{return t=e.target.value,void c(t);var t}}),i.default.createElement("i",{className:"clearable__clear",style:{display:""===u?"none":"block"},onClick:()=>c("")},"×"))),i.default.createElement("div",{className:"row mt-3"},a.filter((e=>0===e.entityIds.length)).map((e=>{var t;return i.default.createElement("div",{className:"col-xs-12 col-sm-6",key:e.id},i.default.createElement(d.CustomAttributeEdit,{attribute:e,value:null===(t=n.find((t=>t.id===e.id)))||void 0===t?void 0:t.value,isValid:h(e.id),onChange:t=>function(e,t){const a=n.filter((e=>e.id!==t));a.push({id:t,value:e||""}),l(a)}(t,e.id),dateTimeFormat:p.dateTimeFormat,firstDayOfWeek:p.firstDayOfWeek}))})))),i.default.createElement("div",{className:"default-box-footer"},i.default.createElement(f.SubmitButton,{text:t("AddResourceType")}))))}function O(e){const{t}=(0,s.useTranslation)(),{type:a,attributes:n}=e,[l,r]=(0,i.useState)(!1),[o,u]=(0,i.useState)(a.name),[c,f]=(0,i.useState)(a.description),[p,g]=(0,i.useState)(a.attributeValues),v=(0,i.useContext)(y.AppSettingsContext);function E(e){const t=p.find((t=>t.id===e)),a=n.find((t=>t.id===e));return!!a&&(0,m.checkIsAttributeValid)(a,t)}return l?i.default.createElement("tr",null,i.default.createElement("td",null,i.default.createElement("div",{className:"clearable"},i.default.createElement("label",{htmlFor:"add-type-name",className:"form-label"},t("Name")),i.default.createElement("input",{value:o,id:"add-type-name",type:"text",required:!0,className:"form-control",onChange:e=>{return t=e.target.value,void u(t);var t}}),i.default.createElement("i",{className:"clearable__clear",style:{display:""===o?"none":"block"},onClick:()=>u("")},"×"))),i.default.createElement("td",null,i.default.createElement("div",{className:"clearable"},i.default.createElement("label",{htmlFor:"add-type-description",className:"form-label"},t("Description")),i.default.createElement("input",{id:"add-type-description",type:"text",className:"form-control",onChange:e=>{return t=e.target.value,void f(t);var t}}),i.default.createElement("i",{className:"clearable__clear",style:{display:""===c?"none":"block"},onClick:()=>f("")},"×"))),i.default.createElement("td",null,i.default.createElement("div",{className:"attribute-list"},n.filter((e=>0===e.entityIds.length||e.entityIds.includes(a.id))).map((e=>{var t;return i.default.createElement(d.CustomAttributeEdit,{attribute:e,value:null===(t=p.find((t=>t.id===e.id)))||void 0===t?void 0:t.value,isValid:E(e.id),onChange:t=>function(e,t){const a=p.filter((e=>e.id!==t));a.push({id:t,value:e||""}),g(a)}(t,e.id),dateTimeFormat:v.dateTimeFormat,firstDayOfWeek:v.firstDayOfWeek,key:e.id})})))),i.default.createElement("td",{className:"vertical-align-middle text-end"},i.default.createElement(b.UpdateAndCancelButtons,{onCancel:function(){r(!1)},onUpdate:function(){""!==o.trim()&&n.every((e=>E(e.id)))&&e.onTypeUpdated({id:a.id,name:o,description:c,attributeValues:p}).then((()=>{r(!1)})).catch((e=>console.error(e)))}}))):i.default.createElement("tr",null,i.default.createElement("td",null,a.name),i.default.createElement("td",null,a.description),i.default.createElement("td",null,i.default.createElement("div",{className:"attribute-list"},n.filter((e=>0===e.entityIds.length||e.entityIds.includes(a.id))).map((e=>{var t;return i.default.createElement(h.CustomAttribute,{attribute:e,value:null===(t=a.attributeValues.find((t=>t.id===e.id)))||void 0===t?void 0:t.value,key:e.id})})))),i.default.createElement("td",{className:"vertical-align-middle text-end"},i.default.createElement("button",{onClick:function(){r(!l)},className:"btn btn-link",title:t("Edit")},i.default.createElement("i",{className:"bi-pencil-square btn-icon me-0"})),i.default.createElement("button",{onClick:()=>e.onDeleteToggled(a.id),className:"btn btn-link",title:t("Delete")},i.default.createElement("i",{className:"bi-trash btn-icon delete icon me-0"}))))}t.useResourceTypesComponentHooks=C,t.AddResourceType=N,t.EditResourceType=O,t.ResourceTypesComponent=function(){var e;const{t}=(0,s.useTranslation)(),a=(0,i.useContext)(u.ManageResourcesContext),{types:n,attributes:l,onTypeAdded:r,onTypeUpdated:o,onTypeRemoved:c}=C({state:(0,i.useContext)(u.ManageResourcesContext)}),[d,m]=(0,i.useState)(!1),[f,h]=(0,i.useState)(null);if(a.isLoading)return i.default.createElement(p.Spinner,null);function b(e){m(!d),h(e)}return i.default.createElement(i.default.Fragment,null,i.default.createElement(N,{attributes:l.filter((e=>0===e.entityIds.length)),onTypeAdded:r}),i.default.createElement("div",{className:"default-box default-box-1-padding mb-2",id:"resource-type-list"},i.default.createElement("div",{className:"default-box-header"},t("ManageResourceTypes")),i.default.createElement("div",{className:"default-box-content margin-bottom-15 row"},i.default.createElement("div",{className:"col-xs-12"},i.default.createElement("table",{className:"table"},i.default.createElement("thead",null,i.default.createElement("tr",null,i.default.createElement("td",null,t("Name")),i.default.createElement("td",null,t("Description")),i.default.createElement("td",null,t("Attributes")),i.default.createElement("td",null," "))),i.default.createElement("tbody",null,n.map((e=>i.default.createElement(O,{key:e.id,type:e,attributes:l,onTypeUpdated:o,onDeleteToggled:b}))))),0===n.length&&i.default.createElement("div",null,"No resource types")))),i.default.createElement(g.Modal,{isOpen:d,onToggle:()=>m(!1),title:t("DeleteItemModalTitle",{itemName:null===(e=n.find((e=>e.id===f)))||void 0===e?void 0:e.name})},i.default.createElement(g.ModalBody,null,t("DeleteWarning")),i.default.createElement(g.ModalFooter,null,i.default.createElement(E.CancelButton,{onClick:()=>m(!1)}),i.default.createElement(v.DeleteButton,{onClick:()=>{c(f||0).then((()=>{m(!1),h(null)})).catch((e=>console.error(e)))}}))))}},29575:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.UnchangedCheckbox=t.useBulkUpdateUnchangedHandlerHooks=t.useNullBulkUpdateUnchangedHandlerHook=void 0;const o=r(a(67294)),i=a(81468);t.useNullBulkUpdateUnchangedHandlerHook=function(){return{enabled:!1,isUnchanged:function(){return!1},onUnchangedToggle:function(){}}},t.useBulkUpdateUnchangedHandlerHooks=function(e){const[t,a]=(0,o.useState)(e.defaultUnchanged);return{enabled:!0,isUnchanged:function(e){return t.includes(e)},onUnchangedToggle:function(n,l){a(l?[...t,n]:t.filter((e=>e!==n))),e.onUnchangedToggle(n,l)}}},t.UnchangedCheckbox=function({field:e,unchangedHandler:t}){const{t:a}=(0,i.useTranslation)();return t.enabled?o.default.createElement("div",{className:"form-check"},o.default.createElement("label",{htmlFor:`${e}-unchanged`},a("Unchanged")),o.default.createElement("input",{id:`${e}-unchanged`,className:"form-check-input",type:"checkbox",checked:t.isUnchanged(e),onChange:a=>t.onUnchangedToggle(e,a.target.checked)})):o.default.createElement(o.default.Fragment,null)}},3377:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageResourcesApi=void 0;const l=a(81902);class r extends l.Api{constructor(e,t,a){super(e,a),this.apiEndpoint=`admin/${t}`}loadManageResources(){return n(this,void 0,void 0,(function*(){return this.get(this.apiEndpoint,"load")}))}updateResourceStatus(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"updateStatus",e)}))}updateResourceImages(e,t,a){return n(this,void 0,void 0,(function*(){const n=new FormData;return n.append("id",e.toString()),t.forEach(((e,t)=>{n.append(`images[${t}]`,e)})),a.forEach(((e,t)=>{n.append(`files[${t}]`,e)})),this.postFiles(this.apiEndpoint,"updateImages",n)}))}updateResourceCommonFields(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"updateCommon",e)}))}updateResourceAccessFields(e){return this.post(this.apiEndpoint,"updateAccess",e)}updateResourceDisplayFields(e){return this.post(this.apiEndpoint,"updateDisplay",e)}updateResourceDurationFields(e){return this.post(this.apiEndpoint,"updateDuration",e)}updateResourceCreditsFields(e){return this.post(this.apiEndpoint,"updateCredits",e)}updateResourceRelationshipFields(e){return this.post(this.apiEndpoint,"updateRelationships",e)}updateResourceGroupFields(e){return this.post(this.apiEndpoint,"updateGroups",e)}updateResourcePermissions(e){return this.post(this.apiEndpoint,"updatePermissions",e)}getResourcePermissions(e){return this.get("admin/manage_resources.php","getPermissions",{rid:e})}updateResourceAttributes(e){return this.post(this.apiEndpoint,"updateAttributes",e)}addResource(e){return this.post(this.apiEndpoint,"add",e)}deleteResource(e){return this.post(this.apiEndpoint,"delete",{id:e})}deleteResources(e){return this.post(this.apiEndpoint,"bulkDelete",{ids:e})}importResources(e){return this.post(this.apiEndpoint,"import",{resources:e})}updateResourceGroupTree(e){return this.post(this.apiEndpoint,"updateGroupTree",{tree:e})}addResourceType(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"addResourceType",e)}))}updateResourceType(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"updateResourceType",e)}))}deleteResourceType(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"deleteResourceType",{id:e})}))}addResourceStatusReason(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"addResourceStatusReason",e)}))}updateResourceStatusReason(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"updateResourceStatusReason",e)}))}deleteResourceStatusReason(e){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"deleteResourceStatusReason",{id:e})}))}copyResource(e,t){return n(this,void 0,void 0,(function*(){return this.post(this.apiEndpoint,"copyResource",{resourceId:e,resourceName:t})}))}}t.ManageResourcesApi=r},13891:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageResourcesAppComponent=t.ManageResourcesApp=void 0;const i=r(a(67294)),s=o(a(23768)),u=a(88554),c=a(33070),d=a(96027),m=a(51073),f=a(33041),p=a(15127),h=a(65169),b=a(4457),g=a(30108),v=a(53198),E=a(3377),y=a(28193);function C(){const{hash:e,changeHash:t}=(0,u.useHashChange)();if((0,i.useContext)(m.AppSettingsContext).isLoading)return i.default.createElement(y.Spinner,null);switch(""===e&&t(p.NavigationPaths.Home),e){case p.NavigationPaths.Types:return i.default.createElement(g.ResourceTypesComponent,null);case p.NavigationPaths.Add:return i.default.createElement(h.AddResourceComponent,null);case p.NavigationPaths.Groups:return i.default.createElement(b.ResourceGroupsComponent,null);case p.NavigationPaths.Statuses:return i.default.createElement(v.ResourceStatusesComponent,null);default:return i.default.createElement(c.ManageResourcesComponent,null)}}t.ManageResourcesApp=C,t.ManageResourcesAppComponent=function(e){(0,s.default)({lang:e.lang,basePath:e.path,version:e.version});const t=new E.ManageResourcesApi(e.path,e.apiEndpoint,e.csrf);return i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(m.AppSettingsProvider,Object.assign({},e),i.default.createElement(d.ManageResourcesProvider,{api:t},i.default.createElement(f.ManageResourcesHeader,null),i.default.createElement(C,null))))}},96027:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManageResourcesProvider=t.ManageResourcesContext=t.useManageResourcesContext=void 0;const i=r(a(67294)),s=a(94559),u=a(83231);function c(e){const[t,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)((0,s.createLookupState)([])),[r,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)((0,s.createLookupState)([])),[f,p]=(0,i.useState)((0,s.createLookupState)([])),[h,b]=(0,i.useState)((0,s.createLookupState)([])),[g,v]=(0,i.useState)((0,s.createLookupState)([])),[E,y]=(0,i.useState)((0,s.createLookupState)([])),[C,N]=(0,i.useState)((0,s.createLookupState)([])),[O,S]=(0,i.useState)((0,s.createLookupState)([])),[_,k]=(0,i.useState)((0,u.getDefaultResourceFilter)());return(0,i.useEffect)((()=>{a(!0),e.loadManageResources().then((e=>(S((0,s.createLookupState)(e.resourceGroups)),m((0,s.createLookupState)(e.attributes)),p((0,s.createLookupState)(e.resourceTypesAttributes)),b((0,s.createLookupState)(e.groups)),v((0,s.createLookupState)(e.resourceTypes)),y((0,s.createLookupState)(e.schedules)),N((0,s.createLookupState)(e.resourceStatuses)),l((0,s.createLookupState)(e.resources)),c(e.isAdminGroupRequired),a(!1),e))).catch((t=>{a(!1),e.logError({action:"useManageResourcesContext load",error:t})}))}),[]),{isLoading:t,resources:n,attributes:d,resourceTypesAttributes:f,groups:h,types:g,schedules:E,statuses:C,resourceGroups:O,filter:_,isAdminGroupRequired:r,onStatusUpdated:function(t){a(!0),e.updateResourceStatus(t).then((e=>{const t={allIds:n.allIds,byId:Object.assign(Object.assign({},n.byId),{[e.resource.id]:e.resource})};return N((0,s.createLookupState)(e.resourceStatuses)),l(t),a(!1),e})).catch((t=>{a(!1),e.logError({action:"onStatusUpdated",context:{},error:t})}))},onImagesUpdated:function(t,r,i){return o(this,void 0,void 0,(function*(){try{a(!0);const o=yield e.updateResourceImages(t,r,i),s={allIds:n.allIds,byId:Object.assign(Object.assign({},n.byId),{[o.id]:o})};l(s),a(!1)}catch(e){a(!1)}}))},onCommonUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateResourceCommonFields(t),o={allIds:n.allIds,byId:Object.assign(Object.assign({},n.byId),{[r.resource.id]:r.resource})};v((0,s.createLookupState)(r.resourceTypes)),l(o),a(!1)}catch(e){a(!1)}}))},onAccessUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateResourceAccessFields(t),o={allIds:n.allIds,byId:Object.assign(Object.assign({},n.byId),{[r.id]:r})};l(o),a(!1)}catch(e){a(!1)}}))},onDisplayUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateResourceDisplayFields(t),o={allIds:n.allIds,byId:Object.assign(Object.assign({},n.byId),{[r.id]:r})};l(o),a(!1)}catch(n){e.logError({error:n,action:"onDisplayUpdated",context:{id:t.id}}),a(!1)}}))},onDurationUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateResourceDurationFields(t),o={allIds:n.allIds,byId:Object.assign(Object.assign({},n.byId),{[r.id]:r})};l(o),a(!1)}catch(e){a(!1)}}))},onCreditsUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateResourceCreditsFields(t),o={allIds:n.allIds,byId:Object.assign(Object.assign({},n.byId),{[r.id]:r})};l(o),a(!1)}catch(e){a(!1)}}))},onRelationshipsUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateResourceRelationshipFields(t),o=Object.assign({},n.byId);r.resources.forEach((e=>{o[e.id]=e}));const i={allIds:n.allIds,byId:o};l(i),a(!1)}catch(e){a(!1)}}))},onGroupsUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateResourceGroupFields(t),o={allIds:n.allIds,byId:Object.assign(Object.assign({},n.byId),{[r.resource.id]:r.resource})};l(o),S((0,s.createLookupState)(r.resourceGroups)),a(!1)}catch(e){a(!1)}}))},onPermissionsUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0),yield e.updateResourcePermissions(t);const r={allIds:n.allIds,byId:Object.assign(Object.assign({},n.byId),{[t.id]:Object.assign(Object.assign({},n.byId[t.id]),{autoPermission:t.autoPermission})})};l(r),a(!1)}catch(e){console.error(e),a(!1)}}))},onAttributesUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateResourceAttributes(t),o={allIds:n.allIds,byId:Object.assign(Object.assign({},n.byId),{[r.id]:r})};l(o),a(!1)}catch(e){console.error(e),a(!1)}}))},onFilterChanged:function(e){k(e)},onResourceAdded:function(t,r,i){return o(this,void 0,void 0,(function*(){try{a(!0);let o=yield e.addResource(t);r.length>0&&i.length>0&&(o=yield e.updateResourceImages(o.id,r,i));const s={allIds:[...n.allIds,o.id],byId:Object.assign(Object.assign({},n.byId),{[o.id]:o})};l(s),l(s),a(!1)}catch(e){console.error(e),a(!1)}}))},onResourceDeleted:function(t){return o(this,void 0,void 0,(function*(){try{a(!0),yield e.deleteResource(t);const r=Object.assign({},n.byId);delete r[t];const o={allIds:n.allIds.filter((e=>e!==t)),byId:r};l(o),a(!1)}catch(e){console.error(e),a(!1)}}))},onResourcesDeleted:function(t){return o(this,void 0,void 0,(function*(){try{a(!0),yield e.deleteResources(t);const r=Object.assign({},n.byId);t.forEach((e=>{delete r[e]}));const o={allIds:n.allIds.filter((e=>!t.includes(e))),byId:r};l(o),a(!1)}catch(e){console.error(e),a(!1)}}))},onResourcesImported:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.importResources(t),o=[...n.allIds],i=Object.assign({},n.byId);r.forEach((e=>{i[e.id]=e,o.includes(e.id)||o.push(e.id)})),l({allIds:o,byId:i}),a(!1)}catch(e){console.error(e),a(!1)}}))},onResourceGroupTreeUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const r=yield e.updateResourceGroupTree(t),o=Object.assign({},n.byId);r.resources.forEach((e=>{o[e.id]=e}));const i={allIds:n.allIds,byId:o};l(i),S((0,s.createLookupState)(r.resourceGroups)),a(!1)}catch(e){console.error(e),a(!1)}}))},onResourceTypeAdded:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const n=yield e.addResourceType(t),l=[...g.allIds,n.id],r=Object.assign(Object.assign({},g.byId),{[n.id]:n});v({allIds:l,byId:r}),a(!1)}catch(e){console.error(e),a(!1)}}))},onResourceTypeUpdated:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const n=yield e.updateResourceType(t),l={allIds:g.allIds,byId:Object.assign(Object.assign({},g.byId),{[n.id]:n})};v(l),a(!1)}catch(e){console.error(e),a(!1)}}))},onResourceTypeDeleted:function(t){return o(this,void 0,void 0,(function*(){try{a(!0),yield e.deleteResourceType(t);const n=Object.assign({},g.byId);delete n[t];const l={allIds:g.allIds.filter((e=>e!==t)),byId:n};v(l),a(!1)}catch(e){console.error(e),a(!1)}}))},onStatusReasonAdded:function(t,n){return o(this,void 0,void 0,(function*(){try{a(!0);const l=yield e.addResourceStatusReason({statusId:t,id:n.id,description:n.description});N((0,s.createLookupState)(l)),a(!1)}catch(e){console.error(e),a(!1)}}))},onStatusReasonUpdated:function(t,n){return o(this,void 0,void 0,(function*(){try{a(!0);const l=yield e.updateResourceStatusReason({statusId:t,id:n.id,description:n.description});N((0,s.createLookupState)(l)),a(!1)}catch(e){console.error(e),a(!1)}}))},onStatusReasonDeleted:function(t){return o(this,void 0,void 0,(function*(){try{a(!0);const n=yield e.deleteResourceStatusReason(t);N((0,s.createLookupState)(n)),a(!1)}catch(e){console.error(e),a(!1)}}))},onResourceCopied:function(t,r){return o(this,void 0,void 0,(function*(){try{a(!0);const o=yield e.copyResource(t,r),i=[...n.allIds];i.push(o.id);const s=Object.assign(Object.assign({},n.byId),{[o.id]:o});l({allIds:i,byId:s}),a(!1)}catch(e){console.error(e),a(!1)}}))},loadResourcePermissions:function(t){return o(this,void 0,void 0,(function*(){return e.getResourcePermissions(t)}))}}}t.useManageResourcesContext=c,t.ManageResourcesContext=(0,i.createContext)(function(){const e=()=>{},t=()=>Promise.resolve();return{isLoading:!1,isAdminGroupRequired:!1,resources:{byId:(0,s.createIndexed)([]),allIds:[]},attributes:{byId:(0,s.createIndexed)([]),allIds:[]},resourceTypesAttributes:{byId:(0,s.createIndexed)([]),allIds:[]},groups:{byId:(0,s.createIndexed)([]),allIds:[]},types:{byId:(0,s.createIndexed)([]),allIds:[]},schedules:{byId:(0,s.createIndexed)([]),allIds:[]},statuses:{byId:(0,s.createIndexed)([]),allIds:[]},resourceGroups:{byId:(0,s.createIndexed)([]),allIds:[]},filter:(0,u.getDefaultResourceFilter)(),onFilterChanged:e,onStatusUpdated:e,onImagesUpdated:t,onCommonUpdated:t,onAccessUpdated:t,onDisplayUpdated:t,onDurationUpdated:t,onCreditsUpdated:t,onRelationshipsUpdated:t,onGroupsUpdated:t,loadResourcePermissions:()=>Promise.reject(),onPermissionsUpdated:t,onAttributesUpdated:t,onResourceAdded:t,onResourceDeleted:t,onResourcesDeleted:t,onResourcesImported:t,onResourceGroupTreeUpdated:t,onResourceTypeAdded:t,onResourceTypeUpdated:t,onResourceTypeDeleted:t,onStatusReasonAdded:t,onStatusReasonUpdated:t,onStatusReasonDeleted:t,onResourceCopied:t}}()),t.ManageResourcesProvider=function(e){const a=c(e.api);return i.default.createElement(t.ManageResourcesContext.Provider,{value:a},e.children)}},43433:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceCsv=void 0;const n=a(69989),l=a(83231),r=a(56731);t.ResourceCsv=class{asGroupList(e){return e.map((e=>this.state.resourceGroups.byId[e].name)).join(",")}asCreditApplicability(e){return e===n.CreditApplicabilityOptions.PerReservation?"per reservation":"per slot"}getExportFormat(){const e=(0,l.getAttributeViews)(this.state).filter((e=>0===e.entityIds.length)),t=[{label:"name",data:e=>r.CsvUtils.asString(e.name),parse:e=>{if(""===e)throw new Error("name cannot be empty");return{name:e}}},{label:"status",data:e=>r.CsvUtils.asString(e.statusName),parse:e=>{if(!["Available","Unavailable","Hidden"].includes(e))throw new Error("status must be Available, Unavailable, or Hidden");let t=n.ResourceStatusOptions.Available;return"Unavailable"===e&&(t=n.ResourceStatusOptions.Unavailable),"Hidden"===e&&(t=n.ResourceStatusOptions.Hidden),{statusId:t,statusName:e}}},{label:"schedule",data:e=>r.CsvUtils.asString(e.scheduleName),parse:e=>{const t=this.state.schedules.allIds.find((t=>this.state.schedules.byId[t].name.toLowerCase()===e.toLowerCase()));if(!t)throw new Error("schedule is invalid");return{scheduleId:t,scheduleName:e}}},{label:"resource type",data:e=>r.CsvUtils.asString(e.typeName),parse:e=>{if(!e)return{typeId:void 0,typeName:void 0};const t=this.state.types.allIds.find((t=>this.state.types.byId[t].name.toLowerCase()===e.toLowerCase()));if(!t)throw new Error("resource type is invalid");return{typeId:t,typeName:e}}},{label:"sort order",data:e=>r.CsvUtils.asString(e.sortOrder),parse:e=>!e||Number.isNaN(Number.parseInt(e))?{sortOrder:0}:{sortOrder:Number.parseInt(e)}},{label:"location",data:e=>r.CsvUtils.asString(e.location),parse:e=>({location:e})},{label:"contact",data:e=>r.CsvUtils.asString(e.contact),parse:e=>({contact:e})},{label:"description",data:e=>r.CsvUtils.asString(e.description),parse:e=>({description:e})},{label:"notes",data:e=>r.CsvUtils.asString(e.notes),parse:e=>({notes:e})},{label:"resource administrator",data:e=>r.CsvUtils.asString(e.adminGroupName),parse:e=>{if(!e)return{adminGroupId:void 0,adminGroupName:void 0};const t=this.state.groups.allIds.find((t=>this.state.groups.byId[t].name.toLowerCase()===e.toLowerCase()));if(!t)throw new Error("resource administrator is invalid");return{adminGroupId:t,adminGroupName:e}}},{label:"resource color",data:e=>r.CsvUtils.asString(e.color),parse:e=>({color:e})},{label:"reservation minimum length",data:e=>r.CsvUtils.asInterval(e.minDuration),parse:e=>{try{return{minDuration:r.CsvUtils.fromInterval(e)}}catch(e){throw new Error("reservation minimum length is not in the correct format. Must be #d#h#m")}}},{label:"reservation maximum length",data:e=>r.CsvUtils.asInterval(e.maxDuration),parse:e=>{try{return{maxDuration:r.CsvUtils.fromInterval(e)}}catch(e){throw new Error("reservation maximum length is not in the correct format. Must be #d#h#m")}}},{label:"reservation minimum notice add",data:e=>r.CsvUtils.asInterval(e.noticeAdd),parse:e=>{try{return{noticeAdd:r.CsvUtils.fromInterval(e)}}catch(e){throw new Error("reservation minimum notice add is not in the correct format. Must be #d#h#m")}}},{label:"reservation minimum notice update",data:e=>r.CsvUtils.asInterval(e.noticeUpdate),parse:e=>{try{return{noticeUpdate:r.CsvUtils.fromInterval(e)}}catch(e){throw new Error("reservation minimum notice update is not in the correct format. Must be #d#h#m")}}},{label:"reservation minimum notice delete",data:e=>r.CsvUtils.asInterval(e.noticeDelete),parse:e=>{try{return{noticeDelete:r.CsvUtils.fromInterval(e)}}catch(e){throw new Error("reservation minimum notice delete is not in the correct format. Must be #d#h#m")}}},{label:"reservation maximum notice",data:e=>r.CsvUtils.asInterval(e.noticeEnd),parse:e=>{try{return{noticeEnd:r.CsvUtils.fromInterval(e)}}catch(e){throw new Error("reservation maximum notice is not in the correct format. Must be #d#h#m")}}},{label:"buffer time",data:e=>r.CsvUtils.asInterval(e.buffer),parse:e=>{try{return{buffer:r.CsvUtils.fromInterval(e)}}catch(e){throw new Error("buffer time is not in the correct format. Must be #d#h#m")}}},{label:"reservations can be made across days",data:e=>r.CsvUtils.asBoolean(e.allowCrossDay),parse:e=>({allowCrossDay:r.CsvUtils.fromBoolean(e)})},{label:"resource groups",data:e=>this.asGroupList(e.resourceGroupIds),parse:e=>{if(!e)return{resourceGroupIds:[]};const t=e.split(",").map((e=>e.trim())),a=[];return t.forEach((e=>{const t=this.state.resourceGroups.allIds.find((t=>this.state.resourceGroups.byId[t].name.toLowerCase()===e.toLowerCase()));if(!t)throw new Error("resource groups are invalid");a.push(t)})),{resourceGroupIds:a}}},{label:"permission is automatically granted",data:e=>r.CsvUtils.asBoolean(e.autoPermission),parse:e=>({autoPermission:r.CsvUtils.fromBoolean(e)})},{label:"reservations must be approved",data:e=>r.CsvUtils.asBoolean(e.requiresApproval),parse:e=>({requiresApproval:r.CsvUtils.fromBoolean(e)})},{label:"capacity",data:e=>r.CsvUtils.asString(e.capacity),parse:e=>({capacity:r.CsvUtils.fromInt(e)})},{label:"minimum participants",data:e=>r.CsvUtils.asString(e.minParticipants),parse:e=>({minParticipants:r.CsvUtils.fromInt(e)})},{label:"requires check in/out",data:e=>r.CsvUtils.asBoolean(e.requiresCheckin),parse:e=>({requiresCheckin:r.CsvUtils.fromBoolean(e)})},{label:"autorelease minutes",data:e=>r.CsvUtils.asString(e.autoReleaseMinutes),parse:e=>({autoReleaseMinutes:e?r.CsvUtils.fromInt(e):void 0})},{label:"autorelease action",data:e=>r.CsvUtils.asString(e.autoReleaseActionName),parse:e=>{if(!["","Delete","End"].includes(e))throw new Error("autorelease action must be empty, Delete or End");let t=null;return"Delete"===e&&(t=n.ResourceReleaseAction.Delete),"End"===e&&(t=n.ResourceReleaseAction.End),{autoReleaseAction:t,autoReleaseActionName:e}}},{label:"extend if missed checkin",data:e=>r.CsvUtils.asBoolean(e.enableAutoExtend),parse:e=>({enableAutoExtend:r.CsvUtils.fromBoolean(e)})},{label:"credits (off peak)",data:e=>r.CsvUtils.asString(e.creditsOffPeak),parse:e=>({creditsOffPeak:r.CsvUtils.fromFloat(e)})},{label:"credits (peak)",data:e=>r.CsvUtils.asString(e.creditsPeak),parse:e=>({creditsPeak:r.CsvUtils.fromFloat(e)})},{label:"credit applicability",data:e=>this.asCreditApplicability(e.creditsCalculated),parse:e=>({creditsCalculated:"per reservation"===e.toLowerCase()?n.CreditApplicabilityOptions.PerReservation:n.CreditApplicabilityOptions.PerSlot})},{label:"credits are charged for blocked slots",data:e=>r.CsvUtils.asBoolean(e.creditsChargedForBlockedSlots),parse:e=>({creditsChargedForBlockedSlots:r.CsvUtils.fromBoolean(e)})},{label:"maximum concurrent reservations",data:e=>r.CsvUtils.asString(e.maxConcurrent),parse:e=>({maxConcurrent:e?r.CsvUtils.fromInt(e):null})},{label:"slot label",data:e=>r.CsvUtils.asString(e.slotLabel),parse:e=>({slotLabel:e})},{label:"must be booked with (two way)",data:e=>this.asResourceList(e.relationshipsRequired),parse:e=>{try{return{relationshipsRequired:this.fromResourceList(e)}}catch(e){throw new Error("must be booked with (two way) contains invalid resources")}}},{label:"must be booked with (one way)",data:e=>this.asResourceList(e.relationshipsRequiredOneWay),parse:e=>{try{return{relationshipsRequiredOneWay:this.fromResourceList(e)}}catch(e){throw new Error("must be booked with (one way) contains invalid resources")}}},{label:"cannot be booked with",data:e=>this.asResourceList(e.relationshipsExcluded),parse:e=>{try{return{relationshipsExcluded:this.fromResourceList(e)}}catch(e){throw new Error("cannot be booked with contains invalid resources")}}},{label:"cannot be booked at the same time",data:e=>this.asResourceList(e.relationshipsExcludedAtTime),parse:e=>{try{return{relationshipsExcludedAtTime:this.fromResourceList(e)}}catch(e){throw new Error("cannot be booked at the same time contains invalid resources")}}},{label:"only admins can check in/out",data:e=>r.CsvUtils.asBoolean(e.checkinLimitedToAdmins),parse:e=>({checkinLimitedToAdmins:r.CsvUtils.fromBoolean(e)})}],a=[];return e.forEach((e=>{t.push({label:e.label,data:t=>{var a;return(null===(a=t.keyedAttributeValues[e.id])||void 0===a?void 0:a.value)||""},parse:t=>(a.push(r.CsvUtils.fromCustomAttribute(e,t)),{attributeValues:a})})})),t}constructor(e){this.state=e}parseRow(e){const t=this.getExportFormat(),a=Object.keys(e),n=t.filter((e=>!a.includes(e.label))).map((e=>`${e.label} is missing from the CSV file`));let l={};return t.forEach((t=>{try{const a=t.parse(e[t.label]);l=Object.assign(l,a)}catch(e){n.push(e.message)}})),{errors:n,item:n.length>0?null:l}}fromResourceList(e){if(!e)return[];const t=e.split(",").map((e=>e.trim())),a=[];return t.forEach((e=>{const t=this.state.resources.allIds.find((t=>this.state.resources.byId[t].name.toLowerCase()===e.toLowerCase()));if(!t)throw new Error("resource list is invalid");a.push({id:t,name:e})})),a}asResourceList(e){return e.map((e=>e.name)).join(",")}}},83231:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilteredResources=t.getGroupPermissionView=t.getUserPermissionView=t.getResourceImageViews=t.getDefaultResourceFilter=t.getAdminResourceView=t.getAdminResourceViews=t.getResourceGroupViews=t.getResourceStatusViews=t.getResourceAdminGroupViews=t.getResourceTypeViews=t.getScheduleViews=t.getTypeAttributeViews=t.getAttributeViews=void 0;const n=a(69989),l=a(94559);function r(e,t,a,r,o,i){return Object.assign(Object.assign({},e),{scheduleName:(null==t?void 0:t.name)||"",typeName:(null==a?void 0:a.name)||"",adminGroupName:(null==r?void 0:r.name)||"",autoReleaseActionName:null===e.autoReleaseAction?"":e.autoReleaseAction===n.ResourceReleaseAction.Delete?"Delete":"End",keyedAttributeValues:(0,l.createIndexed)(e.attributeValues),relationshipsRequired:e.relationships.required.map((e=>{var t;return{id:e,name:null===(t=o[e])||void 0===t?void 0:t.name}})),relationshipsRequiredOneWay:e.relationships.requiredOneWay.map((e=>{var t;return{id:e,name:null===(t=o[e])||void 0===t?void 0:t.name}})),relationshipsExcluded:e.relationships.excluded.map((e=>{var t;return{id:e,name:null===(t=o[e])||void 0===t?void 0:t.name}})),relationshipsExcludedAtTime:e.relationships.excludedAtTime.map((e=>{var t;return{id:e,name:null===(t=o[e])||void 0===t?void 0:t.name}})),statusName:(null==i?void 0:i.name)||""})}t.getAttributeViews=function(e){return(0,l.lookupStateToArray)(e.attributes)},t.getTypeAttributeViews=function(e){return(0,l.lookupStateToArray)(e.resourceTypesAttributes)},t.getScheduleViews=function(e){return(0,l.lookupStateToArray)(e.schedules)},t.getResourceTypeViews=function(e){return(0,l.lookupStateToArray)(e.types)},t.getResourceAdminGroupViews=function(e){return(0,l.lookupStateToArray)(e.groups)},t.getResourceStatusViews=function(e){return(0,l.lookupStateToArray)(e.statuses)},t.getResourceGroupViews=function(e){return(0,l.lookupStateToArray)(e.resourceGroups)},t.getAdminResourceViews=function(e){const t=e.resources.allIds.map((t=>{const a=e.resources.byId[t];return r(a,e.schedules.byId[a.scheduleId],e.types.byId[a.typeId],a.adminGroupId?e.groups.byId[a.adminGroupId]:void 0,e.resources.byId,e.statuses.byId[a.statusId])}));return t.sort(((e,t)=>e.sortOrder===t.sortOrder?e.name.localeCompare(t.name):e.sortOrder-t.sortOrder)),t},t.getAdminResourceView=r,t.getDefaultResourceFilter=function(){return{resourceIds:[],scheduleIds:[],resourceTypeIds:[],customAttributeFilters:[],resourceStatusIds:[],automaticPermissions:void 0,requiresApproval:void 0,requiresCheckin:void 0,allowConcurrent:void 0,resourceName:void 0}},t.getResourceImageViews=function(e){return e.map((e=>({src:e,name:e,isNew:!1})))},t.getUserPermissionView=function(e,t){return{fullName:e.fullName,email:e.email,firstName:e.firstName,id:e.id,lastName:e.lastName,permissionType:t,groupIds:[],reservationColor:e.reservationColor}},t.getGroupPermissionView=function(e,t){return{id:e.id,name:e.name,permissionType:t}},t.getFilteredResources=function(e,t){return e.filter((e=>(0===t.resourceIds.length||t.resourceIds.includes(e.id))&&(void 0===t.resourceName||e.name.toLowerCase().includes(t.resourceName.toLowerCase()))&&(0===t.scheduleIds.length||t.scheduleIds.includes(e.scheduleId))&&(0===t.resourceTypeIds.length||t.resourceTypeIds.includes(e.typeId))&&(0===t.resourceStatusIds.length||t.resourceStatusIds.includes(e.statusId))&&(void 0===t.allowConcurrent||t.allowConcurrent===e.allowConcurrent)&&(void 0===t.requiresApproval||t.requiresApproval===e.requiresApproval)&&(void 0===t.requiresCheckin||t.requiresCheckin===e.requiresCheckin)&&(void 0===t.automaticPermissions||t.automaticPermissions===e.autoPermission)&&(0===t.customAttributeFilters.length||function(e){return t.customAttributeFilters.every((t=>{const a=e.keyedAttributeValues[t.id];if(t.comparison===n.ComparisonType.Empty)return void 0===a||""===a.value;if(t.comparison===n.ComparisonType.Equals)return void 0!==a&&!!t.value.some((e=>a.value.toLowerCase()===e.toLowerCase()));if(t.comparison===n.ComparisonType.Contains)return void 0!==a&&!!t.value.some((e=>a.value.includes(e)));if(t.comparison===n.ComparisonType.GreaterThan){if(void 0===a)return!1;const e=Date.parse(t.value[0]),n=Date.parse(a.value);return!Number.isNaN(e)&&!Number.isNaN(n)&&new Date(n)>new Date(e)}if(t.comparison===n.ComparisonType.LessThan){if(void 0===a)return!1;const e=Date.parse(t.value[0]),n=Date.parse(a.value);return!Number.isNaN(e)&&!Number.isNaN(n)&&new Date(n)<new Date(e)}return!0}))}(e))))}},70053:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReportDays=void 0;const l=n(a(67294)),r=a(81468),o=a(69989);t.ReportDays=function(e){const{t}=(0,r.useTranslation)(),a="btn btn-outline-secondary ms-2";function n(t){return e.days.includes(t)}function i(t,a){a?e.onDaysChanged([...e.days,t]):e.onDaysChanged(e.days.filter((e=>e!==t)))}return e.frequency!==o.ReportFrequency.Weekly?l.default.createElement(l.default.Fragment,null):l.default.createElement("div",{className:"row m-0 mt-3"},l.default.createElement("label",{className:"form-label"},"On"),l.default.createElement("div",null,l.default.createElement("input",{type:"checkbox",className:"btn-check",id:"repeat-sunday",checked:n(0),onChange:e=>i(0,e.target.checked)}),l.default.createElement("label",{className:"btn btn-outline-secondary ms-0",htmlFor:"repeat-sunday"},l.default.createElement("span",{className:"d-none d-sm-inline"},t("DaySundayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},t("DaySundaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:"repeat-monday",checked:n(1),onChange:e=>i(1,e.target.checked)}),l.default.createElement("label",{className:a,htmlFor:"repeat-monday"},l.default.createElement("span",{className:"d-none d-sm-inline"},t("DayMondayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},t("DayMondaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:"repeat-tuesday",checked:n(2),onChange:e=>i(2,e.target.checked)}),l.default.createElement("label",{className:a,htmlFor:"repeat-tuesday"},l.default.createElement("span",{className:"d-none d-sm-inline"},t("DayTuesdayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},t("DayTuesdaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:"repeat-wednesday",checked:n(3),onChange:e=>i(3,e.target.checked)}),l.default.createElement("label",{className:a,htmlFor:"repeat-wednesday"},l.default.createElement("span",{className:"d-none d-sm-inline"},t("DayWednesdayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},t("DayWednesdaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:"repeat-thursday",checked:n(4),onChange:e=>i(4,e.target.checked)}),l.default.createElement("label",{className:a,htmlFor:"repeat-thursday"},l.default.createElement("span",{className:"d-none d-sm-inline"},t("DayThursdayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},t("DayThursdaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:"repeat-friday",checked:n(5),onChange:e=>i(5,e.target.checked)}),l.default.createElement("label",{className:a,htmlFor:"repeat-friday"},l.default.createElement("span",{className:"d-none d-sm-inline"},t("DayFridayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},t("DayFridaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:"repeat-saturday",checked:n(6),onChange:e=>i(6,e.target.checked)}),l.default.createElement("label",{className:a,htmlFor:"repeat-saturday"},l.default.createElement("span",{className:"d-none d-sm-inline"},t("DaySaturdayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},t("DaySaturdaySingle")))),0===e.days.length&&l.default.createElement("div",{className:"form-error"},t("AtLeastOneDayMustBeSelected")))}},99362:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReportEmails=void 0;const o=r(a(67294)),i=a(81468);t.ReportEmails=function(e){const{t}=(0,i.useTranslation)(),[a,n]=(0,o.useState)("");return o.default.createElement("div",{className:"row m-0 mt-3"},o.default.createElement("label",{className:"form-label"},t("SendTo")),e.emails.map((t=>o.default.createElement("div",{key:t},o.default.createElement("span",null,t),o.default.createElement("button",{className:"btn btn-link ms-2 icon delete",onClick:()=>{return a=t,void e.onChangeEmails(e.emails.filter((e=>e!==a)));var a}},o.default.createElement("span",{className:"bi bi-x-circle"}))))),o.default.createElement("form",{onSubmit:t=>{t.preventDefault(),a.length>0&&(e.onChangeEmails([...e.emails,a.trim()]),n(""))},className:"form-inline"},o.default.createElement("div",{className:"d-flex"},o.default.createElement("input",{type:"email",className:"form-control",placeholder:t("EmailAddress"),value:a,onChange:e=>{return t=e.target.value,void n(t);var t}}),o.default.createElement("button",{type:"submit",className:"btn btn-link ms-2"},o.default.createElement("span",{className:"bi bi-plus-circle"})))),0===e.emails.length&&o.default.createElement("div",{className:"form-error"},t("AtLeastOneEmailMustBeAdded")))}},32294:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReportMonthDay=void 0;const l=n(a(67294)),r=a(81468),o=a(69989);t.ReportMonthDay=function(e){const{t}=(0,r.useTranslation)();return e.frequency!==o.ReportFrequency.Monthly?l.default.createElement(l.default.Fragment,null):l.default.createElement("div",{className:"row m-0 mt-3"},l.default.createElement("label",{className:"form-label",htmlFor:"report-month-day"},t("ScheduleReportOnThe")),l.default.createElement("div",{className:"input-group auto-width"},l.default.createElement("select",{id:"report-month-day",className:"form-select",value:e.day,onChange:t=>e.onMonthDayChanged(Number.parseInt(t.target.value))},l.default.createElement("option",{value:"1"},"1"),l.default.createElement("option",{value:"2"},"2"),l.default.createElement("option",{value:"3"},"3"),l.default.createElement("option",{value:"4"},"4"),l.default.createElement("option",{value:"5"},"5"),l.default.createElement("option",{value:"6"},"6"),l.default.createElement("option",{value:"7"},"7"),l.default.createElement("option",{value:"8"},"8"),l.default.createElement("option",{value:"9"},"9"),l.default.createElement("option",{value:"10"},"10"),l.default.createElement("option",{value:"11"},"11"),l.default.createElement("option",{value:"12"},"12"),l.default.createElement("option",{value:"13"},"13"),l.default.createElement("option",{value:"14"},"14"),l.default.createElement("option",{value:"15"},"15"),l.default.createElement("option",{value:"16"},"16"),l.default.createElement("option",{value:"17"},"17"),l.default.createElement("option",{value:"18"},"18"),l.default.createElement("option",{value:"19"},"19"),l.default.createElement("option",{value:"20"},"20"),l.default.createElement("option",{value:"21"},"21"),l.default.createElement("option",{value:"22"},"22"),l.default.createElement("option",{value:"23"},"23"),l.default.createElement("option",{value:"24"},"24"),l.default.createElement("option",{value:"25"},"25"),l.default.createElement("option",{value:"26"},"26"),l.default.createElement("option",{value:"27"},"27"),l.default.createElement("option",{value:"28"},"28"),l.default.createElement("option",{value:"29"},"29"),l.default.createElement("option",{value:"30"},"30"),l.default.createElement("option",{value:"31"},"31")),l.default.createElement("span",{className:"input-group-text"},t("ScheduleReportDayOfTheMonth"))))}},18764:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReportTime=void 0;const l=n(a(67294)),r=a(81468);t.ReportTime=function(e){const{t}=(0,r.useTranslation)();function a(t){const a=(e.time||"00:00").split(":").map((e=>Number.parseInt(e))),n=a[0]<12;void 0!==t.hour&&(a[0]=n?t.hour:t.hour+12),void 0!==t.minute&&(a[1]=t.minute),void 0!==t.ampm&&("am"===t.ampm&&(a[0]=a[0]%12),"pm"===t.ampm&&a[0]<11&&(a[0]=a[0]+12)),e.onTimeChanged(`${a[0]}:${a[1]}`)}function n(){const t=e.time.split(":"),a=Number.parseInt(t[0]);return{hour:a%12||12,minute:Number.parseInt(t[1]),ampm:a>11?"pm":"am"}}return l.default.createElement("div",{className:"row m-0 mt-3"},l.default.createElement("label",{className:"form-label",htmlFor:"report-time"},t("Time")),l.default.createElement("div",{className:"d-flex align-items-center"},l.default.createElement("div",null,l.default.createElement("select",{id:"report-time",className:"form-select",value:n().hour,onChange:e=>a({hour:Number.parseInt(e.target.value)})},l.default.createElement("option",{value:"1"},"1"),l.default.createElement("option",{value:"2"},"2"),l.default.createElement("option",{value:"3"},"3"),l.default.createElement("option",{value:"4"},"4"),l.default.createElement("option",{value:"5"},"5"),l.default.createElement("option",{value:"6"},"6"),l.default.createElement("option",{value:"7"},"7"),l.default.createElement("option",{value:"8"},"8"),l.default.createElement("option",{value:"9"},"9"),l.default.createElement("option",{value:"10"},"10"),l.default.createElement("option",{value:"11"},"11"),l.default.createElement("option",{value:"12"},"12"))),l.default.createElement("div",{className:"ms-1 me-1"},":"),l.default.createElement("div",null,l.default.createElement("select",{id:"report-minute",className:"form-select",value:n().minute,onChange:e=>a({minute:Number.parseInt(e.target.value)})},l.default.createElement("option",{value:"0"},"00"),l.default.createElement("option",{value:"15"},"15"),l.default.createElement("option",{value:"30"},"30"),l.default.createElement("option",{value:"45"},"45"))),l.default.createElement("div",{className:"ms-1"},l.default.createElement("select",{id:"report-am-pm",className:"form-select auto-width",value:n().ampm,onChange:e=>a({ampm:"am"===e.target.value?"am":"pm"})},l.default.createElement("option",{value:"am"},"am"),l.default.createElement("option",{value:"pm"},"pm"))),l.default.createElement("div",{className:"ms-1"},e.timezone)))}},65330:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReportsApi=void 0;const l=a(81902);class r extends l.Api{GetReport(e){return n(this,void 0,void 0,(function*(){return this.get("api/reports.php","load",{id:e})}))}SaveReportSchedule(e){return n(this,void 0,void 0,(function*(){return this.post("api/reports.php","saveSchedule",e)}))}}t.ReportsApi=r},24012:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScheduleReportComponent=t.ScheduleReportApp=t.useScheduleReport=void 0;const s=r(a(67294)),u=i(a(23768)),c=a(51073),d=a(65330),m=a(41773),f=a(81468),p=a(7781),h=a(69989),b=a(18764),g=a(70053),v=a(32294),E=a(99362);function y(e){const{api:t,reportId:a,reportIsScheduled:n}=e;function l(){return{frequency:h.ReportFrequency.Never,timeOfDay:"00:00",dayOfMonth:null,interval:1,daysOfWeek:null,emails:[]}}const[r,i]=(0,s.useState)(n),[u,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)({id:a,scheduleDetails:l(),name:"",dateLastSent:""});return{isScheduled:r,isEditingSchedule:u,report:d,onCancelEdit:function(){c(!1)},onEditSchedule:function(){return o(this,void 0,void 0,(function*(){const e=yield t.GetReport(a);m(e),i(e.scheduleDetails.frequency!==h.ReportFrequency.Never),c(!0)}))},onChangeFrequency:function(e){const t=Object.assign({},d),a=t.scheduleDetails;e===h.ReportFrequency.Never&&(t.scheduleDetails=Object.assign(Object.assign({},a),{frequency:h.ReportFrequency.Never})),e===h.ReportFrequency.Daily&&(t.scheduleDetails=Object.assign(Object.assign({},a),{frequency:h.ReportFrequency.Daily})),e===h.ReportFrequency.Weekly&&(t.scheduleDetails=Object.assign(Object.assign({},a),{frequency:h.ReportFrequency.Weekly})),e===h.ReportFrequency.Monthly&&(t.scheduleDetails=Object.assign(Object.assign({},a),{frequency:h.ReportFrequency.Monthly})),m(t)},onChangeInterval:function(e){const t=Object.assign({},d);t.scheduleDetails=Object.assign(Object.assign({},d.scheduleDetails||l()),{interval:e}),m(t)},onChangeTime:function(e){const t=Object.assign({},d);t.scheduleDetails=Object.assign(Object.assign({},d.scheduleDetails||l()),{timeOfDay:e}),m(t)},onChangeDays:function(e){const t=Object.assign({},d);t.scheduleDetails=Object.assign(Object.assign({},d.scheduleDetails||l()),{daysOfWeek:e}),m(t)},onChangeMonthDay:function(e){const t=Object.assign({},d);t.scheduleDetails=Object.assign(Object.assign({},d.scheduleDetails||l()),{dayOfMonth:e}),m(t)},onChangeEmails:function(e){const t=Object.assign({},d);t.scheduleDetails=Object.assign(Object.assign({},d.scheduleDetails||l()),{emails:e}),m(t)},onSaveSchedule:function(){return o(this,void 0,void 0,(function*(){if(d.scheduleDetails.frequency===h.ReportFrequency.Weekly&&0===(d.scheduleDetails.daysOfWeek||[]).length)return;if(0===d.scheduleDetails.emails.length)return;const e=yield t.SaveReportSchedule(d);m(e),i(e.scheduleDetails.frequency!==h.ReportFrequency.Never),c(!1)}))}}}function C(e){const{t}=(0,f.useTranslation)(),{isScheduled:a,isEditingSchedule:n,report:l,onEditSchedule:r,onCancelEdit:o,onChangeFrequency:i,onChangeInterval:u,onChangeTime:c,onChangeDays:d,onChangeMonthDay:C,onChangeEmails:N,onSaveSchedule:O}=y(e),S=l.scheduleDetails;return s.default.createElement(s.default.Fragment,null,s.default.createElement("button",{type:"button",className:"btn btn-link scheduleReport report",onClick:r},s.default.createElement("span",{className:"bi bi-clock-history icon"})," ",a&&s.default.createElement("span",null,t("ChangeSchedule")),!a&&s.default.createElement("span",null,t("ScheduleReport"))),s.default.createElement(m.Modal,{isOpen:n,title:t("ScheduleReport")+" - "+l.name,onToggle:o},s.default.createElement(m.ModalBody,null,s.default.createElement("div",null,s.default.createElement("div",{className:"row m-0"},s.default.createElement("div",{className:"col"},s.default.createElement("label",{className:"form-label",htmlFor:"report-frequency"},t("Frequency")),s.default.createElement("select",{id:"report-frequency",className:"form-select",onChange:e=>i(e.target.value),autoFocus:!0,value:S.frequency},s.default.createElement("option",{value:h.ReportFrequency.Never},t("Never")),s.default.createElement("option",{value:h.ReportFrequency.Daily},t("Daily")),s.default.createElement("option",{value:h.ReportFrequency.Weekly},t("Weekly")),s.default.createElement("option",{value:h.ReportFrequency.Monthly},t("Monthly")))),S.frequency!==h.ReportFrequency.Never&&s.default.createElement("div",{className:"col"},s.default.createElement("label",{className:"form-label",htmlFor:"report-interval"},t("RepeatEveryPrompt")),s.default.createElement("div",{className:"input-group auto-width"},s.default.createElement("select",{id:"report-interval",className:"form-select auto-width",onChange:e=>u(Number.parseInt(e.target.value)),value:S.interval},s.default.createElement("option",{value:"1"},"1"),s.default.createElement("option",{value:"2"},"2"),s.default.createElement("option",{value:"3"},"3"),s.default.createElement("option",{value:"4"},"4"),s.default.createElement("option",{value:"5"},"5"),s.default.createElement("option",{value:"6"},"6"),s.default.createElement("option",{value:"7"},"7"),s.default.createElement("option",{value:"8"},"8"),s.default.createElement("option",{value:"9"},"9"),s.default.createElement("option",{value:"10"},"10")),s.default.createElement("span",{className:"input-group-text"},S.frequency===h.ReportFrequency.Daily?1===S.interval?t("day"):t("days"):S.frequency===h.ReportFrequency.Weekly?1===S.interval?t("week"):t("weeks"):S.frequency===h.ReportFrequency.Monthly?1===S.interval?t("month"):t("months"):"")))),S.frequency!==h.ReportFrequency.Never&&s.default.createElement(s.default.Fragment,null,s.default.createElement(b.ReportTime,{onTimeChanged:e=>c(e),time:S.timeOfDay,timezone:e.timezone}),s.default.createElement(g.ReportDays,{onDaysChanged:e=>d(e),days:S.daysOfWeek||[],frequency:S.frequency}),s.default.createElement(v.ReportMonthDay,{onMonthDayChanged:e=>C(e),day:S.dayOfMonth||1,frequency:S.frequency}),s.default.createElement(E.ReportEmails,{onChangeEmails:e=>N(e),emails:S.emails})))),s.default.createElement(m.ModalFooter,{className:"justify-content-between"},s.default.createElement("div",{className:"note"},s.default.createElement("span",{className:"me-2"},t("LastSent"),":"),""===l.dateLastSent&&s.default.createElement("span",null,t("Never")),""!==l.dateLastSent&&s.default.createElement("span",null,l.dateLastSent)),s.default.createElement("div",null,s.default.createElement(p.UpdateAndCancelButtons,{onCancel:o,onUpdate:O})))))}t.useScheduleReport=y,t.ScheduleReportApp=C,t.ScheduleReportComponent=function(e){(0,u.default)({lang:e.lang,basePath:e.path,version:e.version});const t=new d.ReportsApi(e.path,e.csrf);return s.default.createElement(s.Suspense,{fallback:s.default.createElement("div",null,"Loading...")},s.default.createElement(c.AppSettingsProvider,Object.assign({},e),s.default.createElement(C,Object.assign({},e,{api:t}))))}},54110:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=n(a(67294)),r=a(20745),o=a(13891),i=a(11182),s=a(7454),u=a(24012),c=a(74631),d=a(87592),m=a(24773);a.g.React=l.default,a.g.createRoot=r.createRoot,a.g.ReactComponents={ManageResourcesAppComponent:o.ManageResourcesAppComponent,ManageMonitorViewsAppComponent:i.ManageMonitorViewsAppComponent,ScheduleReportComponent:u.ScheduleReportComponent,ManageCustomAttributesAppComponent:s.ManageCustomAttributesAppComponent,ManageQuotasAppComponent:c.ManageQuotasAppComponent,ManageOAuthProvidersAppComponent:d.ManageOAuthProvidersAppComponent,ManageReservationsColorsAppComponent:m.ManageReservationsColorsAppComponent}},60519:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelButton=void 0;const l=n(a(67294)),r=a(81468);t.CancelButton=function(e){const{t}=(0,r.useTranslation)();return l.default.createElement("button",{type:e.type||"button",className:`btn btn-default ${e.className||""}`,onClick:e.onClick},e.text||t("Cancel"))}},9965:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteAndCancelButtons=void 0;const l=n(a(67294)),r=a(60519),o=a(50208);t.DeleteAndCancelButtons=function(e){return l.default.createElement(l.default.Fragment,null,l.default.createElement(r.CancelButton,{text:e.cancelText,onClick:e.onCancel}),l.default.createElement(o.DeleteButton,{text:e.deleteText,className:"ms-1",onClick:e.onDelete}))}},50208:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteButton=void 0;const l=n(a(67294)),r=a(81468);t.DeleteButton=function(e){const{t}=(0,r.useTranslation)();return l.default.createElement("button",{type:e.type||"button",className:`btn btn-danger ${e.className||""}`,onClick:e.onClick},l.default.createElement("span",{className:"bi bi-trash"})," ",e.text||t("Delete"))}},68442:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SubmitButton=void 0;const l=n(a(67294));t.SubmitButton=function(e){return l.default.createElement("button",{type:"submit",className:`btn btn-primary ${e.className||""}`},e.text)}},7781:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateAndCancelButtons=void 0;const l=n(a(67294)),r=a(60519),o=a(97961);t.UpdateAndCancelButtons=function(e){return l.default.createElement(l.default.Fragment,null,l.default.createElement(r.CancelButton,{text:e.cancelText,onClick:e.onCancel}),l.default.createElement(o.UpdateButton,{text:e.updateText,className:"ms-1",onClick:e.onUpdate}))}},97961:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateButton=void 0;const l=n(a(67294)),r=a(81468);t.UpdateButton=function(e){const{t}=(0,r.useTranslation)();return l.default.createElement("button",{type:e.type||"button",className:`btn btn-primary ${e.className||""}`,onClick:e.onClick},l.default.createElement("span",{className:"bi bi-check-circle"})," ",e.text||t("Update"))}},41773:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ModalFooter=t.ModalBody=t.Modal=void 0;const l=n(a(67294)),r=a(90145);t.Modal=function(e){return(0,r.useOnEscape)((()=>{e.isOpen&&!e.preventEscape&&e.onToggle()})),e.isOpen?l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:`booked-modal ${e.className||""}`,"aria-hidden":"true","aria-labelledby":"booked-modal-title",role:"dialog"},l.default.createElement("div",{role:"document"},!e.hideHeader&&l.default.createElement("div",{className:"booked-modal-header"},l.default.createElement("h1",{id:"booked-modal-title"},e.title),l.default.createElement("button",{className:"booked-modal-close",title:"Close",onClick:e.onToggle},"×")),e.children)),l.default.createElement("div",{className:"booked-modal-overlay",tabIndex:-1})):l.default.createElement(l.default.Fragment,null)},t.ModalBody=function(e){return l.default.createElement("div",{className:"booked-modal-content"},e.children)},t.ModalFooter=function(e){return l.default.createElement("div",{className:`booked-modal-footer ${e.className||""}`},e.children)}},34094:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Pageable=void 0;const l=n(a(67294));t.Pageable=function(e){const t=Math.max(1,e.currentPage-1),a=Math.min(e.totalPages,e.currentPage+1),n=Math.floor((e.currentPage-2-1)/2),r=Math.ceil((e.currentPage+2+e.totalPages+1)/2),o="LEFT",i="RIGHT",s=(e,t,a=1)=>{let n=e;const l=[];for(;n<=t;)l.push(n),n+=a;return l};function u(t){return t===e.currentPage?"active":t>e.totalPages||t<1?"disabled":""}return l.default.createElement("div",{className:"pagination-section"},l.default.createElement("nav",{className:"pagination-nav"},l.default.createElement("ul",{className:"pagination"},l.default.createElement("li",{className:`page-item ${u(e.currentPage-1)}`},l.default.createElement("button",{className:"page-link",onClick:()=>e.onPageChange(t)},l.default.createElement("span",{"aria-hidden":"true"},"«"))),(()=>{const{totalPages:t}=e,{currentPage:a}=e;if(t>9){const e=Math.max(2,a-2),n=Math.min(t-1,a+2);let l=s(e,n);const r=e>2,u=t-n>1,c=7-(l.length+1);switch(!0){case r&&!u:{const t=s(e-c,e-1);l=[o,...t,...l];break}case!r&&u:{const e=s(n+1,n+c);l=[...l,...e,i];break}default:l=[o,...l,i]}return[1,...l,t]}return s(1,t)})().map((t=>t===o?l.default.createElement("li",{key:t,className:`page-item ${u(t)}`},l.default.createElement("button",{className:"page-link",onClick:()=>e.onPageChange(n)},"...")):t===i?l.default.createElement("li",{key:t,className:`page-item ${u(t)}`},l.default.createElement("button",{className:"page-link",onClick:()=>e.onPageChange(r)},"...")):l.default.createElement("li",{key:t,className:`page-item ${u(t)}`},l.default.createElement("button",{className:"page-link",onClick:()=>e.onPageChange(Number.parseInt(t.toString()))},t)))),l.default.createElement("li",{className:`page-item ${u(e.currentPage+1)}`},l.default.createElement("button",{className:"page-link",onClick:()=>e.onPageChange(a),"aria-label":"Next"},l.default.createElement("span",{"aria-hidden":"true"},"»"))))),l.default.createElement("div",{className:"pagination-total"},e.totalItems," ",e.totalItemsLabel,e.allowAll&&e.totalPages>1&&l.default.createElement("button",{onClick:e.onViewAll,className:"btn btn-link"},e.allText||"View All")),e.children)}},90416:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TimeIntervalDisplay=t.TimeIntervalEdit=t.useTimeIntervalDisplay=void 0;const o=r(a(67294)),i=a(81468),s=a(12907);function u(e){const[t,a]=(0,o.useState)(e.interval||{days:0,hours:0,minutes:0});function n(t){a(t),0===t.days&&0===t.hours&&0===t.minutes?e.onUpdated(null):e.onUpdated(t)}function l(e){if(""===e)return 0;const t=Number.parseInt(e);return Number.isNaN(t)?0:Math.max(0,t)}return{interval:t,onDaysChanged:function(e){n(Object.assign(Object.assign({},t),{days:l(e)}))},onHoursChanged:function(e){n(Object.assign(Object.assign({},t),{hours:l(e)}))},onMinutesChanged:function(e){n(Object.assign(Object.assign({},t),{minutes:l(e)}))}}}t.useTimeIntervalDisplay=u,t.TimeIntervalEdit=function(e){const{interval:t,onDaysChanged:a,onHoursChanged:n,onMinutesChanged:l}=u(e),{disabled:r}=e;return o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:" col-4"},o.default.createElement("label",{className:"form-label"},"Days"),o.default.createElement("input",{type:"number",className:"form-control form-control-sm",min:0,defaultValue:t.days,onChange:e=>a(e.target.value),disabled:r})),o.default.createElement("div",{className:" col-4"},o.default.createElement("label",{className:"form-label"},"Hours"),o.default.createElement("input",{type:"number",className:"form-control form-control-sm",min:0,defaultValue:t.hours,onChange:e=>n(e.target.value),disabled:r})),o.default.createElement("div",{className:" col-4"},o.default.createElement("label",{className:"form-label"},"Minutes"),o.default.createElement("input",{type:"number",className:"form-control form-control-sm",min:0,defaultValue:t.minutes,onChange:e=>l(e.target.value),disabled:r})))},t.TimeIntervalDisplay=function(e){const{t}=(0,i.useTranslation)();if(!e.interval)return o.default.createElement(o.default.Fragment,null,'""');const a=(0,s.intervalAsString)(e.interval,t);return o.default.createElement(o.default.Fragment,null,a)}},56731:function(e,t,a){var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(l,r){function o(e){try{s(n.next(e))}catch(e){r(e)}}function i(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?l(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,i)}s((n=n.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseCsv=t.CsvUtils=void 0;const r=l(a(57460)),o=a(75712);t.CsvUtils=class{static asInterval(e){return e?`${e.days}d${e.hours}h${e.minutes}m`:"0d0h0m"}static asBoolean(e){return e?"true":"false"}static fromBoolean(e){return!!e&&"true"===e.toLowerCase()}static asString(e){return null!=e?e.toString().trim():""}static fromInt(e){return!e||Number.isNaN(Number.parseInt(e))?0:Number.parseInt(e)}static fromFloat(e){return!e||Number.isNaN(Number.parseFloat(e))?0:Number.parseFloat(e)}static escapeCsv(e){return e&&""!==e?`"${e.replace(/\\"/g,'""')}"`:""}static createCsv(e,t){return new Blob([e+t],{type:"data:text/csv;charset=utf-8"})}static fromInterval(e){if(!e)return null;const t=new RegExp(/(\d+d)(\d+h)(\d+m)/);if(!t.test(e))throw new Error("Interval is not in the correct format. Must be #d#h#m");const a=t.exec(e);return{days:Number.parseInt(a[1]),hours:Number.parseInt(a[2]),minutes:Number.parseInt(a[3])}}static fromCustomAttribute(e,t){if(!(0,o.checkIsAttributeValid)(e,{id:e.id,value:t}))throw new Error(`${e.label} is invalid`);return{id:e.id,value:t}}},t.parseCsv=function(e){return n(this,void 0,void 0,(function*(){return new Promise(((t,a)=>{r.default.parse(e,{header:!0,skipEmptyLines:!0,transform:e=>e.trim(),complete:e=>t(e),error:e=>a(e)})}))}))}},15127:(e,t)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationPaths=void 0,(a=t.NavigationPaths||(t.NavigationPaths={})).Home="#/",a.Types="#/types",a.Add="#/add",a.Groups="#/groups",a.Statuses="#/statuses",a.Edit="#/edit"},74638:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getPage=t.getTotalPages=void 0,t.getTotalPages=function(e,t){return Math.ceil(e/t.pageSize)},t.getPage=function(e,t){return e.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize)}},84228:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BookedCopyToClipboard=void 0;const i=r(a(67294)),s=o(a(74855));t.BookedCopyToClipboard=function(e){const{textToCopy:t,successText:a,onCopy:n,children:l}=e,[r,o]=(0,i.useState)(!1);return i.default.createElement("div",{className:"d-inline-block position-relative"},i.default.createElement(s.default,{text:t,onCopy:function(e,t){n&&n(e,t),t&&(o(!0),setTimeout((()=>o(!1)),3e3))}},l),r&&i.default.createElement("div",{className:"copied-success"},a||"Copied"))}},81927:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeSearch=void 0;const l=n(a(67294)),r=a(69989),o=a(51812),i=a(3717),s=a(19475),u=a(9305),c=a(44830);t.CustomAttributeSearch=function(e){const{attribute:t}=e;return t.type===r.AttributeTypeOptions.DateTime?l.default.createElement(c.CustomAttributeSearchDate,Object.assign({},e)):t.type===r.AttributeTypeOptions.Checkbox?l.default.createElement(s.CustomAttributeSearchCheckbox,Object.assign({},e)):[r.AttributeTypeOptions.SelectList,r.AttributeTypeOptions.MultiSelect].includes(t.type)?l.default.createElement(u.CustomAttributeSearchSelect,Object.assign({},e)):t.type===r.AttributeTypeOptions.MultiLineTextbox?l.default.createElement(i.CustomAttributeSearchTextarea,Object.assign({},e)):l.default.createElement(o.CustomAttributeSearchTextbox,Object.assign({},e))}},19475:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeSearchCheckbox=void 0;const l=n(a(67294)),r=n(a(23157)),o=a(81468),i=a(1494),s=a(68960);t.CustomAttributeSearchCheckbox=function(e){const{t}=(0,o.useTranslation)(),a=[{label:t("Yes"),value:"1"},{label:t("No"),value:"0"}],n=e.id||`attribute-search-${e.attribute.id}`,u=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`;return l.default.createElement("div",{className:"attribute"},l.default.createElement("label",{className:"form-label",htmlFor:n},e.attribute.label),l.default.createElement(r.default,{id:n,name:u,isClearable:!0,options:a,getOptionValue:e=>e.value,getOptionLabel:e=>e.label,value:a.filter((t=>t.value===e.value[0])),isDisabled:e.comparison!==s.ComparisonType.Equals,onChange:t=>{return a=null==t?void 0:t.value,void e.onChange([a||""]);var a}}),!e.isBasicSearch&&l.default.createElement(i.CustomAttributeSearchNoValueCheckbox,{attribute:e.attribute,comparison:e.comparison,onChange:e.onComparisonChanged}))}},44830:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeSearchDate=void 0;const i=r(a(67294)),s=o(a(9198)),u=a(73356);a(44308);const c=a(1494),d=a(68960);t.CustomAttributeSearchDate=function(e){const[t,a]=(0,i.useState)(function(){if(!e.value)return null;const t=Date.parse(e.value[0]);return Number.isNaN(t)?null:new Date(t)}()),n=e.id||`attribute-search-${e.attribute.id}`,l=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`,r=e.dateTimeFormat&&e.dateTimeFormat.includes(" ")?e.dateTimeFormat.split(" ")[1]:void 0;function o(o=""){return i.default.createElement(s.default,{id:n,name:l,className:`form-control ${o}`,selected:t,onChange:t=>{(t instanceof Date||null===t)&&(a(t),e.onChange(t?[(0,u.format)(t,"yyyy/MM/dd HH:mm")]:[""]))},dateFormat:e.dateTimeFormat||"Pp",timeFormat:r,calendarStartDay:e.firstDayOfWeek,locale:e.lang,showTimeSelect:!0,disabled:e.comparison===d.ComparisonType.Empty,isClearable:!0})}return e.isBasicSearch?i.default.createElement("div",{className:"attribute"},i.default.createElement("label",{htmlFor:`attribute-${e.attribute.id}`,className:"form-label"},e.attribute.label),o()):i.default.createElement("div",{className:"attribute search-date attribute"},i.default.createElement("label",{htmlFor:n,className:"form-label"},e.attribute.label),i.default.createElement("div",{className:"input-group"},i.default.createElement("select",{className:"form-select select-comparison-type",id:e.id?`date-compare-attribute-search-${e.id}`:`date-compare-attribute-search-${e.attribute.id}`,disabled:e.comparison===d.ComparisonType.Empty,"aria-label":"Comparison Type",value:e.comparison,onChange:t=>e.onComparisonChanged(Number.parseInt(t.target.value))},i.default.createElement("option",{value:d.ComparisonType.Equals,title:"Equals"},"="),i.default.createElement("option",{value:d.ComparisonType.GreaterThan,title:"Greater Than"},">"),i.default.createElement("option",{value:d.ComparisonType.LessThan,title:"Less Than"},"<")),o("search-date")),i.default.createElement(c.CustomAttributeSearchNoValueCheckbox,{attribute:e.attribute,comparison:e.comparison,onChange:e.onComparisonChanged}))}},1494:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeSearchNoValueCheckbox=void 0;const l=n(a(67294)),r=a(81468),o=a(68960);t.CustomAttributeSearchNoValueCheckbox=function(e){const{t}=(0,r.useTranslation)();return l.default.createElement("div",{className:"form-check"},l.default.createElement("input",{type:"checkbox",className:"form-check-input",id:`attribute-search-empty-${e.attribute.id}`,name:`psiattributeempty[${e.attribute.id}]`,checked:e.comparison===o.ComparisonType.Empty,onChange:t=>e.onChange(t.target.checked?o.ComparisonType.Empty:o.ComparisonType.Equals)}),l.default.createElement("label",{className:"form-check-label",htmlFor:`attribute-search-empty-${e.attribute.id}`},t("HasNoValue")))}},9305:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeSearchSelect=void 0;const l=n(a(67294)),r=n(a(23157)),o=a(1494),i=a(68960);t.CustomAttributeSearchSelect=function(e){const t=e.attribute.possibleValues.map((e=>({label:e,value:e}))),a=e.id||`attribute-search-${e.attribute.id}`,n=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`;let s=!1;return e.isBasicSearch||void 0!==e.allowMultipleValues&&!e.allowMultipleValues||(s=!0),l.default.createElement("div",{className:"attribute"},l.default.createElement("label",{className:"form-label",htmlFor:a},e.attribute.label),l.default.createElement(r.default,{id:a,name:n,isClearable:!0,isMulti:s,options:t,getOptionValue:e=>e.value,getOptionLabel:e=>e.label,value:t.filter((t=>e.value.includes(t.value))),isDisabled:!e.isBasicSearch&&e.comparison!==i.ComparisonType.Equals,onChange:t=>{var a;a=s&&null!==t?t.map((e=>e.value)):t?[t.value]:null,e.onChange(null===a?[]:a)}}),!e.isBasicSearch&&l.default.createElement(o.CustomAttributeSearchNoValueCheckbox,{attribute:e.attribute,comparison:e.comparison,onChange:e.onComparisonChanged}))}},3717:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeSearchTextarea=void 0;const l=n(a(67294)),r=a(1494),o=a(68960);t.CustomAttributeSearchTextarea=function(e){const t=e.id||`attribute-search-${e.attribute.id}`,a=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`;return l.default.createElement("div",{className:"attribute clearable"},l.default.createElement("label",{className:"form-label",htmlFor:t},e.attribute.label),l.default.createElement("textarea",{id:t,name:a,className:"form-control",value:e.value[0]||"",disabled:e.comparison!==o.ComparisonType.Equals,onChange:t=>{return a=t.target.value,void e.onChange([a]);var a}}),l.default.createElement("i",{className:"clearable__clear",style:{display:""===e.value[0]?"none":"block"},onClick:t=>{e.onChange([""]),t.preventDefault(),t.stopPropagation()}},"×"),!e.isBasicSearch&&l.default.createElement(r.CustomAttributeSearchNoValueCheckbox,{attribute:e.attribute,comparison:e.comparison,onChange:e.onComparisonChanged}))}},51812:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomAttributeSearchTextbox=void 0;const l=n(a(67294)),r=a(1494),o=a(68960);t.CustomAttributeSearchTextbox=function(e){function t(t){e.onChange([t])}const a=e.id||`attribute-search-${e.attribute.id}`,n=`${e.namePrefix||""}psiattribute[${e.attribute.id}]`;function i(r){return l.default.createElement(l.default.Fragment,null,l.default.createElement("input",{id:a,name:n,type:"text",className:`form-control ${r}`,value:e.value[0]||"",disabled:e.comparison===o.ComparisonType.Empty,onChange:e=>t(e.target.value)}),l.default.createElement("i",{className:"clearable__clear",style:{display:""===e.value[0]?"none":"block"},onClick:e=>{t(""),e.preventDefault(),e.stopPropagation()}},"×"))}return e.isBasicSearch?l.default.createElement("div",{className:"attribute clearable"},l.default.createElement("label",{className:"form-label",htmlFor:a},e.attribute.label),i("")):l.default.createElement("div",{className:"attribute"},l.default.createElement("label",{className:"form-label",htmlFor:a},e.attribute.label),l.default.createElement("div",{className:"input-group"},l.default.createElement("select",{className:"form-select select-comparison-type",id:e.id?`text-compare-attribute-search-${e.id}`:`text-compare-attribute-search-${e.attribute.id}`,disabled:e.comparison===o.ComparisonType.Empty,"aria-label":"Comparison Type",value:e.comparison,onChange:t=>e.onComparisonChanged(Number.parseInt(t.target.value))},l.default.createElement("option",{value:o.ComparisonType.Equals,title:"Equals"},"="),l.default.createElement("option",{value:o.ComparisonType.Contains,title:"Contains"},"⊂")),l.default.createElement("div",{className:"flex-grow-1"},l.default.createElement("div",{className:"clearable"}," ",i("search-text")))),l.default.createElement(r.CustomAttributeSearchNoValueCheckbox,{attribute:e.attribute,comparison:e.comparison,onChange:e.onComparisonChanged}))}},75712:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsAttributeValid=void 0;const n=a(69989),l=a(99712);t.checkIsAttributeValid=function(e,t){let a="";return t&&(a=t.value.trim()),!(e.required&&(!a||""===a))&&(e.regex?new RegExp(e.regex.replace(/\//g,""),"i").test(a):a.length>0&&e.type===n.AttributeTypeOptions.Link?l.RegExpUrl.test(a):!(a.length>0&&e.possibleValues.length>0)||(e.type===n.AttributeTypeOptions.SelectList?e.possibleValues.includes(a):e.type===n.AttributeTypeOptions.MultiSelect&&a.split(",").every((t=>e.possibleValues.includes(t)))))}},71550:function(e,t,a){var n=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var l=Object.getOwnPropertyDescriptor(t,a);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,l)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),l=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&n(t,e,a);return l(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.TimePicker=t.useTimePicker=void 0;const o=r(a(67294)),i=a(83039),s=a(12907),u=a(48828);function c(e){const{startValue:t,endValue:a,minTime:n,maxTime:l,minuteIncrement:r,amPm:i,onStartChange:c,onEndChange:d}=e,m=[],f=n?n.hour:0,p=n?n.minute:0,h=l?l.hour:23,b=l?l.minute:60,g=r||30;function v(e,t){return(0,s.formatAsTime)(e,t,i)}let E=!0;for(let e=f;e<=h;e++){let t=E?p:0;const a=Math.min(e===h?b+1:60,60);for(;t<a;t+=g)m.push({hour:e,minute:t}),E=!1}const[y,C]=(0,o.useState)(t||m[0]),[N,O]=(0,o.useState)(a||m[m.length-1]),[S,_]=(0,o.useState)(v((null==t?void 0:t.hour)||m[0].hour,(null==t?void 0:t.minute)||m[0].minute)),[k,R]=(0,o.useState)(v((null==a?void 0:a.hour)||m[m.length-1].hour,(null==a?void 0:a.minute)||m[m.length-1].minute)),[A,M]=(0,o.useState)(!1),[w,x]=(0,o.useState)(!1);function P(e){const t=(0,u.stringToTime)(e);return t?{hour:t.hour,minute:t.minute}:null}function I(e){R(e);const t=P(e);let a=!1;t&&(a=t.hour<y.hour||t.hour===y.hour&&t.minute<=y.minute,O(t),d(t)),x(!t||a)}return{timeOptions:m,selectedStart:y,selectedEnd:N,startStringValue:S,endStringValue:k,isStartError:A,isEndError:w,onStartChanged:function(e){_(e);const t=P(e);if(t){const e=Object.assign({},y);C(t),c(t);const a=60*(t.hour-e.hour)+(t.minute-e.minute);0!==e.hour&&0!==a&&I(v(N.hour+Math.floor(a/60),Math.abs(N.minute+a%60)))}M(!t)},onEndChanged:I,getLabel:v}}t.useTimePicker=c,t.TimePicker=function(e){const{containerId:t,endTimeId:a,startTimeId:n,startTimeLabel:l,endTimeLabel:r}=e,{selectedStart:s,startStringValue:u,selectedEnd:d,endStringValue:m,timeOptions:f,isStartError:p,isEndError:h,getLabel:b,onStartChanged:g,onEndChanged:v}=c(e),E=(0,o.useRef)(null),y=(0,o.useRef)(null);function C(){E.current.style.display="none"}function N(){y.current.style.display="none"}return(0,i.useClickOutside)(E,C),(0,i.useClickOutside)(y,N),o.default.createElement("div",{className:"d-flex align-items-md-center timepicker-range",id:t},o.default.createElement("div",{className:"form-group position-relative"},o.default.createElement("label",{htmlFor:n,className:"visually-hidden"},l),o.default.createElement("input",{type:"text",id:n,className:"form-control dateinput inline-block timepicker-start "+(p?"error":""),value:u,title:l,onChange:e=>g(e.target.value),onKeyUp:e=>{"Escape"===e.key&&C()},onFocus:()=>function(){if(E.current.style.display="block",s){const e=E.current.querySelector(`[data-hour='${s.hour}'][data-minute='0']`);e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}()}),o.default.createElement("div",{ref:E,className:"timepicker-list timepicker-start-list"},o.default.createElement("ul",null,f.map((e=>o.default.createElement("li",{role:"button",key:b(e.hour,e.minute),onClick:()=>{g(b(e.hour,e.minute)),C()},"data-hour":e.hour,"data-minute":e.minute},b(e.hour,e.minute))))))),o.default.createElement("div",{className:"ms-2 me-2"},"-"),o.default.createElement("div",{className:"form-group position-relative"},o.default.createElement("label",{htmlFor:a,className:"visually-hidden"},r),o.default.createElement("input",{type:"text",id:a,className:"form-control dateinput inline-block timepicker-end "+(h?"error":""),value:m,title:r,onChange:e=>v(e.target.value),onKeyUp:e=>{"Escape"===e.key&&N()},onFocus:()=>function(){if(y.current.style.display="block",d){const e=y.current.querySelector(`[data-hour='${d.hour}'][data-minute='0']`);e&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}()}),o.default.createElement("div",{ref:y,className:"timepicker-list timepicker-end-list"},o.default.createElement("ul",null,f.map((e=>o.default.createElement("li",{role:"button",key:b(e.hour,e.minute),onClick:()=>{v(b(e.hour,e.minute)),N()},"data-hour":e.hour,"data-minute":e.minute},b(e.hour,e.minute))))))))}},64604:(e,t)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.QuotaScope=void 0,(a=t.QuotaScope||(t.QuotaScope={})).IncludeCompleted="IncludeCompleted",a.ExcludeCompleted="ExcludeCompleted"},51240:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TIME_FORMAT=t.DATE_FORMAT=t.DATE_TIME_FORMAT=t.Clock=void 0;const n=a(70722);class l{constructor(e){this._now=e}now(e){return this._now?this._now:l.toTimezone(new Date,e)}addDays(e,t){const a=new Date(t.valueOf());return a.setDate(a.getDate()+e),a}addMonths(e,t){const a=new Date(t.valueOf());return a.setMonth(a.getMonth()+e),a}addYears(e,t){const a=new Date(t.valueOf());return a.setFullYear(a.getFullYear()+e),a}addMinutes(e,t){const a=new Date(t.valueOf());return a.setTime(a.getTime()+60*e*1e3),a}setTime(e,t){const a=t.split(":").map((e=>Number.parseInt(e))),n=new Date(e.valueOf());return n.setHours(a[0]),n.setMinutes(a[1]),n.setSeconds(0),n}static toTimezone(e,t){return(0,n.utcToZonedTime)(new Date(e.toUTCString()),t)}static asTimezone(e,t){return(0,n.toDate)((0,n.format)(e,"yyyy-MM-dd HH:mm"),{timeZone:t})}}t.Clock=l,t.DATE_TIME_FORMAT={year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:void 0},t.DATE_FORMAT={year:"2-digit",month:"numeric",day:"numeric"},t.TIME_FORMAT={hour:"numeric",minute:"numeric",second:void 0}},12907:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeStrong=t.bytesToString=t.stringToDate=t.dateToSystemString=t.nl2br=t.linkify=t.formatDuration=t.getDuration=t.intervalAsString=t.intervalAsMinutes=t.formatAsTime=void 0;const n=a(73356);function l(e){return(e||"").replace(/\n/g,"<br />")}t.formatAsTime=function(e,t,a=!1){if(a){let a=e,n="AM";return e>12&&(a=e-12),e>11&&(n="PM"),0===e&&(a=12),`${a.toString()}:${t.toString().padStart(2,"0")} ${n}`}return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},t.intervalAsMinutes=function(e){if(e)return 24*e.days*60+60*e.hours+e.minutes},t.intervalAsString=function(e,t){if(!e)return"";let a="";return e.days>1&&(a+=`${e.days} ${t("days")} `),1===e.days&&(a+=`${e.days} ${t("day")} `),e.hours>1&&(a+=`${e.hours} ${t("hours")} `),1===e.hours&&(a+=`${e.hours} ${t("hour")} `),e.minutes>1&&(a+=`${e.minutes} ${t("minutes")} `),1===e.minutes&&(a+=`${e.minutes} ${t("minute")} `),a},t.getDuration=function(e,t){let a=(e.getTime()-t.getTime())/1e3;const n=Math.floor(a/86400);a%=86400;let l=Math.floor(a/3600);a%=3600;let r=Math.round(a/60);return 60===r&&(r=0,l++),{days:n,hours:l,minutes:r}},t.formatDuration=function(e,t){let a="";return 1===e.days&&(a=`1 ${t("day")}`),e.days>1&&(a=`${e.days} ${t("days")}`),1===e.hours&&(a=`${a} 1 ${t("hour")}`),e.hours>1&&(a=`${a} ${e.hours} ${t("hours")}`),1===e.minutes&&(a=`${a} 1 ${t("minute")}`),e.minutes>1&&(a=`${a} ${e.minutes} ${t("minutes")}`),a},t.linkify=function(e){return l((e||"").replace(/(\s|^)(((https?:\/\/)|(www\.))(\S+))/gi,((e,t,a)=>{let n=a;return n.match("^https?://")||(n=`http://${n}`),`${t}<a target="_blank" href="${n}" rel="nofollow">${a}</a>`})))},t.nl2br=l,t.dateToSystemString=function(e,t=!0){const a=t?` ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`:"";return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}${a}`},t.stringToDate=function(e){return e&&""!==e?e.includes("T")?(0,n.parseISO)(e):(0,n.parse)(e,"yyyy-MM-dd",new Date):null},t.bytesToString=function(e){const t=Math.floor(Math.log(e)/Math.log(1024));return e?`${Number.parseFloat((e/Math.pow(1024,t)).toFixed(2))}${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}`:"0 Bytes"},t.removeStrong=function(e){return e.replace("<strong>","").replace("</strong>","")}},88554:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useHashChange=void 0;const n=a(67294),l=a(15127);t.useHashChange=function(){const[e,t]=(0,n.useState)(window.location.hash.split("?")[0]),a=()=>{let e=window.location.hash;e.includes("?")&&(e=e.split("?")[0]),t(e)};return(0,n.useEffect)((()=>(window.addEventListener("hashchange",a,!1),()=>window.removeEventListener("hashchange",a,!1))),[]),{hash:e,changeHash:e=>{window.location.hash=e,window.scrollTo(0,0)},isRootHash:""===e||e===l.NavigationPaths.Home}}},99712:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegExpUrl=void 0,t.RegExpUrl=new RegExp("[(http(s)?):\\/\\/(www\\.)?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)")},94559:(e,t)=>{function a(e){return function(e){const t=[];return e.forEach((e=>{t[e.id]=e})),t}(e)}function n(e){return null!=e&&"object"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.deepEqual=t.lookupStateToArray=t.createLookupState=t.createIndexed=void 0,t.createIndexed=a,t.createLookupState=function(e){return{allIds:e.map((e=>e.id)),byId:a(e)}},t.lookupStateToArray=function(e){return e.allIds.map((t=>e.byId[t]))},t.deepEqual=function e(t,a){const l=Object.keys(t),r=Object.keys(a);if(l.length!==r.length)return!1;for(const r of l){const l=t[r],o=a[r],i=n(l)&&n(o);if(i&&!e(l,o)||!i&&l!==o)return!1}return!0}},7445:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stringToFloat=t.stringToNumber=void 0,t.stringToNumber=function(e){const t=Number.parseInt(e);return Number.isNaN(t)?0:t},t.stringToFloat=function(e){const t=Number.parseFloat(e);return Number.isNaN(t)?0:t}},48828:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stringToTime=void 0,t.stringToTime=function(e){const t=e.trim();if(""===t)return null;let a=-1,n=-1;if(/^\d{1,2}:\d{1,2} (am|pm)$/gi.test(t)){const e=t.split(/(\d{1,2}):(\d{1,2}) (am|pm)/gi);a="am"===e[3].toLowerCase()?Number.parseInt(e[1]):Number.parseInt(e[1])+12,24===a&&(a=12),n=Number.parseInt(e[2])}if(/^\d{1,2}:\d{1,2}$/gi.test(t)){const e=t.split(/(\d{1,2}):(\d{2})/gi);a=Number.parseInt(e[1]),n=Number.parseInt(e[2])}return a>-1&&a<25&&n>-1&&n<61?{hour:a,minute:n}:null}},68208:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFileUrlMethods=void 0,t.getDefaultFileUrlMethods=function(){return{createObjectURL:URL.createObjectURL,revokeObjectURL:URL.revokeObjectURL}}},83039:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useClickOutside=void 0;const n=a(67294);t.useClickOutside=function(e,t){(0,n.useEffect)((()=>{function a(a){e.current&&!e.current.contains(a.target)&&t()}return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}}))}},28194:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useFullscreenStatus=void 0;const l=n(a(67294));t.useFullscreenStatus=function(e){const t="undefined"!==document.fullscreenElement?"fullscreenElement":"undefined"!==document.mozFullScreenElement?"mozFullScreenElement":"undefined"!==document.msFullscreenElement?"msFullscreenElement":"undefined"!==document.webkitFullscreenElement?"webkitFullscreenElement":"",[a,n]=l.default.useState(null!=document[t]);return l.default.useLayoutEffect((()=>{if(""===t)return document.addEventListener("fullscreenchange",(()=>n(null!=document[t]))),()=>document.removeEventListener("fullscreenchange")})),""===t?[!1,()=>{}]:[a,()=>{e&&e.current&&t&&e.current.requestFullscreen().then((()=>{n(null!=document[t])})).catch((()=>{n(!1)}))}]}},90145:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useOnEscape=void 0;const n=a(67294);t.useOnEscape=function(e){const t=(0,n.useCallback)((t=>{27===t.keyCode&&e()}),[]);(0,n.useEffect)((()=>(document.addEventListener("keydown",t,!1),()=>{document.removeEventListener("keydown",t,!1)})),[])}}},e=>{e.O(0,[115,410,722,415,162,406,877],(()=>(54110,e(e.s=54110)))),e.O()}]);