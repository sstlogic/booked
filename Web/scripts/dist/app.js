"use strict";(self.webpackChunkbooked_scheduler=self.webpackChunkbooked_scheduler||[]).push([[143],{60519:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelButton=void 0;const r=a(n(67294)),i=n(81468);t.CancelButton=function(e){const{t}=(0,i.useTranslation)();return r.default.createElement("button",{type:e.type||"button",className:`btn btn-default ${e.className||""}`,onClick:e.onClick},e.text||t("Cancel"))}},50208:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteButton=void 0;const r=a(n(67294)),i=n(81468);t.DeleteButton=function(e){const{t}=(0,i.useTranslation)();return r.default.createElement("button",{type:e.type||"button",className:`btn btn-danger ${e.className||""}`,onClick:e.onClick},r.default.createElement("span",{className:"bi bi-trash"})," ",e.text||t("Delete"))}},7781:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateAndCancelButtons=void 0;const r=a(n(67294)),i=n(60519),l=n(97961);t.UpdateAndCancelButtons=function(e){return r.default.createElement(r.default.Fragment,null,r.default.createElement(i.CancelButton,{text:e.cancelText,onClick:e.onCancel}),r.default.createElement(l.UpdateButton,{text:e.updateText,className:"ms-1",onClick:e.onUpdate}))}},97961:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateButton=void 0;const r=a(n(67294)),i=n(81468);t.UpdateButton=function(e){const{t}=(0,i.useTranslation)();return r.default.createElement("button",{type:e.type||"button",className:`btn btn-primary ${e.className||""}`,onClick:e.onClick},r.default.createElement("span",{className:"bi bi-check-circle"})," ",e.text||t("Update"))}},94880:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ClearableTextInput=void 0;const r=a(n(67294));t.ClearableTextInput=function(e){const{value:t,type:n,className:a,isRequired:i,placeholder:l,label:s,id:o,autoFocus:c,onChange:u,onBlur:d}=e;return r.default.createElement("div",{className:"clearable"},s&&r.default.createElement("label",{className:"form-label",htmlFor:o},s),r.default.createElement("input",{id:o,type:n,className:`form-control ${a}`,placeholder:l,value:t,onChange:e=>u(e.target.value),required:i,autoFocus:c,onBlur:d}),r.default.createElement("i",{className:"clearable__clear "+(s?"":"clearable__clear__nolabel"),style:{display:0===t.length?"none":"block"},onClick:e=>{u(""),e.preventDefault(),e.stopPropagation()}},"×"))}},79641:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorBoundary=void 0;const l=i(n(67294));class s extends l.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.props.api.logError({action:"Error Boundary",error:e,context:t})}render(){return this.state.hasError?l.default.createElement("div",{className:"alert alert-danger m-3"},"Something unexpected happened and has been logged. Please try again."):this.props.children}}t.ErrorBoundary=s},41773:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ModalFooter=t.ModalBody=t.Modal=void 0;const r=a(n(67294)),i=n(90145);t.Modal=function(e){return(0,i.useOnEscape)((()=>{e.isOpen&&!e.preventEscape&&e.onToggle()})),e.isOpen?r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:`booked-modal ${e.className||""}`,"aria-hidden":"true","aria-labelledby":"booked-modal-title",role:"dialog"},r.default.createElement("div",{role:"document"},!e.hideHeader&&r.default.createElement("div",{className:"booked-modal-header"},r.default.createElement("h1",{id:"booked-modal-title"},e.title),r.default.createElement("button",{className:"booked-modal-close",title:"Close",onClick:e.onToggle},"×")),e.children)),r.default.createElement("div",{className:"booked-modal-overlay",tabIndex:-1})):r.default.createElement(r.default.Fragment,null)},t.ModalBody=function(e){return r.default.createElement("div",{className:"booked-modal-content"},e.children)},t.ModalFooter=function(e){return r.default.createElement("div",{className:`booked-modal-footer ${e.className||""}`},e.children)}},12148:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NewLineToBr=void 0;const l=i(n(67294));t.NewLineToBr=function(e){return l.default.createElement(l.default.Fragment,null,e.s.split("\n").map(((e,t)=>l.default.createElement(l.Fragment,{key:t},e,l.default.createElement("br",null)))))}},14086:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QRScanner=void 0;const s=i(n(67294)),o=n(81468),c=l(n(44882));t.QRScanner=function(e){const{isOpen:t,onClose:n,isError:a,errorMessage:r,onScanned:i}=e,{t:l}=(0,o.useTranslation)(),[u,d]=(0,s.useState)(!1),[m,f]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{t?f(!0):(d(!0),setTimeout((()=>f(!1)),0))}),[t]),m?s.default.createElement("div",{className:"qr-scanner-overlay"},s.default.createElement("div",{className:"qr-scanner"},s.default.createElement("div",{className:"align-right"},s.default.createElement("button",{className:"booked-modal-close",title:l("Cancel"),onClick:n},"×")),!a&&s.default.createElement(c.default,{stopStream:u,onUpdate:(e,t)=>{t&&i(t.getText())}}),a&&s.default.createElement("div",{className:"qr-scanner-error"},r),s.default.createElement("div",{className:"text-center"},s.default.createElement("button",{className:"btn btn-link",onClick:n},l("Cancel"))))):s.default.createElement(s.default.Fragment,null)}},84396:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationAttachmentsDisplay=void 0;const l=i(n(67294)),s=n(81468),o=n(82140),c=n(51073);t.ReservationAttachmentsDisplay=function(){const{t:e}=(0,s.useTranslation)(),t=(0,l.useContext)(o.ReservationContext),n=(0,l.useContext)(c.AppSettingsContext);if(!t.metadata.uploadsEnabled)return l.default.createElement(l.default.Fragment,null);const a=t.reservation;function r(e){return`${n.path}/attachments/reservation-file.php?afid=${e.id}&rn=${a.referenceNumber}`}return l.default.createElement("div",{className:"reservation-section",id:"reservation-attachments-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-file-earmark-plus"})),l.default.createElement("div",{className:"reservation-content-section"},l.default.createElement("div",{className:"reservation-label d-inline"},e("Attachments")," ",l.default.createElement("span",{className:"badge reservation-badge"},a.attachments.length)),l.default.createElement("div",{className:"d-flex"},a.attachments.map((e=>l.default.createElement("div",{key:e.name,className:"reservation-upload-file"},l.default.createElement("a",{href:r(e),download:r(e),target:"_blank",rel:"noreferrer"},e.name)))))))}},81013:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationButtonsDisplay=t.useReservationButtonsDisplay=void 0;const l=i(n(67294)),s=n(81468),o=n(82140),c=n(51073),u=n(81198);function d(e){const{state:t,appState:n}=e,a=t.reservation,[r,i]=(0,l.useState)(!1);return{cancelUrl:t.metadata.returnUrl,icsUrl:`${n.path}/export/ical.php?rn=${a.referenceNumber}`,googleCalendarUrl:function(){var e;if(!a.start||!a.end)return"";const n=e=>e.toISOString().replace(/[:-]/g,""),r=(null===(e=t.resourcesById[a.resourceIds[0]])||void 0===e?void 0:e.name)||"";return`https://www.google.com/calendar/event?action=TEMPLATE&text=${encodeURIComponent(a.title||"")}&dates=${n(a.start)}/${n(a.end)}&details=${encodeURIComponent(a.description||"")}&location=${encodeURIComponent(r)}&trp=false&sprop=&sprop=name:`}(),onEmailReservationToggle:function(){i(!r)},showEmailReservationPrompt:r,onSendReservationEmail:function(e){t.onReservationSentAsEmail(e),i(!1)}}}t.useReservationButtonsDisplay=d,t.ReservationButtonsDisplay=function(){const{t:e}=(0,s.useTranslation)(),{cancelUrl:t,icsUrl:n,googleCalendarUrl:a,onEmailReservationToggle:r,showEmailReservationPrompt:i,onSendReservationEmail:m}=d({state:(0,l.useContext)(o.ReservationContext),appState:(0,l.useContext)(c.AppSettingsContext)});return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"reservation-top-bar justify-content-end justify-content-sm-between"},l.default.createElement("div",{className:"reservation-heading d-none d-sm-block"},e("ViewReservation")),l.default.createElement("div",{className:"reservation-buttons"},l.default.createElement("a",{className:"btn btn-light me-2",href:t},e("Close")),l.default.createElement("div",{className:"dropdown"},l.default.createElement("button",{className:"btn btn-light dropdown-toggle me-2",type:"button",id:"reservation-buttons-more","data-bs-toggle":"dropdown","aria-expanded":"false"},l.default.createElement("i",{className:"bi bi-three-dots-vertical"})),l.default.createElement("ul",{className:"dropdown-menu","aria-labelledby":"reservation-buttons-more"},l.default.createElement("li",null,l.default.createElement("a",{id:"reservation-add-to-calendar",href:n,download:n,className:"dropdown-item"},l.default.createElement("i",{className:"bi bi-calendar-plus"})," ",e("AddToOutlook"))),l.default.createElement("li",null,l.default.createElement("a",{id:"reservation-add-to-google",href:a,target:"_blank",rel:"nofollow noreferrer",className:"dropdown-item"},l.default.createElement("i",{className:"bi bi-google"})," ",e("AddToGoogleCalendar"))),l.default.createElement("li",null,l.default.createElement("button",{id:"reservation-send-as-email",type:"button",className:"dropdown-item",onClick:r},l.default.createElement("i",{className:"bi bi-envelope"})," ",e("Email"))),l.default.createElement("li",null,l.default.createElement("a",{id:"reservation-print",type:"button",className:"dropdown-item",target:"_blank",href:`${decodeURIComponent(encodeURIComponent(document.location.href))}&print=1`,rel:"noreferrer"},l.default.createElement("i",{className:"bi bi-printer"})," ",e("Print"))))))),l.default.createElement(u.EmailReservationModal,{isOpen:i,onToggle:r,onSend:m}))}},61841:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationDetailsDisplay=void 0;const l=i(n(67294)),s=n(81468),o=n(82140),c=n(28193),u=n(78929),d=n(12148);t.ReservationDetailsDisplay=function(){const e=(0,l.useContext)(o.ReservationContext),t=e.reservation,{t:n}=(0,s.useTranslation)(),[a,r]=(0,l.useState)([]),[i,m]=(0,l.useState)([]),[f,v]=(0,l.useState)(!0);return(0,l.useEffect)((()=>{v(!0),e.onAttributesFetched().then((e=>e)).then((e=>(r(e.attributes),m(e.attributeValues),v(!1),e))).catch((e=>{v(!1),console.error(e)}))}),[]),l.default.createElement("div",{className:"reservation-section",id:"reservation-details-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-card-list"})),l.default.createElement("div",{className:"reservation-content-section"},l.default.createElement("div",{id:"reservation-description-section"},l.default.createElement("div",{className:"reservation-label"},n("Description")),t.description&&l.default.createElement(d.NewLineToBr,{s:t.description}),!t.description&&n("None")),f&&l.default.createElement(c.Spinner,null),!f&&a.length>0&&l.default.createElement("div",{className:"col-12 mt-4"},l.default.createElement("div",{id:"reservation-attributes-section"},l.default.createElement("label",{className:"form-label reservation-label",htmlFor:"reservation-title"},n("AdditionalInformation")),l.default.createElement("div",{className:"row"},a.map((e=>{return l.default.createElement("div",{key:e.id,className:"col-12 col-lg-6 col-xl-4"},l.default.createElement(u.CustomAttribute,{attribute:e,value:(t=e,null===(n=i.find((e=>e.id===t.id)))||void 0===n?void 0:n.value)}));var t,n}))))),null!==t.referenceNumber&&l.default.createElement("div",{className:"d-flex flex-wrap align-items-end mt-4"},l.default.createElement("div",{className:"reservation-label me-2"}," ",n("ReferenceNumber")),l.default.createElement("div",null,t.referenceNumber))))}},20632:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationMeetingLinkDisplay=void 0;const l=i(n(67294)),s=n(81468),o=n(82140);t.ReservationMeetingLinkDisplay=function(){const e=(0,l.useContext)(o.ReservationContext),t=e.reservation,{meetingsEnabled:n}=e.metadata,{t:a}=(0,s.useTranslation)();return n&&t.meetingLink&&t.meetingLink.url?l.default.createElement("div",{className:"reservation-section",id:"reservation-times-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-camera-video"})),l.default.createElement("div",{className:"reservation-content-section"},l.default.createElement("div",{className:"reservation-label d-inline"},a("MeetingLink")),l.default.createElement("div",{className:"d-flex"},l.default.createElement("a",{href:t.meetingLink.url,target:"_blank",rel:"noreferrer"},t.meetingLink.url)))):l.default.createElement(l.default.Fragment,null)}},44378:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationOwnerDisplay=void 0;const l=i(n(67294)),s=n(81468),o=n(82140);t.ReservationOwnerDisplay=function(){const e=(0,l.useContext)(o.ReservationContext),t=e.reservation,n=(0,l.useMemo)((()=>e.users.find((e=>e.id===t.ownerId))),[t.ownerId]),a=(0,l.useMemo)((()=>e.users.filter((e=>t.coOwnerIds.includes(e.id)&&t.ownerId!==e.id))),[t.coOwnerIds,t.ownerId]),{t:r}=(0,s.useTranslation)();return n?l.default.createElement("div",{className:"reservation-section",id:"reservation-owner-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-person"})),l.default.createElement("div",{className:"reservation-content-section row g-0"},l.default.createElement("div",{className:"col-12 col-sm-6"},l.default.createElement("div",{className:"reservation-label"},r("Owner")),l.default.createElement("div",null,n.fullName)),a.length>0&&l.default.createElement("div",{className:"col-12 col-sm-6 mt-2 mt-sm-0"},l.default.createElement("div",{className:"reservation-label"},r("CoOwners")),a.map((e=>l.default.createElement("div",{key:e.id},e.fullName)))))):l.default.createElement(l.default.Fragment,null)}},49173:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationParticipantsDisplay=void 0;const l=i(n(67294)),s=n(81468),o=n(82140);t.ReservationParticipantsDisplay=function(){const e=(0,l.useContext)(o.ReservationContext),t=e.reservation,{t:n}=(0,s.useTranslation)();if(!e.metadata.allowParticipation)return l.default.createElement(l.default.Fragment,null);const a=t.inviteeIds.length+t.participantIds.length+t.guestEmails.length+t.participantEmails.length;return l.default.createElement("div",{className:"reservation-section",id:"reservation-participants-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-people"})),l.default.createElement("div",{className:"reservation-content-section"},l.default.createElement("div",{className:"d-flex align-items-center"},l.default.createElement("div",{className:"reservation-label d-inline"},n("Participants")," ",l.default.createElement("span",{className:"badge reservation-badge"},a))),l.default.createElement("div",{className:"mt-1"},[...e.users.filter((e=>t.participantIds.includes(e.id))).map((e=>({user:e,isInvited:!1}))),...e.users.filter((e=>t.inviteeIds.includes(e.id))).map((e=>({user:e,isInvited:!0})))].sort(((e,t)=>e.user.lastName.localeCompare(t.user.lastName))).map((e=>l.default.createElement("div",{key:e.user.id},l.default.createElement("span",{className:"me-1"},e.user.fullName),!e.isInvited&&l.default.createElement("i",{className:"bi bi-check-circle",title:n("Participant")}),e.isInvited&&l.default.createElement("i",{className:"bi bi-question-circle",title:n("Invited")}))))),l.default.createElement("div",{className:"mt-1"},[...t.participantEmails.map((e=>({email:e,isInvited:!1}))),...t.guestEmails.map((e=>({email:e,isInvited:!0})))].sort(((e,t)=>e.email.localeCompare(t.email))).map((e=>l.default.createElement("div",{key:e.email},l.default.createElement("span",{className:"me-1"},e.email),!e.isInvited&&l.default.createElement("i",{className:"bi bi-check-circle",title:n("Participant")}),e.isInvited&&l.default.createElement("i",{className:"bi bi-question-circle",title:n("Invited")})))))))}},43915:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationParticipationActions=t.useReservationParticipationActions=void 0;const l=i(n(67294)),s=n(81468),o=i(n(83999)),c=n(82140),u=n(28193),d=n(51240),m=n(41773),f=n(69989);function v(e){const{state:t,clock:n}=e,a=t.reservation,{metadata:r,participation:i}=t,[s,c]=(0,l.useState)(!1),[u,d]=(0,l.useState)([]),[m,v]=(0,l.useState)(!1),[p,b]=(0,l.useState)(!1),[h,g]=(0,l.useState)(!1),[E,y]=(0,l.useState)(!1),[N,R]=(0,l.useState)(!1),[O,_]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1),[k,w]=(0,l.useState)(void 0),D=(a.recurrence.type||f.RepeatType.None)!==f.RepeatType.None;function M(){return a.participantIds.includes(r.userId)}function j(){return a.inviteeIds.includes(r.userId)}function A(e){r.isLoggedIn?P((()=>i.onSelfJoin(e))):k&&P((()=>i.onGuestJoin(k.trim().toLowerCase(),e)))}function P(e){v(!1),R(!1),y(!1),b(!1),g(!1),c(!0),e().then((e=>(c(!1),d(e.errors),e))).catch((e=>{console.error(e),c(!1)}))}return{isShown:!(!r.allowParticipation||a.end<=n.now(r.timezone)||(!r.allowGuestParticipation&&!r.isLoggedIn||!a.allowSelfJoin)&&(!r.isLoggedIn||!M()&&!j())),isLoading:s,errors:u,isParticipating:M(),isInvited:j(),canJoin:a.allowSelfJoin,isEmailPromptShown:m,guestEmailAddress:k,isDeclinePromptShown:p,isCancelPromptShown:h,isAcceptPromptShown:E,isJoinPromptShown:N,isRecurring:D,isEmailInvalid:O,isEmailDuplicate:C,onSelfJoin:A,onAcceptInvite:function(e){P((()=>i.onAcceptInvite(e)))},onDeclineInvite:function(e){P((()=>i.onDeclineInvite(e)))},onGuestJoin:function(e){k&&P((()=>i.onGuestJoin(k.trim().toLowerCase(),e)))},onCancelParticipation:function(e){P((()=>i.onCancelParticipation(e)))},onCloseEmailPrompt:function(){v(!1)},onCloseCancelPrompt:function(){g(!1)},onAcceptPrompt:function(){y(!0)},onDeclinePrompt:function(){b(!0)},onCloseDeclinePrompt:function(){b(!1)},onCancelParticipationPrompt:function(){g(!0)},onCloseAcceptPrompt:function(){y(!1)},onJoin:function(){r.isLoggedIn?D?R(!0):A():v(!0)},onCloseJoinPrompt:function(){R(!1)},onGuestEmailAddressChanged:function(e){w(e);const t=e.toLowerCase().trim();_(!o.validate(t)),S(a.guestEmails.includes(t)||a.participantEmails.includes(t))}}}t.useReservationParticipationActions=v,t.ReservationParticipationActions=function(){const{t:e}=(0,s.useTranslation)(),{isShown:t,isLoading:n,errors:a,isInvited:r,isParticipating:i,canJoin:o,isCancelPromptShown:p,isDeclinePromptShown:b,isEmailPromptShown:h,isJoinPromptShown:g,onCloseCancelPrompt:E,onAcceptInvite:y,onAcceptPrompt:N,onDeclinePrompt:R,onCloseEmailPrompt:O,onCloseDeclinePrompt:_,onCancelParticipationPrompt:C,isRecurring:S,isEmailInvalid:k,isEmailDuplicate:w,isAcceptPromptShown:D,onCloseAcceptPrompt:M,onJoin:j,onCancelParticipation:A,onCloseJoinPrompt:P,guestEmailAddress:T,onGuestJoin:x,onSelfJoin:I,onDeclineInvite:F,onGuestEmailAddressChanged:U}=v({state:(0,l.useContext)(c.ReservationContext),clock:new d.Clock});return t?l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"reservation-section"},l.default.createElement("div",{className:"reservation-icon-section"}," "),l.default.createElement("div",{className:"reservation-content-section reservation-action-bar",id:"reservation-participation-action-section"},n&&l.default.createElement("div",{className:"d-flex justify-content-end"},l.default.createElement(u.Spinner,null)),!n&&l.default.createElement("div",{className:"d-block d-sm-flex text-center justify-content-between align-items-center"},a.length>0?l.default.createElement("div",{className:"reservation-participation-errors"},l.default.createElement("div",null,e("WeHadTroubleProcessingYourRequest")),a.map((e=>l.default.createElement("div",{key:e,className:"form-error"},"• ",e)))):r?l.default.createElement(l.default.Fragment,null,l.default.createElement("div",null,e("YouAreInvited")),l.default.createElement("div",null,l.default.createElement("button",{type:"button",className:"btn btn-accept me-2",onClick:()=>{S?N():y()}},l.default.createElement("i",{className:"bi bi-check2-square"})," ",e("Accept")),l.default.createElement("button",{type:"button",className:"btn btn-decline",onClick:R},l.default.createElement("i",{className:"bi bi-x-square"})," ",e("Decline")))):i?l.default.createElement(l.default.Fragment,null,l.default.createElement("div",null,e("YouAreAParticipant")),l.default.createElement("div",null,l.default.createElement("button",{type:"button",className:"btn btn-cancel-participation",onClick:C},l.default.createElement("i",{className:"bi bi-x-square"})," ",e("CancelParticipation")))):o?l.default.createElement(l.default.Fragment,null,l.default.createElement("div",null,e("YouCanJoinThisReservation")),l.default.createElement("div",null,l.default.createElement("button",{type:"button",className:"btn btn-join",onClick:()=>j()},e("Join")))):l.default.createElement(l.default.Fragment,null)))),l.default.createElement(m.Modal,{isOpen:p,title:e("CancelParticipation"),onToggle:E},l.default.createElement(m.ModalBody,null,S&&l.default.createElement("div",{className:"text-center"},l.default.createElement("div",{className:"mb-3"},e("ParticipantRecurringNotice")),l.default.createElement("button",{className:"btn btn-outline-dark me-3",onClick:()=>A(f.SeriesUpdateScope.ThisInstance)},e("CancelThisInstance")),l.default.createElement("button",{className:"btn btn-outline-dark",onClick:()=>A(f.SeriesUpdateScope.FullSeries)},e("CancelSeries"))),!S&&l.default.createElement(l.default.Fragment,null,l.default.createElement("button",{className:"btn btn-outline-dark",onClick:()=>A()},e("CancelParticipation"))))),l.default.createElement(m.Modal,{isOpen:b,title:e("DeclineInvitation"),onToggle:_},l.default.createElement(m.ModalBody,null,S&&l.default.createElement("div",{className:"text-center"},l.default.createElement("div",{className:"mb-3"},e("ParticipantRecurringNotice")),l.default.createElement("button",{className:"btn btn-outline-dark me-3",onClick:()=>F(f.SeriesUpdateScope.ThisInstance)},e("DeclineThisInstance")),l.default.createElement("button",{className:"btn btn-outline-dark",onClick:()=>F(f.SeriesUpdateScope.FullSeries)},e("DeclineSeries"))),!S&&l.default.createElement("button",{className:"btn btn-outline-dark",onClick:()=>F()},e("Decline")))),l.default.createElement(m.Modal,{isOpen:D,title:e("AcceptInvitation"),onToggle:M},l.default.createElement(m.ModalBody,null,l.default.createElement("div",{className:"text-center"},l.default.createElement("div",{className:"mb-3"},e("ParticipantRecurringNotice")),l.default.createElement("button",{className:"btn btn-outline-dark me-3",onClick:()=>y(f.SeriesUpdateScope.ThisInstance)},e("AcceptThisInstance")),l.default.createElement("button",{className:"btn btn-outline-dark",onClick:()=>y(f.SeriesUpdateScope.FullSeries)},e("AcceptSeries"))))),l.default.createElement(m.Modal,{isOpen:g,title:e("JoinReservation"),onToggle:P},l.default.createElement(m.ModalBody,null,l.default.createElement("div",{className:"text-center"},l.default.createElement("div",{className:"mb-3"},e("ParticipantRecurringNotice")),l.default.createElement("button",{className:"btn btn-outline-dark me-3",onClick:()=>I(f.SeriesUpdateScope.ThisInstance)},e("JoinThisInstance")),l.default.createElement("button",{className:"btn btn-outline-dark",onClick:()=>I(f.SeriesUpdateScope.FullSeries)},e("JoinSeries"))))),l.default.createElement(m.Modal,{isOpen:h,title:e("JoinReservation"),onToggle:O},l.default.createElement(m.ModalBody,null,l.default.createElement("div",{className:"text-center"},l.default.createElement("div",null,e("JoinAsGuestNotice")),l.default.createElement("div",{className:"text-start"},l.default.createElement("label",{className:"form-label"},e("EmailAddress")),l.default.createElement("input",{type:"email",className:"form-control",autoFocus:!0,value:T,onChange:e=>U(e.target.value)}),k&&l.default.createElement("div",{className:"form-error"},e("ValidEmailRequired")),w&&l.default.createElement("div",{className:"form-error"},e("YouAreAlreadyParticipating"))),S&&l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"mt-3 mb-3"},e("ParticipantRecurringNotice")),l.default.createElement("button",{className:"btn btn-outline-dark me-3",onClick:()=>x(f.SeriesUpdateScope.ThisInstance)},e("JoinThisInstance")),l.default.createElement("button",{className:"btn btn-outline-dark",onClick:()=>x(f.SeriesUpdateScope.FullSeries)},e("JoinSeries"))),!S&&l.default.createElement("button",{className:"btn btn-outline-dark",onClick:()=>x()},e("Join")))))):l.default.createElement(l.default.Fragment,null)}},65613:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationPrintButtonDisplay=void 0;const r=a(n(67294)),i=n(81468);t.ReservationPrintButtonDisplay=function(){const{t:e}=(0,i.useTranslation)();return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"reservation-top-bar justify-content-end justify-content-sm-between"},r.default.createElement("div",{className:"reservation-heading d-none d-sm-block"},e("ViewReservation")),r.default.createElement("div",{className:"reservation-buttons"},r.default.createElement("button",{className:"btn btn-primary me-2",onClick:()=>window.print()},r.default.createElement("span",{className:"bi bi-printer"})," ",e("Print")))))}},88741:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationResourcesDisplay=void 0;const l=i(n(67294)),s=n(81468);n(3751),n(35725);const o=n(82140),c=n(80386);t.ReservationResourcesDisplay=function(){const{t:e}=(0,s.useTranslation)(),t=(0,l.useContext)(o.ReservationContext),n=t.reservation;return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"reservation-section",id:"reservation-resources-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-shop-window"})),l.default.createElement("div",{className:"reservation-content-section row g-0"},l.default.createElement("div",{className:"col-sm-6"},l.default.createElement("div",{className:"d-flex align-items-center"},l.default.createElement("div",{className:"reservation-label d-inline"},e("Resources")," ",l.default.createElement("span",{className:"badge reservation-badge"},n.resourceIds.length))),l.default.createElement("div",{className:"reservation-selected-resources mt-1"},n.resourceIds.map((e=>{const n=t.resourcesById[e];return n?l.default.createElement(c.ReservationResource,{key:e,resource:n,resources:t.resources,resourceAttributes:t.resourceAttributes}):l.default.createElement(l.default.Fragment,null)})))),l.default.createElement("div",{className:"col-sm-6 mt-4 mt-sm-0"},l.default.createElement("div",{className:"d-flex align-items-center"},l.default.createElement("div",{className:"reservation-label d-inline"},e("Accessories")," ",l.default.createElement("span",{className:"badge reservation-badge"},n.accessories.length))),l.default.createElement("div",null,l.default.createElement("div",{className:"reservation-selected-accessories"},n.accessories.map((e=>{const n=t.accessories.find((t=>t.id===e.id));return n?l.default.createElement("div",{key:e.id,className:"reservation-accessory"},l.default.createElement("div",{className:"badge reservation-accessory-quantity"},e.quantityReserved),l.default.createElement("div",{className:"reservation-accessory-name"},n.name)):l.default.createElement(l.default.Fragment,null)}))))))))}},48676:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationTimesDisplay=void 0;const l=i(n(67294)),s=n(81468),o=n(82140),c=n(51240),u=n(12907),d=n(69989);t.ReservationTimesDisplay=function(){const{t:e}=(0,s.useTranslation)(),t=(0,l.useContext)(o.ReservationContext),n=t.reservation;return l.default.createElement("div",{className:"reservation-section",id:"reservation-times-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-clock"})),l.default.createElement("div",{className:"reservation-content-section d-block d-sm-flex flex-wrap"},l.default.createElement("div",{className:" me-sm-5"},l.default.createElement("div",{className:"reservation-label"},e("BeginDate")),l.default.createElement("div",null,n.start.toLocaleDateString(void 0,c.DATE_TIME_FORMAT))),l.default.createElement("div",{className:" me-sm-5 mt-1 mt-sm-0"},l.default.createElement("div",{className:"reservation-label"},e("EndDate")),l.default.createElement("div",null,n.end.toLocaleDateString(void 0,c.DATE_TIME_FORMAT))),l.default.createElement("div",{className:"d-block d-sm-flex mt-1 mt-sm-0 align-items-end pb-sm-2"},(0,u.formatDuration)((0,u.getDuration)(n.end,n.start),e)),!t.metadata.preventRecurrence&&null!==n.recurrence.type&&n.recurrence.type!==d.RepeatType.None&&l.default.createElement("div",{className:"col-12 mt-4"},l.default.createElement("div",{className:"recurrence-label"},e("RepeatPrompt")),n.recurrence.type===d.RepeatType.Daily&&l.default.createElement("div",null,e("Daily")," ",e("RepeatEveryPrompt")," ",n.recurrence.interval," ",e("days")," ",e("RepeatUntilPrompt")," ",n.recurrence.terminationDate.toLocaleDateString(void 0,c.DATE_FORMAT)),n.recurrence.type===d.RepeatType.Weekly&&l.default.createElement("div",null,e("Weekly")," ",e("RepeatEveryPrompt")," ",n.recurrence.interval," ",e("weeks")," ",e("RepeatDaysPrompt")," ",n.recurrence.weekdays.map((t=>l.default.createElement("span",{key:t},e(function(e){switch(e){case 0:return"DaySundayAbbr";case 1:return"DayMondayAbbr";case 2:return"DayTuesdayAbbr";case 3:return"DayWednesdayAbbr";case 4:return"DayThursdayAbbr";case 5:return"DayFridayAbbr";case 6:return"DaySaturdayAbbr"}return""}(t))," ")))," ",e("RepeatUntilPrompt")," ",n.recurrence.terminationDate.toLocaleDateString(void 0,c.DATE_FORMAT)),n.recurrence.type===d.RepeatType.Monthly&&l.default.createElement("div",null,e("Monthly")," ",e("RepeatEveryPrompt")," ",n.recurrence.interval," ",e("months")," ",e("RepeatDaysPrompt")," ","dayOfMonth"===n.recurrence.monthlyType&&l.default.createElement("span",null,e("DateOfMonth")),"dayOfWeek"===n.recurrence.monthlyType&&l.default.createElement("span",null,e("WeekOfMonth"))," ",e("RepeatUntilPrompt")," ",n.recurrence.terminationDate.toLocaleDateString(void 0,c.DATE_FORMAT)),n.recurrence.type===d.RepeatType.Yearly&&l.default.createElement("div",null,e("Yearly")," ",e("RepeatEveryPrompt")," ",n.recurrence.interval," ",e("years")," ",e("RepeatUntilPrompt")," ",n.recurrence.terminationDate.toLocaleDateString(void 0,c.DATE_FORMAT)),n.recurrence.type===d.RepeatType.Custom&&l.default.createElement("div",null,e("On")," ",n.recurrence.repeatDates.map((e=>e.toLocaleDateString(void 0,c.DATE_FORMAT))).join(", ")))))}},70102:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationTitleDisplay=void 0;const l=i(n(67294)),s=n(81468),o=n(82140);t.ReservationTitleDisplay=function(){var e;const t=(0,l.useContext)(o.ReservationContext),{t:n}=(0,s.useTranslation)();return l.default.createElement("div",{className:"reservation-section",id:"reservation-title-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-card-heading"})),l.default.createElement("div",{className:"reservation-content-section"},l.default.createElement("div",null,l.default.createElement("div",{className:"form-label reservation-label"},n("Title")),l.default.createElement("div",null,(null===(e=t.reservation)||void 0===e?void 0:e.title)||n("None")))))}},53220:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationWaitlist=t.useReservationWaitlist=void 0;const l=i(n(67294)),s=n(81468),o=n(82140),c=n(28193),u=n(51240);function d(e){const{state:t,clock:n}=e,[a,r]=(0,l.useState)(!1),[i,s]=(0,l.useState)(t.metadata.isWaitlisted);return{isShown:t.metadata.allowWaitlist&&n.now(t.metadata.timezone)<t.reservation.end,isLoading:a,isWaitlisted:i,onJoinWaitlist:function(){r(!0),t.onSelfJoinWaitlist().then((e=>(s(e.success),r(!1),e))).catch((e=>{console.error(e),r(!1)}))},onRemoveWaitlist:function(){r(!0),t.onRemoveWaitlist().then((e=>(s(!e.success),r(!1),e))).catch((e=>{console.error(e),r(!1)}))}}}t.useReservationWaitlist=d,t.ReservationWaitlist=function(){const{t:e}=(0,s.useTranslation)(),{isShown:t,isLoading:n,isWaitlisted:a,onJoinWaitlist:r,onRemoveWaitlist:i}=d({state:(0,l.useContext)(o.ReservationContext),clock:new u.Clock});return t?l.default.createElement("div",{className:"reservation-section",id:"reservation-waitlist-section"},l.default.createElement("div",{className:"reservation-icon-section"}," "),l.default.createElement("div",{className:"reservation-content-section reservation-action-bar"},n&&l.default.createElement("div",{className:"d-flex justify-content-end"},l.default.createElement(c.Spinner,null)),!n&&!a&&l.default.createElement("div",{className:"d-flex justify-content-between align-items-center"},l.default.createElement("div",null,e("JoinWaitlistReservationNotice")),l.default.createElement("button",{type:"button",className:"btn btn-join-waitlist",onClick:r},l.default.createElement("i",{className:"bi bi-bell"})," ",e("NotifyWhenAvailable"))),!n&&a&&l.default.createElement("div",{className:"d-flex justify-content-between align-items-center"},l.default.createElement("div",null,l.default.createElement("i",{className:"bi bi-bell"})," ",e("WaitlistRequestAdded")),l.default.createElement("button",{type:"button",className:"btn btn-cancel-waitlist",onClick:i},l.default.createElement("i",{className:"bi bi-bell-slash"})," ",e("CancelNotification"))))):l.default.createElement(l.default.Fragment,null)}},81198:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EmailReservationModal=void 0;const l=i(n(67294)),s=n(81468),o=i(n(83999)),c=n(41773),u=n(7781);t.EmailReservationModal=function(e){const{t}=(0,s.useTranslation)(),[n,a]=(0,l.useState)(""),r=(0,l.useMemo)((()=>n.split(/[\s,]/).map((e=>e.trim())).filter((e=>o.validate(e))).length),[n]);return l.default.createElement(c.Modal,{isOpen:e.isOpen,title:t("EmailReservation"),onToggle:e.onToggle},l.default.createElement(c.ModalBody,null,l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"reservation-send-email",className:"form-label"},t("EmailAddress")),l.default.createElement("input",{type:"text",value:n,className:"form-control",autoFocus:!0,onChange:e=>a(e.target.value)}),l.default.createElement("div",{className:"note"},t("MultipleEmailInstructions")))),l.default.createElement(c.ModalFooter,null,l.default.createElement(u.UpdateAndCancelButtons,{onCancel:e.onToggle,onUpdate:()=>{r>0&&e.onSend(n)},updateText:t("SendReservationAsEmail",{count:r})})))}},32761:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationAccessories=t.useReservationAccessories=void 0;const l=i(n(67294)),s=n(81468),o=n(7809),c=n(82140),u=n(94559),d=n(4374),m=n(14086);function f(e){const{state:t}=e,[n,a]=(0,l.useState)(!1),[r,i]=(0,l.useState)(!1),s=t.reservation,c=(0,l.useMemo)((()=>(0,u.createIndexed)(t.accessories)),[t.accessories]),d=(0,l.useMemo)((()=>t.accessories.filter((e=>s.accessories.some((t=>t.id===e.id&&t.quantityReserved)))).map((e=>(0,o.getReservationAccessoryView)(e,s.accessories.find((t=>t.id===e.id)).quantityReserved))).sort(((e,t)=>e.name.localeCompare(t.name)))),[s.accessories,s.resourceIds]),m=(0,l.useMemo)((()=>{const e=[];return t.accessories.forEach((t=>{const n=d.find((e=>e.id===t.id));t.resources.forEach((a=>{a.minimumQuantity&&s.resourceIds.includes(a.resourceId)&&(n?n.quantityReserved<a.minimumQuantity&&e.push({id:n.id,name:n.name,quantity:a.minimumQuantity}):e.push({id:t.id,name:t.name,quantity:a.minimumQuantity}))}))})),e}),[s.resourceIds,s.accessories]),f=(0,l.useMemo)((()=>{const e=[];return d.forEach((t=>{c[t.id].resources.forEach((n=>{n.maximumQuantity&&t.quantityReserved>n.maximumQuantity&&e.push({id:t.id,name:t.name,quantity:n.maximumQuantity})}))})),e}),[s.resourceIds,s.accessories]),v=(0,l.useMemo)((()=>{const e=[];return d.forEach((n=>{const a=c[n.id];if(a.resources.length>0){const r=a.resources.map((e=>e.resourceId));r.some((e=>s.resourceIds.includes(e)))||e.push({id:n.id,name:n.name,resourceNames:r.filter((e=>void 0!==t.resourcesById[e])).map((e=>t.resourcesById[e].name))})}})),e}),[s.resourceIds,s.accessories]);function p(e){t.onAccessoriesChanged(e)}return{accessoryMinimums:m,accessoryMaximums:f,selectedAccessories:d,allAccessories:t.accessories.sort(((e,t)=>e.name.localeCompare(t.name))),onAccessoriesChanged:p,accessoryMustBeBookedWith:v,isAccessoryScannerOpen:r,isAccessoryQrError:n,onAccessoryQRScanned:function(e){if(r)if(e.includes("pid=")){a(!1);const n=e.split("pid=")[1],r=t.accessories.find((e=>e.publicId===n));if(!r)return void a(!0);if(s.accessories.some((e=>e.id===r.id)))return void i(!1);let l=1;const o=m.find((e=>e.id===r.id));o&&(l=o.quantity),p([...s.accessories,{id:r.id,quantityReserved:l}]),i(!1)}else a(!0)},onAccessoryQRError:()=>a(!0),onAccessoryQRScannerClosed:()=>{i(!1),a(!1)},onAccessoryQRScannerOpened:()=>{i(!0),a(!1)},selectedResourceIds:s.resourceIds}}t.useReservationAccessories=f,t.ReservationAccessories=function(){const{accessoryMaximums:e,accessoryMinimums:t,selectedAccessories:n,allAccessories:a,selectedResourceIds:r,accessoryMustBeBookedWith:i,onAccessoriesChanged:o,isAccessoryQrError:u,isAccessoryScannerOpen:v,onAccessoryQRScannerOpened:p,onAccessoryQRScannerClosed:b,onAccessoryQRError:h,onAccessoryQRScanned:g}=f({state:(0,l.useContext)(c.ReservationContext)}),{t:E}=(0,s.useTranslation)(),[y,N]=(0,l.useState)(!1);return 0===a.length?l.default.createElement(l.default.Fragment,null):l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"d-flex align-items-center"},l.default.createElement("div",{className:"reservation-label d-inline"},E("Accessories")," ",l.default.createElement("span",{className:"badge reservation-badge"},n.length)),l.default.createElement("button",{type:"button",className:"btn btn-link btn-change-resources",onClick:()=>N(!0)},0===n.length&&l.default.createElement(l.default.Fragment,null,E("Add")),n.length>0&&l.default.createElement(l.default.Fragment,null,E("Change"))," ",l.default.createElement("i",{className:"bi bi-plus-circle"})),l.default.createElement("button",{type:"button",className:"btn btn-link btn-scan-resource-qr d-lg-none",onClick:p},l.default.createElement("span",{className:"bi bi-upc-scan"}))),l.default.createElement("div",null,l.default.createElement("div",{className:"reservation-selected-accessories"},n.map((e=>l.default.createElement("div",{key:e.id,className:"reservation-accessory"},l.default.createElement("div",{className:"badge reservation-accessory-quantity"},e.quantityReserved),l.default.createElement("div",{className:"reservation-accessory-name"},e.name))))),t.map((e=>l.default.createElement("div",{key:e.id,className:"reservation-errors"},"• ",E("AccessoryMinQuantityErrorMessage",{s1:e.quantity,s2:e.name})))),e.map((e=>l.default.createElement("div",{key:e.id,className:"reservation-errors"},"• ",E("AccessoryMaxQuantityErrorMessage",{s1:e.quantity,s2:e.name})))),i.map((e=>l.default.createElement("div",{key:e.id,className:"reservation-errors"},"• ",E("AccessoryResourceRequiredErrorMessage",{s1:e.name,s2:e.resourceNames.join(", ")}))))),l.default.createElement(d.ReservationAccessoriesEdit,{isOpen:y,selectedAccessories:n,allAccessories:a,onAccessoriesChanged:o,onToggle:()=>N(!1),selectedResourceIds:r}),l.default.createElement(m.QRScanner,{isOpen:v,isError:u,onClose:b,errorMessage:E("AccessoryQRScanFailed"),onScanned:g,onError:h}))}},4374:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationAccessoriesEdit=void 0;const l=i(n(67294)),s=n(81468),o=n(41773),c=n(28193),u=n(82140),d=n(7781);t.ReservationAccessoriesEdit=function(e){const{t}=(0,s.useTranslation)(),n=(0,l.useContext)(u.ReservationContext),{allAccessories:a,selectedResourceIds:r,onToggle:i,isOpen:m,onAccessoriesChanged:f}=e,[v,p]=(0,l.useState)([]),[b,h]=(0,l.useState)(!1),[g,E]=(0,l.useState)(e.selectedAccessories),[y,N]=(0,l.useState)(!0);function R(e){var t;return(null===(t=g.find((t=>t.id===e.id)))||void 0===t?void 0:t.quantityReserved.toString())||""}const O=(0,l.useMemo)((()=>a.some((e=>e.resources.length>0))),a);return(0,l.useEffect)((()=>{m?(h(!0),n.onAccessoryAvailabilityChecked().then((e=>(p(e),h(!1),e))).catch((()=>{}))):h(!1)}),[m]),(0,l.useEffect)((()=>{E(g)}),[g,m]),l.default.createElement(o.Modal,{isOpen:m,title:"Accessories",onToggle:i,className:"reservation-resource-picker-modal"},l.default.createElement(o.ModalBody,null,O&&l.default.createElement("div",{className:"form-check"},l.default.createElement("input",{id:"accessory-show-only-applicable",type:"checkbox",className:"form-check-input",checked:y,onChange:e=>N(e.target.checked)}),l.default.createElement("label",{htmlFor:"accessory-show-only-applicable"},t("OnlyApplicableAccessories"))),l.default.createElement("table",{className:"table"},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",{style:{width:"50%"}},t("Accessory")),l.default.createElement("th",null,t("QuantityRequested")),l.default.createElement("th",null,t("QuantityAvailable")))),l.default.createElement("tbody",null,a.filter((e=>(e=>!O||!y||0===e.resources.length||e.resources.some((e=>r.includes(e.resourceId))))(e))).map((e=>{var n;const a=(null===(n=function(e){const t=v.find((t=>t.id===e.id));return t?t.quantity:e.quantityAvailable}(e))||void 0===n?void 0:n.toString())||null;return l.default.createElement("tr",{key:e.id},l.default.createElement("td",null,e.name),l.default.createElement("td",null,l.default.createElement("label",{className:"visually-hidden"},t("QuantityRequested")),l.default.createElement("input",{className:"form-control",type:"number",min:0,max:a||void 0,value:R(e),onChange:t=>{return n=e,a=t.target.value,void E([...g.filter((e=>e.id!==n.id)),{id:n.id,quantityReserved:Number.parseInt(a)}]);var n,a}})),l.default.createElement("td",null,null!==a&&l.default.createElement("span",null,a),null===a&&l.default.createElement("span",{title:t("Unlimited")},"∞")))}))))),l.default.createElement(o.ModalFooter,null,b&&l.default.createElement(c.Spinner,{messageKey:"CheckingAvailability"}),l.default.createElement(d.UpdateAndCancelButtons,{onCancel:i,onUpdate:()=>{f(g),i()}})))}},45410:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function l(e){try{o(a.next(e))}catch(e){i(e)}}function s(e){try{o(a.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}o((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationApi=void 0;const r=n(81902),i=n(69989),l=n(12907);class s extends r.Api{loadReservation(e){return a(this,void 0,void 0,(function*(){return this.get("api/reservation.php","load",{sd:e.startDate,ed:e.endDate,sid:e.scheduleId,rid:e.resourceId,rd:e.reservationDate,rn:e.referenceNumber,pid:e.resourcePublicId,srn:e.sourceReferenceNumber},(e=>{const t=Object.assign({},e);return t.reservation=this.reservationStringToDate(e.reservation),t.schedule.upcomingAppointments=e.schedule.upcomingAppointments.map((e=>({start:(0,l.stringToDate)(e.start.toString()),end:(0,l.stringToDate)(e.end.toString())}))),t}))}))}getUnavailableResourceIds(e,t,n,r){return a(this,void 0,void 0,(function*(){return this.get("api/resources.php","check-unavailable",{sd:(0,l.dateToSystemString)(e),ed:(0,l.dateToSystemString)(t),sid:n.toString(),rn:r||""})}))}checkAvailability(e,t,n,r,i){return a(this,void 0,void 0,(function*(){return this.get("api/resources.php","check-availability",{rid:e.join(","),sd:(0,l.dateToSystemString)(t),ed:(0,l.dateToSystemString)(n),sid:r.toString(),rn:i||""})}))}getAccessoryAvailability(e,t,n){return a(this,void 0,void 0,(function*(){return this.get("api/resources.php","accessory-availability",{sd:(0,l.dateToSystemString)(e),ed:(0,l.dateToSystemString)(t),rn:n||""})}))}getReservationCredits(e){return a(this,void 0,void 0,(function*(){return this.post("api/reservation.php","credits",e)}))}getReservationAttributes(e,t){return a(this,void 0,void 0,(function*(){let n;return t.sourceReferenceNumber&&!e.referenceNumber&&(n=Object.assign(Object.assign({},e),{referenceNumber:t.sourceReferenceNumber})),this.post("api/reservation.php","attributes",n||e)}))}getReservationAvailability(e,t){return a(this,void 0,void 0,(function*(){const n=JSON.stringify({sid:t,rid:e.resourceIds,start:e.start,end:e.end,participants:e.participantIds,invitees:e.inviteeIds,ownerId:e.ownerId});return fetch(`${this.baseUrl}/ajax/availability.php`,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Csrf-Token":`${this.csrfToken}`},body:n}).then((e=>e.text()))}))}createReservation(e,t,n){return a(this,void 0,void 0,(function*(){return this.saveReservation("create",e,t,n,i.SeriesUpdateScope.FullSeries)}))}updateReservation(e,t,n,r){return a(this,void 0,void 0,(function*(){return this.saveReservation("update",e,t,n,r)}))}saveReservation(e,t,n,r,i){return a(this,void 0,void 0,(function*(){const a={reservation:t,retryParameters:n,updateScope:i},l=new FormData;return l.append("request",JSON.stringify(a)),r.forEach(((e,t)=>{l.append(`files[${t}]`,e)})),this.postFiles("api/reservation.php",e,l)}))}deleteReservation(e,t,n){return a(this,void 0,void 0,(function*(){const a={referenceNumber:e.referenceNumber,scope:t,reason:n};return this.post("api/reservation.php","delete",a)}))}joinWaitlist(e){return a(this,void 0,void 0,(function*(){return this.post("api/reservation.php","waitlist",e)}))}removeFromWaitlist(e){return a(this,void 0,void 0,(function*(){return this.post("api/reservation.php","waitlistRemove",e)}))}checkIn(e){return a(this,void 0,void 0,(function*(){const t=yield this.post("api/reservation.php","checkin",{referenceNumber:e});return this.reservationStringToDate(t)}))}checkOut(e){return a(this,void 0,void 0,(function*(){const t=yield this.post("api/reservation.php","checkout",{referenceNumber:e});return this.reservationStringToDate(t)}))}approve(e){return a(this,void 0,void 0,(function*(){const t=yield this.post("api/reservation.php","approve",{referenceNumber:e});return this.reservationStringToDate(t)}))}joinReservationAsGuest(e,t,n){return a(this,void 0,void 0,(function*(){const a={referenceNumber:e,fullSeries:n,emailAddress:t};return this.post("api/reservation.php","joinAsGuest",a)}))}joinReservation(e,t){return a(this,void 0,void 0,(function*(){const n={referenceNumber:e,fullSeries:t,emailAddress:null};return this.post("api/reservation.php","join",n)}))}cancelParticipation(e,t){return a(this,void 0,void 0,(function*(){const n={referenceNumber:e,fullSeries:t,emailAddress:null};return this.post("api/reservation.php","cancelParticipation",n)}))}acceptInvite(e,t){return a(this,void 0,void 0,(function*(){const n={referenceNumber:e,fullSeries:t,emailAddress:null};return this.post("api/reservation.php","acceptInvite",n)}))}declineInvite(e,t){return a(this,void 0,void 0,(function*(){const n={referenceNumber:e,fullSeries:t,emailAddress:null};return this.post("api/reservation.php","declineInvite",n)}))}sendAsEmail(e,t){return a(this,void 0,void 0,(function*(){return this.post("api/reservation.php","sendAsEmail",{referenceNumber:e,emails:t})}))}getUserDetails(e){return a(this,void 0,void 0,(function*(){return this.get("api/user-details.php","load",{uid:e})}))}reservationStringToDate(e){return Object.assign(Object.assign({},e),{start:(0,l.stringToDate)((e.start||"").toString()),end:(0,l.stringToDate)((e.end||"").toString()),checkinDate:(0,l.stringToDate)((e.checkinDate||"").toString()),checkoutDate:(0,l.stringToDate)((e.checkoutDate||"").toString()),termsAcceptedDate:(0,l.stringToDate)((e.termsAcceptedDate||"").toString()),recurrence:Object.assign(Object.assign({},e.recurrence),{terminationDate:(0,l.stringToDate)((e.recurrence.terminationDate||"").toString()),repeatDates:(e.recurrence.repeatDates||[]).map((e=>(0,l.stringToDate)(e.toString())))})})}}t.ReservationApi=s},68628:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationAppComponent=void 0;const s=i(n(67294)),o=l(n(23768)),c=n(51073),u=n(32035),d=n(45410),m=n(48682),f=n(79641);t.ReservationAppComponent=function(e){(0,o.default)({lang:e.lang,basePath:e.path,version:e.version});const t=new d.ReservationApi(e.path,e.csrf);return s.default.createElement(s.Suspense,{fallback:s.default.createElement("div",null,"Loading...")},s.default.createElement(c.AppSettingsProvider,Object.assign({},e),s.default.createElement(m.ReservationProvider,Object.assign({api:t},e),s.default.createElement(f.ErrorBoundary,{api:t},s.default.createElement(u.ReservationEntry,null)))))}},34335:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationAppointmentTimes=void 0;const r=a(n(67294)),i=n(51240),l=n(81468);t.ReservationAppointmentTimes=function(e){var t;const{context:n}=e,{t:a}=(0,l.useTranslation)();if(0===(null===(t=n.schedule)||void 0===t?void 0:t.upcomingAppointments.length))return r.default.createElement("div",{className:"reservation-section",id:"reservation-times-section"},r.default.createElement("div",{className:"reservation-icon-section"},r.default.createElement("i",{className:"bi bi-clock"})),r.default.createElement("div",{className:"reservation-content-section d-block d-sm-flex flex-wrap"},r.default.createElement("span",{className:"alert alert-danger"},a("NoAvailableAppointments"))));const s=n.schedule.upcomingAppointments;return r.default.createElement("div",{className:"reservation-section"},r.default.createElement("div",{className:"reservation-icon-section"},r.default.createElement("i",{className:"bi bi-clock"})),r.default.createElement("div",{className:"reservation-content-section d-block d-sm-flex flex-wrap",id:"reservation-appointments-section"},r.default.createElement("div",{className:"reservation-label me-sm-3"},a("AppointmentTime")),s.map(((e,t)=>{return r.default.createElement("div",{role:"button",key:t,className:(l=e,(n.reservation.start===l.start&&n.reservation.end===l.end?"selected-appointment":"available-appointment")+" mb-2"),title:a("SelectThisAppointment"),onClick:()=>function(e){n.onDatesChanged(e.start,e.end)}(e)},e.start.toLocaleDateString(void 0,i.DATE_TIME_FORMAT)," - ",e.end.toLocaleDateString(void 0,i.DATE_TIME_FORMAT));var l}))))}},40383:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationApproval=t.useReservationApproval=void 0;const l=i(n(67294)),s=n(81468),o=n(28193);function c(e){const{state:t}=e,[n,a]=(0,l.useState)(!1),[r,i]=(0,l.useState)(t.metadata.canApprove);return{isShown:r,isLoading:n,onApproved:function(){a(!0),t.onApproved().then((()=>{a(!1),i(!1)})).catch((e=>{console.error(e),a(!1)}))}}}t.useReservationApproval=c,t.ReservationApproval=function(e){const{t}=(0,s.useTranslation)(),{isShown:n,isLoading:a,onApproved:r}=c({state:e.context});return n?l.default.createElement("div",{className:"reservation-section",id:"reservation-approval-section"},l.default.createElement("div",{className:"reservation-icon-section"}," "),l.default.createElement("div",{className:"reservation-content-section reservation-action-bar"},a&&l.default.createElement("div",{className:"d-flex justify-content-end"},l.default.createElement(o.Spinner,null)),!a&&l.default.createElement("div",{className:"d-flex justify-content-between align-items-center"},l.default.createElement("div",null,t("RequiresApprovalNotice")),l.default.createElement("button",{type:"button",className:"btn btn-approve",onClick:r},l.default.createElement("i",{className:"bi bi-check-square"})," ",t("Approve"))))):l.default.createElement(l.default.Fragment,null)}},81118:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationAttachments=t.useReservationAttachments=void 0;const l=i(n(67294)),s=n(41389),o=n(81468),c=n(68208),u=n(51073),d=n(12907);function m(e){const{state:t,urlMethods:n,appState:a}=e,r=t.reservation,[i,s]=(0,l.useState)(!1),o=t.metadata.acceptedReservationFileTypes.split(/[\s,]./).map((e=>e.replace(".","")));return{uploadsEnabled:t.metadata.uploadsEnabled,maxUploadSize:t.metadata.maxUploadSize,maxUploadCount:t.metadata.maxUploadCount,acceptedFileTypes:(c=t.metadata.acceptedReservationFileTypes,c.split(",").map((e=>e.trim())).map((e=>e.startsWith(".")?e:`.${e} `))),isError:i,allFiles:function(){function e(e){return`${a.path}/attachments/reservation-file.php?afid=${e.id}&rn=${r.referenceNumber}`}return[...r.attachments.map((t=>({id:t.id,name:t.name,src:e(t)}))),...t.reservationUploads.map((e=>({id:0,name:e.name,src:n.createObjectURL(e)})))]}(),onFilesDropped:function(e){s(!1);const n=e.filter((e=>!t.reservationUploads.some((t=>t.name===e.name))&&!r.attachments.some((t=>t.name===e.name)))),a=n.some((e=>!o.some((t=>e.name.endsWith(t))))),i=n.some((e=>e.size>t.metadata.maxUploadSize)),l=n.length>t.metadata.maxUploadCount;a||i||l?s(!0):t.onAttachmentsAdded([...t.reservationUploads,...n])},onRemove:function(e){const n=r.attachments.find((t=>t.name===e));n?t.onAttachmentRemoved(n):t.onAttachmentsAdded(t.reservationUploads.filter((t=>t.name!==e)))},onError:function(){s(!0)}};var c}t.useReservationAttachments=m,t.ReservationAttachments=function(e){const{t}=(0,o.useTranslation)(),{uploadsEnabled:n,onFilesDropped:a,maxUploadSize:r,maxUploadCount:i,acceptedFileTypes:f,allFiles:v,onRemove:p,onError:b,isError:h}=m({state:e.context,appState:(0,l.useContext)(u.AppSettingsContext),urlMethods:(0,c.getDefaultFileUrlMethods)()}),{getRootProps:g,getInputProps:E,isDragActive:y}=(0,s.useDropzone)({accept:f.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:[]})),{}),maxFiles:i,maxSize:r,minSize:1,onDrop:(e,t)=>{t.length>0?b(t):a(e)}});return n?l.default.createElement("div",{className:"reservation-section",id:"reservation-attachments-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-file-earmark-plus"})),l.default.createElement("div",{className:"reservation-content-section"},l.default.createElement("div",{className:"reservation-label d-inline"},t("Attachments")," ",l.default.createElement("span",{className:"badge reservation-badge"},v.length)),l.default.createElement("div",Object.assign({},g({className:"dropzone reservation-attachment-drop mt-1 "+(y?"dropzone-active":"")})),l.default.createElement("div",null,l.default.createElement("input",Object.assign({},E({capture:!0}))),l.default.createElement("span",{className:"bi bi-upload"}),l.default.createElement("div",{className:"d-none d-sm-block"},t("UploadFiles")))),l.default.createElement("div",{className:"note"},f," up to ",(0,d.bytesToString)(r)),h&&l.default.createElement("div",{className:"reservation-errors"},t("ReservationUploadError")),l.default.createElement("div",{className:"d-flex"},v.map((e=>l.default.createElement("div",{key:e.name,className:"reservation-upload-file"},l.default.createElement("a",{href:e.src,download:e.src,target:"_blank",rel:"noreferrer"},e.name),l.default.createElement("button",{type:"button",className:"btn btn-link remove-button",onClick:()=>p(e.name)},l.default.createElement("span",{className:"bi bi-x"})))))))):l.default.createElement(l.default.Fragment,null)}},66237:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationAvailability=void 0;const l=i(n(67294)),s=n(82140),o=n(28193);t.ReservationAvailability=function(e){const t=(0,l.useContext)(s.ReservationContext),{reservation:n}=t,[a,r]=(0,l.useState)(!1),[i,c]=(0,l.useState)(""),u=(0,l.useRef)(null);function d(e){return 60*e.getHours()+e.getMinutes()}function m(e){return e?Number.parseInt(e.split("-").join("")):0}function f(e){return e?m(`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`):0}function v(){if(!(u.current&&n&&n.start&&n.end))return;if(n.end<=n.start)return;const e=u.current;e.querySelectorAll(".availability-highlighter").forEach((e=>e.remove())),e.querySelectorAll("table.reservations").forEach((t=>{const a=d(n.start),r=d(n.end);let i,l;const s=t.querySelectorAll("thead > tr > td[data-start]");s.forEach((e=>{Number.parseInt(e.dataset.start||"")<=a&&(i=e);let t=Number.parseInt(e.dataset.end||"");0===t&&(t=1440),t<=r&&(l=e)})),f(n.start)<m(t.dataset.date||null)&&(i=s[0]),f(n.end)>m(t.dataset.date||null)&&(l=s[s.length-1]);const o=document.createElement("div");o.className="availability-highlighter",e.append(o),o.style.height=`${t.offsetHeight}px`,o.style.width=`${l.offsetLeft-i.offsetLeft+l.offsetWidth+1}px`,o.style.top=`${t.offsetTop}px`,o.style.left=`${i.offsetLeft}px`}))}return(0,l.useEffect)((()=>{e.isOpen&&(r(!0),t.onReservationAvailabilityChecked().then((e=>(r(!1),c(e),v(),window.addEventListener("resize",v),e))).catch((e=>console.error(e))))}),[e.isOpen,null==n?void 0:n.start,null==n?void 0:n.end,null==n?void 0:n.resourceIds,null==n?void 0:n.ownerId,null==n?void 0:n.participantEmails,null==n?void 0:n.inviteeIds]),(0,l.useEffect)((()=>{v()}),[u.current]),n?a?l.default.createElement("div",null,l.default.createElement(o.Spinner,null)):e.isOpen?l.default.createElement("div",{ref:u,className:"reservation-availability",dangerouslySetInnerHTML:{__html:i}}):l.default.createElement(l.default.Fragment,null):l.default.createElement(l.default.Fragment,null)}},31728:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationButtons=t.useReservationButtons=void 0;const l=i(n(67294)),s=n(81468),o=n(69989),c=n(41773),u=n(60519),d=n(50208),m=n(51073),f=n(81198),v=n(7809);function p(e){const{state:t,appState:n}=e,a=t.reservation,{reservationSaveState:r,schedule:i,metadata:s,resourcesById:c}=t,[u,d]=(0,l.useState)(null!==a.recurrence.type&&a.recurrence.type!==o.RepeatType.None),[m,f]=(0,l.useState)(null!==a.referenceNumber),[p,b]=(0,l.useState)(!1),[h,g]=(0,l.useState)(!1),[E,y]=(0,l.useState)(!1),[N,R]=(0,l.useState)(!1),[O,_]=(0,l.useState)("");return(0,l.useEffect)((()=>{f(null!==a.referenceNumber),d(null!==a.recurrence.type&&a.recurrence.type!==o.RepeatType.None)}),[]),{isExisting:m,cancelUrl:(0,v.getReturnUrlWithHash)(t,n),showDeletePrompt:h,showDeleteRecurringPrompt:N,showUpdateRecurring:p,showEmailReservationPrompt:E,deleteReason:O,isSaveSuccess:r.isSaveSuccess,icsUrl:m?`${n.path}/export/ical.php?rn=${a.referenceNumber}`:"",googleCalendarUrl:function(){var e;if(!m||!a.start||!a.end)return"";const t=e=>e.toISOString().replace(/[:-]/g,""),n=(null===(e=c[a.resourceIds[0]])||void 0===e?void 0:e.name)||"";return`https://www.google.com/calendar/event?action=TEMPLATE&text=${encodeURIComponent(a.title||"")}&dates=${t(a.start)}/${t(a.end)}&details=${encodeURIComponent(a.description||"")}&location=${encodeURIComponent(n)}&trp=false&sprop=&sprop=name:`}(),duplicateUrl:m?`${n.path}/reservation?srn=${a.referenceNumber}&redirect=${encodeURIComponent(s.returnUrl)}`:"",showSaveButton:!(null==i?void 0:i.usesAppointments)||(null==i?void 0:i.upcomingAppointments.length)>0,requireDeleteReason:s.deleteReasonRequired,onSave:function(){m?u&&t.isPartialSeriesUpdateAllowed()?b(!0):t.onReservationUpdated():t.onReservationCreated()},onRecurringSave:function(e){t.onReservationUpdated(e)},onRecurringUpdateToggle:function(){b(!p)},onDelete:function(){(!s.deleteReasonRequired||O.trim().length>0)&&t.onReservationDeleted(o.SeriesUpdateScope.FullSeries,O)},onRecurringDelete:function(e){(!s.deleteReasonRequired||O.trim().length>0)&&t.onReservationDeleted(e,O)},onDeleteToggle:function(){_(""),u?R(!N):g(!h)},onDeleteReasonChanged:function(e){_(e)},onEmailReservationToggle:function(){y(!E)},onSendReservationEmail:function(e){t.onReservationSentAsEmail(e),y(!1)}}}t.useReservationButtons=p,t.ReservationButtons=function(e){const{t}=(0,s.useTranslation)(),{isExisting:n,cancelUrl:a,showUpdateRecurring:r,deleteReason:i,showDeletePrompt:v,showDeleteRecurringPrompt:b,icsUrl:h,googleCalendarUrl:g,duplicateUrl:E,showSaveButton:y,requireDeleteReason:N,isSaveSuccess:R,onSave:O,onRecurringUpdateToggle:_,onRecurringSave:C,onDelete:S,onRecurringDelete:k,onDeleteToggle:w,onDeleteReasonChanged:D,onEmailReservationToggle:M,showEmailReservationPrompt:j,onSendReservationEmail:A}=p({state:e.context,appState:(0,l.useContext)(m.AppSettingsContext)});return n?l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"reservation-top-bar justify-content-end justify-content-sm-between"},l.default.createElement("div",{className:"reservation-heading d-none d-sm-block"},t("ChangeReservation")),l.default.createElement("div",{className:"reservation-buttons"},l.default.createElement("a",{className:"btn btn-light me-2",href:a},t("Close")),y&&l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"dropdown"},l.default.createElement("button",{className:"btn btn-light dropdown-toggle me-2",type:"button",id:"reservation-buttons-more","data-bs-toggle":"dropdown","aria-expanded":"false"},l.default.createElement("i",{className:"bi bi-three-dots-vertical"})),l.default.createElement("ul",{className:"dropdown-menu","aria-labelledby":"reservation-buttons-more"},l.default.createElement("li",null,l.default.createElement("a",{id:"reservation-add-to-calendar",href:h,download:h,className:"dropdown-item"},l.default.createElement("i",{className:"bi bi-calendar-plus"})," ",t("AddToOutlook"))),l.default.createElement("li",null,l.default.createElement("a",{id:"reservation-add-to-google",href:g,target:"_blank",rel:"nofollow noopener noreferrer",className:"dropdown-item"},l.default.createElement("i",{className:"bi bi-google"})," ",t("AddToGoogleCalendar"))),l.default.createElement("li",null,l.default.createElement("button",{id:"reservation-send-as-email",type:"button",className:"dropdown-item",onClick:M},l.default.createElement("i",{className:"bi bi-envelope"})," ",t("Email"))),l.default.createElement("li",null,l.default.createElement("a",{id:"reservation-duplicate",href:E,className:"dropdown-item"},l.default.createElement("i",{className:"bi bi-files"})," ",t("DuplicateReservation"))),l.default.createElement("li",null,l.default.createElement("a",{id:"reservation-print",type:"button",className:"dropdown-item",target:"_blank",href:`${decodeURIComponent(encodeURIComponent(document.location.href))}&print=1`,rel:"noreferrer"},l.default.createElement("i",{className:"bi bi-printer"})," ",t("Print"))),l.default.createElement("li",null,l.default.createElement("hr",{className:"dropdown-divider"})),l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"dropdown-item",onClick:()=>O()},l.default.createElement("i",{className:"bi bi-check2-square"})," ",t("Update"))),l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"dropdown-item",onClick:()=>w()},l.default.createElement("i",{className:"bi bi-trash"})," ",t("Delete")))))),l.default.createElement("button",{type:"button",className:"btn btn-danger me-2 d-none d-sm-block",onClick:()=>w()},l.default.createElement("i",{className:"bi bi-trash"})," ",t("Delete")),y&&l.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:()=>O()},l.default.createElement("i",{className:"bi bi-check2-square"})," ",t("Update")))),l.default.createElement(c.Modal,{isOpen:r&&!R,onToggle:_,title:t("UpdateRecurringTitle"),className:"reservation-recurring-modal"},l.default.createElement(c.ModalBody,null,l.default.createElement("div",{className:"reservation-recurring-notice"},t("UpdateRecurringNotice")),l.default.createElement("hr",null),l.default.createElement("div",{className:"reservation-recurring-buttons d-grid gap-2 d-sm-flex justify-content-sm-around gap-sm-0 mx-auto col-12"},l.default.createElement("button",{type:"button",className:"btn btn-outline-dark",onClick:()=>C(o.SeriesUpdateScope.ThisInstance)},l.default.createElement("i",{className:"bi bi-calendar3-event"})," ",t("ThisInstance")),l.default.createElement("button",{type:"button",className:"btn btn-outline-dark",onClick:()=>C(o.SeriesUpdateScope.FullSeries)},l.default.createElement("i",{className:"bi bi-calendar3"})," ",t("AllInstances")),l.default.createElement("button",{type:"button",className:"btn btn-outline-dark",onClick:()=>C(o.SeriesUpdateScope.FutureInstances)},l.default.createElement("i",{className:"bi bi-calendar3-week"})," ",t("FutureInstances")))),l.default.createElement(c.ModalFooter,null,l.default.createElement(u.CancelButton,{onClick:_}))),l.default.createElement(c.Modal,{isOpen:b&&!R,onToggle:w,title:t("DeleteReservationModalTitle"),className:"reservation-delete-modal"},l.default.createElement(c.ModalBody,null,l.default.createElement("div",{className:"reservation-recurring-notice"},t("DeleteRecurringNotice")),l.default.createElement("hr",null),l.default.createElement("div",{className:"mb-3"},l.default.createElement("label",{className:"form-label",htmlFor:"delete-reason-recurring"},t("Reason")),N&&l.default.createElement("span",{className:"d-inline-block ms-1"},"*"),l.default.createElement("textarea",{id:"delete-reason-recurring",className:"form-control",value:i,onChange:e=>D(e.target.value)}),N&&0===i.length&&l.default.createElement("div",{className:"reservation-errors"},t("Required"))),l.default.createElement("div",{className:"reservation-recurring-buttons d-grid gap-2 d-sm-flex justify-content-sm-around gap-sm-0 mx-auto col-12"},l.default.createElement("button",{type:"button",className:"btn btn-outline-dark",onClick:()=>k(o.SeriesUpdateScope.ThisInstance)},l.default.createElement("i",{className:"bi bi-calendar3-event"})," ",t("ThisInstance")),l.default.createElement("button",{type:"button",className:"btn btn-outline-dark",onClick:()=>k(o.SeriesUpdateScope.FullSeries)},l.default.createElement("i",{className:"bi bi-calendar3"})," ",t("AllInstances")),l.default.createElement("button",{type:"button",className:"btn btn-outline-dark",onClick:()=>k(o.SeriesUpdateScope.FutureInstances)},l.default.createElement("i",{className:"bi bi-calendar3-week"})," ",t("FutureInstances")))),l.default.createElement(c.ModalFooter,null,l.default.createElement(u.CancelButton,{onClick:w}))),l.default.createElement(c.Modal,{isOpen:v&&!R,onToggle:w,title:t("DeleteReservationModalTitle"),className:"reservation-delete-modal"},l.default.createElement(c.ModalBody,null,l.default.createElement("div",{className:"mb-3"},l.default.createElement("label",{className:"form-label",htmlFor:"delete-reason-recurring"},t("Reason")),N&&l.default.createElement("span",{className:"d-inline-block ms-1"},"*"),l.default.createElement("textarea",{id:"delete-reason-recurring",className:"form-control",value:i,onChange:e=>D(e.target.value)}),N&&0===i.length&&l.default.createElement("div",{className:"reservation-errors"},t("Required")))),l.default.createElement(c.ModalFooter,null,l.default.createElement(u.CancelButton,{onClick:w}),l.default.createElement(d.DeleteButton,{onClick:S}))),l.default.createElement(f.EmailReservationModal,{isOpen:j,onToggle:M,onSend:A})):l.default.createElement("div",{className:"reservation-top-bar justify-content-end justify-content-sm-between"},l.default.createElement("div",{className:"reservation-heading d-none d-sm-block"},t("NewReservation")),l.default.createElement("div",{className:"reservation-buttons"},l.default.createElement("a",{className:"btn btn-light me-2",href:a},t("Close")),y&&l.default.createElement("button",{className:"btn btn-primary",onClick:()=>O()},l.default.createElement("i",{className:"bi bi-check2-square"})," ",t("Create"))))}},15236:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationCheckin=t.useReservationCheckin=void 0;const l=i(n(67294)),s=n(81468),o=n(51240),c=n(12907),u=n(28193);function d(e){var t,n,a,r,i,s;const{state:o,clock:u}=e,d=null!==((null===(t=o.reservation)||void 0===t?void 0:t.checkinDate)||null),m=null!==((null===(n=o.reservation)||void 0===n?void 0:n.checkoutDate)||null),f=!d&&((null===(a=o.checkin)||void 0===a?void 0:a.checkinAvailable)||!1),v=!m&&((null===(r=o.checkin)||void 0===r?void 0:r.checkoutAvailable)||!1),p=(null===(i=o.checkin)||void 0===i?void 0:i.missedCheckin)||!1,b=(null===(s=o.checkin)||void 0===s?void 0:s.missedCheckout)||!1,[h,g]=(0,l.useState)(R()),[E,y]=(0,l.useState)(!1);function N(){var e,t;return(null===(e=o.checkin)||void 0===e?void 0:e.autoReleaseMinutes)&&(null===(t=o.reservation)||void 0===t?void 0:t.start)&&f?u.addMinutes(o.checkin.autoReleaseMinutes,o.reservation.start):null}function R(){const e=N();return e?(0,c.getDuration)(e,u.now(o.metadata.timezone)).minutes:null}const O=(0,l.useMemo)((()=>{const e=N();return null!==e&&u.now(o.metadata.timezone)>=e}),[h]);return(0,l.useEffect)((()=>{const e=setInterval((()=>{g(R())}),5e3);return()=>clearInterval(e)}),[]),{isShown:f||v||p||b,isCheckinShown:f,isCheckoutShown:v,isMissedCheckin:p,isMissedCheckout:b,releasedIn:h,isPastReleaseTimeShown:O,isLoading:E,onCheckIn:function(){y(!0),o.onCheckIn().then((()=>{y(!1)})).catch((e=>{console.error(e),y(!1)}))},onCheckOut:function(){y(!0),o.onCheckOut().then((()=>{y(!1)})).catch((e=>{console.error(e),y(!1)}))}}}t.useReservationCheckin=d,t.ReservationCheckin=function(e){const{t}=(0,s.useTranslation)(),{isShown:n,isCheckinShown:a,isCheckoutShown:r,releasedIn:i,isPastReleaseTimeShown:c,isLoading:m,isMissedCheckin:f,isMissedCheckout:v,onCheckIn:p,onCheckOut:b}=d({state:e.context,clock:new o.Clock});return n?l.default.createElement("div",{className:"reservation-section",id:"reservation-checkin-section"},l.default.createElement("div",{className:"reservation-icon-section"}," "),l.default.createElement("div",{className:"reservation-content-section reservation-action-bar "+(c?"reservation-checkin-past-time":r||a?"reservation-checkin-required":"")},function(){if(m)return l.default.createElement("div",{className:"d-flex justify-content-end"},l.default.createElement(u.Spinner,null));if(c)return l.default.createElement("div",null,l.default.createElement("i",{className:"bi bi-exclamation-triangle"})," ",l.default.createElement("span",null,t("PastAutoreleaseError")));if(r)return l.default.createElement("div",{className:"d-flex justify-content-end"},l.default.createElement("button",{type:"button",className:"btn btn-checkin",onClick:b},l.default.createElement("i",{className:"bi bi-box-arrow-right"})," ",t("CheckOut")));if(a){const e=i?"justify-content-between":"justify-content-end";return l.default.createElement("div",{className:`d-flex ${e} align-items-center`},i&&l.default.createElement("div",{className:"reservation-checkin-autorelease-notification"},l.default.createElement(s.Trans,{i18nKey:"AutoReleaseNotification",values:{s1:i}})),l.default.createElement("button",{type:"button",className:"btn btn-checkin",onClick:p},l.default.createElement("i",{className:"bi bi-box-arrow-in-right"})," ",t("CheckIn")))}return f?l.default.createElement("div",{className:"d-flex"},l.default.createElement("i",{className:"bi bi-exclamation-diamond me-1"})," ",l.default.createElement("div",null,t("MissedCheckinTimeWarning"))):v?l.default.createElement("div",{className:"d-flex"},l.default.createElement("i",{className:"bi bi-exclamation-diamond me-1"})," ",l.default.createElement("div",null,t("MissedCheckoutTimeWarning"))):l.default.createElement(l.default.Fragment,null)}())):l.default.createElement(l.default.Fragment,null)}},82140:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function l(e){try{o(a.next(e))}catch(e){i(e)}}function s(e){try{o(a.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}o((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationContext=t.getDefaultMetadata=t.useManageReservationsContext=void 0;const r=n(67294),i=n(69989),l=n(94559),s=n(12907),o=n(7809),c=n(51240);function u(e,t){return{allowGuestParticipation:(null==e?void 0:e.allowGuestParticipation)||!1,allowParticipation:(null==e?void 0:e.allowParticipation)||!1,descriptionRequired:(null==e?void 0:e.descriptionRequired)||!1,maxUploadCount:(null==e?void 0:e.maxUploadCount)||0,maxUploadSize:(null==e?void 0:e.maxUploadSize)||0,acceptedReservationFileTypes:(null==e?void 0:e.acceptedReservationFileTypes)||"",remindersEnabled:(null==e?void 0:e.remindersEnabled)||!1,titleRequired:(null==e?void 0:e.titleRequired)||!1,uploadsEnabled:(null==e?void 0:e.uploadsEnabled)||!1,preventRecurrence:(null==e?void 0:e.preventRecurrence)||!1,allowWaitlist:(null==e?void 0:e.allowWaitlist)||!1,isWaitlisted:!1,waitlistCount:0,canApprove:!1,canChangeUser:!1,canEdit:!1,canView:!1,returnUrl:(null==e?void 0:e.returnUrl)||"",isLoggedIn:(null==e?void 0:e.loggedIn)||!1,userId:(null==e?void 0:e.userId)||0,timezone:(null==e?void 0:e.timezone)||Intl.DateTimeFormat().resolvedOptions().timeZone.toLowerCase(),resourceCheckboxThreshold:(null==e?void 0:e.resourceCheckboxThreshold)||30,isPrinting:(null==t?void 0:t.isPrinting)||!1,limitParticipants:(null==e?void 0:e.limitParticipants)||!1,deleteReasonRequired:(null==e?void 0:e.deleteReasonRequired)||!1,meetingsEnabled:(null==e?void 0:e.meetingsEnabled)||!1,meetingConnections:{meet:{linked:!1},zoom:{linked:!1},teams:{linked:!1}}}}t.useManageReservationsContext=function(e,t,n,d){const[m,f]=(0,r.useState)(!1),[v,p]=(0,r.useState)([]),[b,h]=(0,r.useState)(!0),[g,E]=(0,r.useState)({isSaveDialogOpen:!1,isSaveSuccess:!1,reservationErrors:[],reservationCanBeRetried:!1,canJoinWaitlist:!1,isPending:!1,retryMessages:[],mode:"save",dates:[],showDetails:!1}),[y,N]=(0,r.useState)([]),[R,O]=(0,r.useState)(),[_,C]=(0,r.useState)([]),[S,k]=(0,r.useState)([]),[w,D]=(0,r.useState)([]),[M,j]=(0,r.useState)([]),[A,P]=(0,r.useState)([]),[T,x]=(0,r.useState)([]),[I,F]=(0,r.useState)(),[U,$]=(0,r.useState)(),[B,L]=(0,r.useState)(),[q,W]=(0,r.useState)(u(t,n)),[z,J]=(0,r.useState)([]),[V,G]=(0,r.useState)(null),H=(0,r.useMemo)((()=>(0,l.createIndexed)(_)),[_]),Q=d||new c.Clock;(0,r.useEffect)((()=>{h(!0),e.loadReservation(n).then((e=>{W(Object.assign(Object.assign({},q),{canChangeUser:e.canChangeUser,canEdit:e.canEdit,canView:e.canView,canApprove:e.canApprove,isWaitlisted:e.isWaitlisted,waitlistCount:e.waitlistCount,meetingConnections:e.meetingConnections})),C(e.resources),k(e.accessories),D(e.resourceAttributes),j(e.users),P(e.groups),x(e.resourceGroups),F(e.terms||void 0),$(e.schedule);const n=function(e,n,a){if(n.usesAppointments){if(0===n.upcomingAppointments.length)return{start:new Date,end:new Date};const t=n.upcomingAppointments[0];if(null===e.start||null===e.end)return{start:t.start,end:t.end};const a=n.upcomingAppointments.find((t=>t.start===e.start&&t.end===e.end));if(a)return{start:a.start,end:a.end};const r=n.upcomingAppointments.find((t=>t.start>=e.start));return r?{start:r.start,end:r.end}:{start:t.start,end:t.end}}const r=function(){let a=Q.now(t.timezone);(null==e?void 0:e.start)&&(a=c.Clock.toTimezone(e.start,t.timezone));const r=K(a,n);if(0===r.length)return{date:Q.setTime(a,"00:00"),time:"00:00"};const i=r.find((e=>l(e,a,!1)))||r[r.length-1];return{date:Q.setTime(a,i.start),time:i.start,slot:i}}(),i=function(r){var i;const o=function(){if(!e)return;let t;return e.resourceIds.forEach((e=>{var n;const r=null===(n=a.find((t=>t.id===e)))||void 0===n?void 0:n.minDuration;if(void 0!==r){const e=(0,s.intervalAsMinutes)(r);(!t||e>t)&&(t=e)}})),t}();let u=null==e?void 0:e.end;if(u)u=c.Clock.toTimezone(u,t.timezone);else{let e=Q.setTime(r.date,(null===(i=r.slot)||void 0===i?void 0:i.end)||"00:00");0===e.getHours()&&(e=Q.addDays(1,e)),u=o?r.date:e,o&&(u=Q.addMinutes(o,u))}u<=r.date&&(u=Q.addMinutes(1,r.date));const d=function(e){let t=new Date(e.valueOf()),a=X(e,n);if(1===a.length)return{date:t,slot:a[0]};const r=e=>l(e,t,!0);let i=a.find((e=>r(e)));if(!i)for(let e=0;e<7&&(t=Q.setTime(Q.addDays(1,t),"00:00"),a=K(t,n),i=a.find((e=>r(e))),!i);e++);return{date:t,slot:i||a[0]}}(u);u=d.date;const m=d.slot.end;return{date:Q.setTime(u,m),time:m}}(r);return{start:r.date,end:i.date};function l(e,t,n=!1){const a=t.getHours(),r=t.getMinutes();let i=n?e.endHour:e.startHour;n&&i>23&&(i=0);const l=n?e.endMinute:e.startMinute;return i>a||i===a&&l>=r}}(e.reservation,e.schedule,e.resources);return O(Object.assign(Object.assign({},e.reservation),{start:n.start,end:n.end})),L(e.checkin),G(e.reservation.recurrence),N([]),h(!1),e})).catch((t=>{e.logError({action:"loadReservation",error:t}),f(!0),p(t.response.errors)}))}),[]);const Y=e=>{const n=Object.assign({},e);return n.start=c.Clock.asTimezone(e.start,t.timezone),n.end=c.Clock.asTimezone(e.end,t.timezone),n.termsAcceptedDate=e.termsAcceptedDate?c.Clock.asTimezone(e.termsAcceptedDate,t.timezone):null,n.recurrence.terminationDate=e.recurrence.terminationDate?c.Clock.asTimezone(e.recurrence.terminationDate,t.timezone):null,n.recurrence.repeatDates=n.recurrence.repeatDates?n.recurrence.repeatDates.map((e=>c.Clock.asTimezone(e,t.timezone))):null,n},Z={onGuestJoin(t,n){return a(this,void 0,void 0,(function*(){if(R&&R.referenceNumber){const a=yield e.joinReservationAsGuest(R.referenceNumber,t,n===i.SeriesUpdateScope.FullSeries);return a.success&&O(Object.assign(Object.assign({},R),{participantEmails:[...R.participantEmails,t]})),a}throw new Error("Reservation is missing")}))},onSelfJoin(t){return a(this,void 0,void 0,(function*(){if(R&&R.referenceNumber){const n=yield e.joinReservation(R.referenceNumber,t===i.SeriesUpdateScope.FullSeries);return n.success&&O(Object.assign(Object.assign({},R),{participantIds:[...R.participantIds,q.userId]})),n}throw new Error("Reservation is missing")}))},onCancelParticipation(t){return a(this,void 0,void 0,(function*(){if(R&&R.referenceNumber){const n=yield e.cancelParticipation(R.referenceNumber,t===i.SeriesUpdateScope.FullSeries);return n.success&&O(Object.assign(Object.assign({},R),{participantIds:R.participantIds.filter((e=>e!==q.userId))})),n}throw new Error("Reservation is missing")}))},onAcceptInvite(t){return a(this,void 0,void 0,(function*(){if(R&&R.referenceNumber){const n=yield e.acceptInvite(R.referenceNumber,t===i.SeriesUpdateScope.FullSeries);return n.success&&O(Object.assign(Object.assign({},R),{participantIds:[...R.participantIds,q.userId],inviteeIds:R.inviteeIds.filter((e=>e!==q.userId))})),n}throw new Error("Reservation is missing")}))},onDeclineInvite(t){return a(this,void 0,void 0,(function*(){if(R&&R.referenceNumber){const n=yield e.declineInvite(R.referenceNumber,t===i.SeriesUpdateScope.FullSeries);return n.success&&O(Object.assign(Object.assign({},R),{inviteeIds:R.inviteeIds.filter((e=>e!==q.userId))})),n}throw new Error("Reservation is missing")}))}};function K(e,t){return!t||t.usesAppointments?[]:(0,o.getScheduleSlotViews)(t.slots.days[e.getDay()].slots.filter((e=>e.isAvailable)))}function X(e,t){if(!t||t.usesAppointments)return[];const n=t.canEndInUnavailableSlots||!1,a=t.slots.days[e.getDay()].slots.filter((e=>n||e.isAvailable));let r=e.getDay()-1;r<0&&(r=6);const i=t.slots.days[r].slots.filter((e=>n||e.isAvailable)).find((e=>"00:00"===e.end));if(0===a.length)return i?(0,o.getScheduleSlotViews)([i]):[];const l=a[a.length-1];return"00:00"===l.end?(a.unshift(l),a.pop()):i&&a.unshift(i),(0,o.getScheduleSlotViews)(a)}return{isLoading:b,isError:m,errorMessage:v,reservationSaveState:g,reservation:R,checkin:B,resources:_,resourceAttributes:w,accessories:S,users:M,groups:A,resourceGroups:T,terms:I,schedule:U,resourcesById:H,metadata:q,reservationUploads:z,isPartialSeriesUpdateAllowed:()=>!(!R||!V)&&V.monthlyType===R.recurrence.monthlyType&&(null===V.terminationDate&&null===R.recurrence.terminationDate||null!==V.terminationDate&&null!==R.recurrence.terminationDate&&V.terminationDate.getTime()===R.recurrence.terminationDate.getTime())&&V.type===R.recurrence.type&&V.weekdays===R.recurrence.weekdays&&V.interval===R.recurrence.interval&&(null===V.repeatDates&&null===R.recurrence.repeatDates||null!==V.repeatDates&&null!==R.recurrence.repeatDates&&V.repeatDates.length===R.recurrence.repeatDates.length&&V.repeatDates.every(((e,t)=>e.getTime()===R.recurrence.repeatDates[t].getTime()))),onDatesChanged:(e,t)=>{let n=e,a=t;if(R){if(e){const t=K(e,U);t.length>0&&!t.some((t=>t.startHour===e.getHours()&&t.startMinute===e.getMinutes()))&&(n=Q.setTime(e,t[0].start))}if(t){const e=X(t,U);e.length>0&&!e.some((e=>e.endHour===t.getHours()&&e.endMinute===t.getMinutes()))&&(a=24===e[0].endHour&&e.length>1?Q.setTime(t,e[1].end):24===e[0].endHour?Q.setTime(t,"00:00"):Q.setTime(t,e[0].end))}const r=Object.assign(Object.assign({},R),{start:n||null,end:a||null});O(r)}},onTermsAcceptChanged:()=>{R&&O(Object.assign(Object.assign({},R),{termsAcceptedDate:new Date}))},onRecurrenceChanged:(e,t,n,a,r,l)=>{if(R){const s=e||i.RepeatType.None,o={type:s,interval:s!==i.RepeatType.None&&t?t:1,weekdays:s!==i.RepeatType.None&&n?n:null,terminationDate:s!==i.RepeatType.None&&r?r:null,monthlyType:s!==i.RepeatType.None&&a?a:null,repeatDates:s!==i.RepeatType.None&&l?l:[]};O(Object.assign(Object.assign({},R),{recurrence:o}))}},onResourceIdsChanged:e=>{R&&O(Object.assign(Object.assign({},R),{resourceIds:[...new Set(e)]}))},onAccessoriesChanged:e=>{R&&O(Object.assign(Object.assign({},R),{accessories:e}))},onResourceAvailabilityChecked:()=>a(this,void 0,void 0,(function*(){if(!(R&&R.start&&R.end&&U))return{ids:[]};try{return yield e.getUnavailableResourceIds(R.start,R.end,U.id,R.referenceNumber)}catch(t){return e.logError({action:"getUnavailableResourceIds",context:{start:R.start,end:R.end,scheduleId:U.id,referenceNumber:R.referenceNumber},error:t}),{ids:[]}}})),onSpecificResourceAvailabilityChecked:t=>a(this,void 0,void 0,(function*(){if(!(R&&R.start&&R.end&&U))return{ids:[]};try{return yield e.checkAvailability(t,R.start,R.end,U.id,R.referenceNumber)}catch(n){return e.logError({action:"checkAvailability",context:{start:R.start,end:R.end,scheduleId:U.id,referenceNumber:R.referenceNumber,resourceIds:t},error:n}),{ids:[]}}})),onAccessoryAvailabilityChecked:()=>a(this,void 0,void 0,(function*(){if(!R||!R.start||!R.end)return[];try{return yield e.getAccessoryAvailability(R.start,R.end,R.referenceNumber)}catch(e){return console.error(e),[]}})),onUserDetailsShown:t=>{try{return e.getUserDetails(t)}catch(n){throw e.logError({action:"onUserDetailsShown",context:{userId:t},error:n}),n}},onOwnerChanged:e=>{R&&O(Object.assign(Object.assign({},R),{ownerId:e}))},onCoOwnersAdded:e=>{if(R){const t=new Set(R.coOwnerIds);e.forEach((e=>t.add(e))),O(Object.assign(Object.assign({},R),{coOwnerIds:[...t]}))}},onCoOwnerRemoved:e=>{R&&O(Object.assign(Object.assign({},R),{coOwnerIds:R.coOwnerIds.filter((t=>t!==e))}))},onCreditsRecalculated:()=>a(this,void 0,void 0,(function*(){if(!R||!R.start||!R.end)return{available:0,required:0,totalCost:null};try{return yield e.getReservationCredits(R)}catch(e){return console.error(e),{available:0,required:0,totalCost:null}}})),onReservationAvailabilityChecked:()=>U&&R?e.getReservationAvailability(R,U.id):Promise.resolve(""),onParticipantAdded:e=>{R&&O(Object.assign(Object.assign({},R),{inviteeIds:[...R.inviteeIds,e.id]}))},onParticipantsAdded:e=>{R&&O(Object.assign(Object.assign({},R),{inviteeIds:[...R.inviteeIds,...e.map((e=>e.id))]}))},onParticipantRemoved:e=>{R&&O(Object.assign(Object.assign({},R),{inviteeIds:R.inviteeIds.filter((t=>e.id!==t)),participantIds:R.participantIds.filter((t=>e.id!==t))}))},onGuestAdded:e=>{R&&(R.participantEmails.includes(e)||R.guestEmails.includes(e)||O(Object.assign(Object.assign({},R),{guestEmails:[...R.guestEmails,e]})))},onGuestRemoved:e=>{R&&O(Object.assign(Object.assign({},R),{guestEmails:R.guestEmails.filter((t=>t!==e)),participantEmails:R.participantEmails.filter((t=>t!==e))}))},onStartReminderChanged:e=>{R&&O(Object.assign(Object.assign({},R),{startReminder:e}))},onEndReminderChanged:e=>{R&&O(Object.assign(Object.assign({},R),{endReminder:e}))},onAttributesFetched:()=>R?e.getReservationAttributes(R,n):Promise.resolve({attributes:[],attributeValues:[]}),onTitleChanged:e=>{R&&O(Object.assign(Object.assign({},R),{title:e}))},onDescriptionChanged:e=>{R&&O(Object.assign(Object.assign({},R),{description:e}))},onAllowSelfJoinChanged:e=>{R&&O(Object.assign(Object.assign({},R),{allowSelfJoin:e}))},onAttributeValueChanged:e=>{if(R){const t=R.attributeValues.filter((t=>t.id!==e.id));t.push(e),O(Object.assign(Object.assign({},R),{attributeValues:t}))}},onAttributeValuesChanged:e=>{R&&O(Object.assign(Object.assign({},R),{attributeValues:e}))},onAttachmentsAdded:e=>{R&&J(e)},onAttachmentRemoved:e=>{R&&O(Object.assign(Object.assign({},R),{attachments:R.attachments.filter((t=>t.id!==e.id))}))},onReturn:()=>{window.location.href=q.returnUrl},onReservationCreated:t=>{R&&R.resourceIds.length>0&&(E(Object.assign(Object.assign({},{isSaveDialogOpen:!1,isSaveSuccess:!1,reservationErrors:[],reservationCanBeRetried:!1,canJoinWaitlist:!1,isPending:!1,retryMessages:[],mode:"save",dates:[],showDetails:!1}),{mode:"save",isSaveDialogOpen:!0})),e.createReservation(Y(R),t?y:[],z).then((e=>(O(Object.assign(Object.assign({},R),{referenceNumber:e.referenceNumber})),N(e.retryParameters),E({isSaveDialogOpen:!0,reservationErrors:e.errors,isSaveSuccess:e.success,reservationCanBeRetried:e.canBeRetried,isPending:e.requiresApproval,canJoinWaitlist:e.canJoinWaitlist,retryMessages:e.retryMessages,mode:"save",dates:e.dates,showDetails:e.showDetails}),e))).catch((e=>{console.error(e),f(!0)})))},onReservationUpdated:(t,n)=>{R&&R.resourceIds.length>0&&(E(Object.assign(Object.assign({},{isSaveDialogOpen:!1,isSaveSuccess:!1,reservationErrors:[],reservationCanBeRetried:!1,canJoinWaitlist:!1,isPending:!1,retryMessages:[],mode:"save",dates:[],showDetails:!1}),{mode:"update",isSaveDialogOpen:!0})),e.updateReservation(Y(R),n?y:[],z,t||i.SeriesUpdateScope.FullSeries).then((e=>(O(Object.assign(Object.assign({},R),{referenceNumber:e.referenceNumber})),N(e.retryParameters),E({isSaveDialogOpen:!0,reservationErrors:e.errors,isSaveSuccess:e.success,isPending:e.requiresApproval,reservationCanBeRetried:e.canBeRetried,canJoinWaitlist:e.canJoinWaitlist,retryMessages:e.retryMessages,mode:"update",dates:e.dates,showDetails:e.showDetails}),e))).catch((e=>{console.error(e),f(!0)})))},onReservationSaveCancelled:()=>{E({isSaveDialogOpen:!1,isSaveSuccess:!1,reservationErrors:[],reservationCanBeRetried:!1,canJoinWaitlist:!1,isPending:!1,retryMessages:[],mode:"save",dates:[],showDetails:!1})},onJoinWaitlist:()=>{E(Object.assign(Object.assign({},{isSaveDialogOpen:!1,isSaveSuccess:!1,reservationErrors:[],reservationCanBeRetried:!1,canJoinWaitlist:!1,isPending:!1,retryMessages:[],mode:"save",dates:[],showDetails:!1}),{mode:"waitlist",isSaveDialogOpen:!0})),R&&e.joinWaitlist(R).then((e=>(E(Object.assign(Object.assign({},{isSaveDialogOpen:!1,isSaveSuccess:!1,reservationErrors:[],reservationCanBeRetried:!1,canJoinWaitlist:!1,isPending:!1,retryMessages:[],mode:"save",dates:[],showDetails:!1}),{reservationErrors:e.errors})),E({isSaveDialogOpen:!0,isPending:!1,reservationErrors:[],isSaveSuccess:e.success,reservationCanBeRetried:!1,canJoinWaitlist:!1,retryMessages:[],mode:"waitlist",showDetails:!1,dates:[]}),e))).catch((e=>{console.error(e),f(!0)}))},onSelfJoinWaitlist:()=>{if(R)return e.joinWaitlist(R);throw new Error("Cannot join waitlist")},onRemoveWaitlist:()=>{if(R)return e.removeFromWaitlist(R);throw new Error("Cannot join waitlist")},onReservationDeleted:(t,n)=>{R&&(E(Object.assign(Object.assign({},{isSaveDialogOpen:!1,isSaveSuccess:!1,reservationErrors:[],reservationCanBeRetried:!1,canJoinWaitlist:!1,isPending:!1,retryMessages:[],mode:"save",dates:[],showDetails:!1}),{mode:"delete",isSaveDialogOpen:!0})),e.deleteReservation(R,t,n).then((e=>(E(Object.assign(Object.assign({},{isSaveDialogOpen:!1,isSaveSuccess:!1,reservationErrors:[],reservationCanBeRetried:!1,canJoinWaitlist:!1,isPending:!1,retryMessages:[],mode:"save",dates:[],showDetails:!1}),{reservationErrors:e.errors})),E({isSaveDialogOpen:!0,reservationErrors:e.errors,isSaveSuccess:e.success,isPending:!1,reservationCanBeRetried:!1,canJoinWaitlist:!1,retryMessages:[],mode:"delete",dates:[],showDetails:!1}),e))).catch((e=>{console.error(e),f(!0)})))},onCheckIn:()=>a(this,void 0,void 0,(function*(){if(R&&R.referenceNumber){const n=yield e.checkIn(R.referenceNumber);n.start=c.Clock.toTimezone(n.start,t.timezone),n.end=c.Clock.toTimezone(n.end,t.timezone),O(n)}})),onCheckOut:()=>a(this,void 0,void 0,(function*(){if(R&&R.referenceNumber){const n=yield e.checkOut(R.referenceNumber);n.start=c.Clock.toTimezone(n.start,t.timezone),n.end=c.Clock.toTimezone(n.end,t.timezone),O(n)}})),onApproved:()=>a(this,void 0,void 0,(function*(){if(R&&R.referenceNumber){const n=yield e.approve(R.referenceNumber);n.start=c.Clock.toTimezone(n.start,t.timezone),n.end=c.Clock.toTimezone(n.end,t.timezone),O(n)}})),onReservationSentAsEmail:t=>a(this,void 0,void 0,(function*(){R&&R.referenceNumber&&(yield e.sendAsEmail(R.referenceNumber,t))})),participation:Z,getStartSlots:K,getEndSlots:X,onMeetingLinkChanged:function(e,t){if(!R)return;const n={url:t,type:e};O(Object.assign(Object.assign({},R),{meetingLink:n}))},onMeetingLinkRemoved:function(){R&&O(Object.assign(Object.assign({},R),{meetingLink:null}))}}},t.getDefaultMetadata=u,t.ReservationContext=(0,r.createContext)(function(){const e=()=>{};return{isLoading:!1,isError:!1,errorMessage:[],reservationSaveState:{isSaveDialogOpen:!1,isSaveSuccess:!1,reservationErrors:[],reservationCanBeRetried:!1,canJoinWaitlist:!1,isPending:!1,retryMessages:[],mode:"save",dates:[],showDetails:!1},reservation:void 0,checkin:void 0,resources:[],resourcesById:{},accessories:[],resourceAttributes:[],users:[],groups:[],resourceGroups:[],reservationUploads:[],terms:void 0,schedule:void 0,metadata:u(),isPartialSeriesUpdateAllowed:()=>!1,onDatesChanged:e,onTermsAcceptChanged:e,onRecurrenceChanged:e,onResourceIdsChanged:e,onAccessoriesChanged:e,onUserDetailsShown:()=>Promise.reject(),onOwnerChanged:e,onCoOwnersAdded:e,onCoOwnerRemoved:e,onResourceAvailabilityChecked:()=>Promise.reject(),onSpecificResourceAvailabilityChecked:()=>Promise.reject(),onAccessoryAvailabilityChecked:()=>Promise.reject(),onCreditsRecalculated:()=>Promise.reject(),onReservationAvailabilityChecked:()=>Promise.reject(),onAttributesFetched:()=>Promise.reject(),onParticipantAdded:e,onParticipantsAdded:e,onParticipantRemoved:e,onGuestAdded:e,onGuestRemoved:e,onStartReminderChanged:e,onEndReminderChanged:e,onTitleChanged:e,onDescriptionChanged:e,onAllowSelfJoinChanged:e,onAttributeValueChanged:e,onAttributeValuesChanged:e,onAttachmentsAdded:e,onAttachmentRemoved:e,onReturn:e,onReservationCreated:e,onReservationUpdated:e,onReservationDeleted:e,onReservationSaveCancelled:e,onJoinWaitlist:e,onSelfJoinWaitlist:()=>Promise.reject(),onRemoveWaitlist:()=>Promise.reject(),onCheckIn:()=>Promise.reject(),onCheckOut:()=>Promise.reject(),onApproved:()=>Promise.reject(),onReservationSentAsEmail:()=>Promise.reject(),participation:{onSelfJoin:()=>Promise.reject(),onGuestJoin:()=>Promise.reject(),onAcceptInvite:()=>Promise.reject(),onDeclineInvite:()=>Promise.reject(),onCancelParticipation:()=>Promise.reject()},getStartSlots:()=>[],getEndSlots:()=>[],onMeetingLinkChanged:e,onMeetingLinkRemoved:e}}())},21178:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationDetails=t.useReservationDetails=void 0;const l=i(n(67294)),s=n(81468),o=n(34297),c=n(75712),u=n(28193);function d(e){const{state:t}=e,n=t.reservation,[a,r]=(0,l.useState)([]),[i,s]=(0,l.useState)(!0);function o(e){const i=[...a];let l=[...n.attributeValues];e.attributeValues.forEach((e=>{n.attributeValues.some((t=>t.id===e.id))||l.push(e)})),i.filter((t=>!e.attributes.some((e=>e.id===t.id)))).forEach((e=>{l=l.filter((t=>t.id!==e.id))})),t.onAttributeValuesChanged(l),r(e.attributes)}return(0,l.useEffect)((()=>{n&&(s(!0),t.onAttributesFetched().then((e=>e)).then((e=>(o(e),s(!1),e))).catch((e=>{s(!1),console.error(e)})))}),[null==n?void 0:n.resourceIds,null==n?void 0:n.ownerId,null==n?void 0:n.referenceNumber]),{attributes:a,attributeValues:n.attributeValues,description:n.description,referenceNumber:n.referenceNumber,isLoading:i,onDescriptionChanged:function(e){t.onDescriptionChanged(e)},onAttributeResponseReceived:o,getAttributeValue:function(e){var t;return null===(t=n.attributeValues.find((t=>t.id===e.id)))||void 0===t?void 0:t.value},isAttributeValid:function(e){return(0,c.checkIsAttributeValid)(e,n.attributeValues.find((t=>t.id===e.id)))},onAttributeChanged:function(e,n){const a={id:e.id,value:n||""};t.onAttributeValueChanged(a)}}}t.useReservationDetails=d,t.ReservationDetails=function(e){const{context:t,appState:n}=e,{t:a}=(0,s.useTranslation)(),{attributes:r,description:i,referenceNumber:c,onDescriptionChanged:m,isLoading:f,getAttributeValue:v,isAttributeValid:p,onAttributeChanged:b}=d({state:t}),[h,g]=(0,l.useState)(i||"");return l.default.createElement("div",{className:"reservation-section",id:"reservation-details-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-card-list"})),l.default.createElement("div",{className:"reservation-content-section"},l.default.createElement("div",{className:""},l.default.createElement("label",{className:"form-label reservation-label",htmlFor:"reservation-description"},a("Description")," ",t.metadata.descriptionRequired&&l.default.createElement("span",null,"*")),l.default.createElement("textarea",{id:"reservation-description",className:"form-control",value:h||"",required:t.metadata.descriptionRequired,onChange:e=>g(e.target.value),onBlur:()=>m(h.trim())})),f&&l.default.createElement(u.Spinner,null),!f&&r.length>0&&l.default.createElement("div",{className:"col-12 mt-4",id:"reservation-attributes-section"},l.default.createElement("div",{className:""},l.default.createElement("label",{className:"form-label reservation-label",htmlFor:"reservation-title"},a("AdditionalInformation")),l.default.createElement("div",{className:"row",id:"reservation-attributes-list"},r.map((e=>l.default.createElement("div",{key:e.id,className:"col-12 col-lg-6 col-xl-4"},l.default.createElement(o.CustomAttributeEdit,{isValid:p(e),onChange:t=>b(e,t),attribute:e,value:v(e),dateTimeFormat:n.dateTimeFormat,firstDayOfWeek:n.firstDayOfWeek,lang:n.lang}))))))),null!==c&&l.default.createElement("div",{className:"d-flex flex-wrap align-items-end mt-4 d-print-block"},l.default.createElement("div",{className:"reservation-label me-2"}," ",a("ReferenceNumber")),l.default.createElement("div",null,c))))}},90386:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationDisplay=void 0;const l=i(n(67294)),s=n(15236),o=n(40383),c=n(81013),u=n(65613),d=n(70102),m=n(44378),f=n(48676),v=n(88741),p=n(49173),b=n(61841),h=n(84396),g=n(53220),E=n(43915),y=n(96537),N=n(82140),R=n(20632);t.ReservationDisplay=function(e){const{isPrinting:t}=e,n=(0,l.useContext)(N.ReservationContext);return l.default.createElement("div",null,!t&&l.default.createElement(c.ReservationButtonsDisplay,null),t&&l.default.createElement(u.ReservationPrintButtonDisplay,null),l.default.createElement("div",{className:"reservation-content reservation-content-readonly"},!t&&l.default.createElement(l.default.Fragment,null,l.default.createElement(s.ReservationCheckin,{context:n}),l.default.createElement(y.ReservationRequiresApproval,{context:n}),l.default.createElement(o.ReservationApproval,{context:n}),l.default.createElement(E.ReservationParticipationActions,null),l.default.createElement(g.ReservationWaitlist,null)),l.default.createElement(d.ReservationTitleDisplay,null),l.default.createElement(m.ReservationOwnerDisplay,null),l.default.createElement(f.ReservationTimesDisplay,null),l.default.createElement(v.ReservationResourcesDisplay,null),l.default.createElement(p.ReservationParticipantsDisplay,null),l.default.createElement(b.ReservationDetailsDisplay,null),!t&&l.default.createElement(R.ReservationMeetingLinkDisplay,null),l.default.createElement(h.ReservationAttachmentsDisplay,null),l.default.createElement("div",{className:"reservation-section"},l.default.createElement("div",{className:"reservation-icon-section m-0 p-0"}," "),l.default.createElement("div",{className:"reservation-content-section m-0 p-0"}," "))))}},57638:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationEdit=void 0;const l=i(n(67294)),s=n(31728),o=n(84094),c=n(41911),u=n(38774),d=n(14651),m=n(4712),f=n(15290),v=n(21178),p=n(81118),b=n(7121),h=n(66237),g=n(134),E=n(15236),y=n(40383),N=n(96537),R=n(51073),O=n(82140),_=n(34335),C=n(32397);t.ReservationEdit=function(){var e,t;const[n,a]=(0,l.useState)(!1),r=(0,l.useContext)(R.AppSettingsContext),i=(0,l.useContext)(O.ReservationContext);return l.default.createElement("div",null,l.default.createElement(s.ReservationButtons,{context:i}),l.default.createElement("div",{className:"reservation-content"},l.default.createElement(E.ReservationCheckin,{context:i}),l.default.createElement(y.ReservationApproval,{context:i}),l.default.createElement(N.ReservationRequiresApproval,{context:i}),l.default.createElement(o.ReservationTitle,{context:i}),l.default.createElement(c.ReservationOwner,null),(null===(e=i.schedule)||void 0===e?void 0:e.usesAppointments)&&l.default.createElement(_.ReservationAppointmentTimes,{context:i}),!(null===(t=i.schedule)||void 0===t?void 0:t.usesAppointments)&&l.default.createElement(u.ReservationTimes,{context:i,appState:r,onToggleAvailability:()=>{a(!n)},isReservationAvailabilityOpen:n}),l.default.createElement(h.ReservationAvailability,{isOpen:n,context:i}),l.default.createElement(d.ReservationResources,{context:i}),l.default.createElement(m.ReservationParticipants,{context:i}),l.default.createElement(f.ReservationReminders,{context:i}),l.default.createElement(v.ReservationDetails,{context:i,appState:r}),l.default.createElement(C.ReservationMeetingLink,{context:i}),l.default.createElement(p.ReservationAttachments,{context:i}),l.default.createElement(b.ReservationTerms,{context:i}),l.default.createElement("div",{className:"reservation-section"},l.default.createElement("div",{className:"reservation-icon-section m-0 p-0"}," "),l.default.createElement("div",{className:"reservation-content-section m-0 p-0"}," "))),l.default.createElement(g.ReservationSaving,{context:i}))}},32035:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationEntry=void 0;const l=i(n(67294)),s=n(81468),o=n(28193),c=n(82140),u=n(90386),d=n(57638),m=n(51073);t.ReservationEntry=function(){const e=(0,l.useContext)(c.ReservationContext),{t}=(0,s.useTranslation)(),n=(0,l.useContext)(m.AppSettingsContext);function a(e){document.title=`${n.appTitle} - ${t(e)}`}return e.isError?e.errorMessage.length>0?l.default.createElement("div",{className:"alert alert-danger m-3"},e.errorMessage.map((e=>l.default.createElement("div",{key:e},e)))):l.default.createElement("div",{className:"alert alert-danger m-3"},"There was a problem loading this reservation. Please try again."):n.isLoading||e.isLoading||void 0===e.reservation?l.default.createElement(o.Spinner,null):e.metadata.canEdit||e.metadata.canView?e.metadata.canEdit&&!e.metadata.isPrinting||!e.metadata.canView?(e.reservation.referenceNumber?a("EditReservation"):a("CreateReservation"),l.default.createElement(d.ReservationEdit,null)):(a("ViewReservation"),l.default.createElement(u.ReservationDisplay,{isPrinting:e.metadata.isPrinting})):l.default.createElement("div",{className:"alert alert-danger m-3"},t("ReservationNotAvailable"))}},32397:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationMeetingLink=t.useReservationMeetingLink=void 0;const l=i(n(67294)),s=n(81468),o=n(69989),c=n(94880),u=n(51073),d=n(99712);function m(e){var t;const{state:n}=e,a=n.reservation,{metadata:r}=n,[i,s]=(0,l.useState)(),[c,u]=(0,l.useState)((null===(t=a.meetingLink)||void 0===t?void 0:t.type)||null);return(0,l.useEffect)((()=>{var e;void 0===i&&null!==a.meetingLink&&s(a.meetingLink),u((null===(e=a.meetingLink)||void 0===e?void 0:e.type)||null)}),[a.meetingLink]),{url:!a.meetingLink||c!==o.MeetingLinkType.Link&&c!==(null==i?void 0:i.type)?"":a.meetingLink.url,linkType:c,isOwner:a.ownerId===r.userId,isUpdate:null!==a.referenceNumber&&""!==a.referenceNumber,isCustomRecurrence:a.recurrence.type===o.RepeatType.Custom,canBeChangedTo:function(e){return!i||i.type===o.MeetingLinkType.Link||e===i.type||e===o.MeetingLinkType.Link},onTypeChanged:function(e){var t;i&&i.type===e&&i.url?n.onMeetingLinkChanged(e,i.url):n.onMeetingLinkChanged(e,(null===(t=a.meetingLink)||void 0===t?void 0:t.url)||"")},isSelected:function(e){return c===e},isLinked:function(e){return e===o.MeetingLinkType.Link||(e===o.MeetingLinkType.Zoom?r.meetingConnections.zoom.linked:e===o.MeetingLinkType.Teams&&r.meetingConnections.teams.linked)},onLinkUrlChanged:function(e){var t;n.onMeetingLinkChanged((null===(t=a.meetingLink)||void 0===t?void 0:t.type)||o.MeetingLinkType.Link,e)},onLinkAdded:function(){n.onMeetingLinkChanged(o.MeetingLinkType.Link,"")},onLinkRemoved:function(){n.onMeetingLinkRemoved()}}}function f(e){const{url:t,onChange:n}=e,{t:a}=(0,s.useTranslation)(),r=(0,l.useMemo)((()=>!t||d.RegExpUrl.test(t)),[t]);return l.default.createElement("div",{className:"d-flex flex-grow-1"},l.default.createElement("div",{className:"flex-grow-1"},l.default.createElement(c.ClearableTextInput,{value:t,type:"url",onChange:n,placeholder:"https://www.bookedscheduler.com",isRequired:!0}),!r&&l.default.createElement("div",{className:"reservation-errors"},"Invalid URL")),l.default.createElement("div",{title:a("OpenLink")},r&&t&&l.default.createElement("a",{href:t,className:"btn btn-link",target:"_blank",rel:"noreferrer"},l.default.createElement("span",{className:"bi bi-link"})),(!r||!t)&&l.default.createElement("span",{className:"btn bi bi-link"})))}function v(e){const{t}=(0,s.useTranslation)(),{url:n,isLinked:a,isOwner:r,isUpdate:i,isCustomRecurrence:o}=e,c=(0,l.useContext)(u.AppSettingsContext).scriptUrl,d=btoa(`resume=${c}/external-auth.php?type=zoom&redirect=${encodeURIComponent(window.location.href)}`);let m=l.default.createElement(l.default.Fragment,null);return o&&r&&(m=l.default.createElement("div",{className:"reservation-errors"},t("ZoomDoesNotSupportCustomRecurrence"))),n?l.default.createElement("div",null,"Zoom Link:"," ",l.default.createElement("a",{href:n,className:"btn btn-link",target:"_blank",rel:"noreferrer"},n),m):r||i?!r&&i?l.default.createElement("div",null,t("ZoomMeetingsOwnerOnlyUpdate")):a?l.default.createElement("div",null,l.default.createElement("div",null,t("ZoomMeetingWillBeCreated")),m):l.default.createElement("div",null,t("MustLinkZoomAccount")," ",l.default.createElement("a",{href:`https://zoom.us/oauth/authorize?response_type=code&client_id=NUhVzGQSkqjFApjCH2hzA&redirect_uri=https://www.social.twinkletoessoftware.com/zoomredirect.php&state=${d}`},"Link")):l.default.createElement("div",null,t("ZoomMeetingsOwnerOnly"))}function p(e){const{t}=(0,s.useTranslation)(),{url:n,isLinked:a,isOwner:r,isUpdate:i,isCustomRecurrence:o}=e,c=(0,l.useContext)(u.AppSettingsContext).scriptUrl,d=btoa(`resume=${c}/external-auth.php?type=teams&redirect=${encodeURIComponent(window.location.href)}`),m=encodeURIComponent("https://www.social.twinkletoessoftware.com/teamsredirect.php"),f=encodeURIComponent("offline_access https://graph.microsoft.com/.default");let v=l.default.createElement(l.default.Fragment,null);return o&&r&&(v=l.default.createElement("div",{className:"reservation-errors"},t("TeamsDoesNotSupportCustomRecurrence"))),n?l.default.createElement("div",null,"Teams Link:"," ",l.default.createElement("a",{href:n,className:"btn btn-link",target:"_blank",rel:"noreferrer"},n),v):r||i?!r&&i?l.default.createElement("div",null,t("TeamsMeetingsOwnerOnlyUpdate")):a?l.default.createElement("div",null,l.default.createElement("div",null,t("TeamsMeetingWillBeCreated")),v):l.default.createElement("div",null,"You must link your Microsoft account."," ",l.default.createElement("a",{href:`https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=f34c19de-7db7-4c42-85f0-423df8baf0c6&response_type=code&redirect_uri=${m}&response_mode=query&scope=${f}&state=${d}`},"Link")):l.default.createElement("div",null,t("TeamsMeetingsOwnerOnly"))}t.useReservationMeetingLink=m,t.ReservationMeetingLink=function(e){const t=e.context,{meetingsEnabled:n}=t.metadata,{url:a,linkType:r,isOwner:i,isUpdate:c,isCustomRecurrence:u,onTypeChanged:d,isLinked:b,canBeChangedTo:h,isSelected:g,onLinkUrlChanged:E,onLinkAdded:y,onLinkRemoved:N}=m({state:t,meetingsEnabled:n}),{t:R}=(0,s.useTranslation)();return n?l.default.createElement("div",{className:"reservation-section",id:"reservation-meeting-link-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-camera-video"})),l.default.createElement("div",{className:"reservation-content-section"},l.default.createElement("div",null,l.default.createElement("label",{className:"form-label reservation-label",htmlFor:"reservation-meeting-link"},R("MeetingLink")),!r&&l.default.createElement("button",{className:"btn btn-link",onClick:y,title:R("AddMeetingLink")},l.default.createElement("span",{className:"bi bi-plus-circle"})),r&&l.default.createElement("button",{className:"btn btn-link",onClick:N,title:R("RemoveMeetingLink")},l.default.createElement("span",{className:"bi bi-trash"}))),l.default.createElement("div",{className:"d-flex align-content-start"},r&&l.default.createElement(l.default.Fragment,null,l.default.createElement("div",null,l.default.createElement("select",{className:"form-select reservation-meeting-link-options",onChange:e=>d(Number.parseInt(e.target.value)),value:r},l.default.createElement("option",{value:o.MeetingLinkType.Link},"Link"),h(o.MeetingLinkType.Zoom)&&l.default.createElement("option",{value:o.MeetingLinkType.Zoom},"Zoom"))),l.default.createElement("div",{className:"d-flex flex-grow-1 align-items-center ms-3"},g(o.MeetingLinkType.Link)&&l.default.createElement(f,{url:a,onChange:E}),g(o.MeetingLinkType.Zoom)&&l.default.createElement(v,{url:a,isLinked:b(o.MeetingLinkType.Zoom),isOwner:i,isUpdate:c,isCustomRecurrence:u}),g(o.MeetingLinkType.Teams)&&l.default.createElement(p,{url:a,isLinked:b(o.MeetingLinkType.Teams),isOwner:i,isUpdate:c,isCustomRecurrence:u})))))):l.default.createElement(l.default.Fragment,null)}},41911:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationOwner=t.useReservationOwner=void 0;const s=i(n(67294)),o=n(81468),c=n(82140),u=n(51073),d=l(n(23157)),m=n(14988),f=n(88892),v=n(94559),p=n(61929);function b(e){const{state:t,creditsEnabled:n}=e,a=t.reservation,{users:r,metadata:i,groups:l}=t,[o,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)(),[m,f]=(0,s.useState)(!1),p=(0,s.useMemo)((()=>r.find((e=>e.id===a.ownerId))),[a.ownerId]),b=(0,s.useMemo)((()=>r.filter((e=>a.coOwnerIds.includes(e.id)&&a.ownerId!==e.id))),[a.coOwnerIds,a.ownerId]),h=(0,s.useMemo)((()=>{const e=[];return l.forEach((t=>{e[t.id]=r.filter((e=>e.groupIds.includes(t.id)))})),e}),[r,l]);function g(){c(!o)}function E(){p&&(d(void 0),t.onCreditsRecalculated().then((e=>d(e))).catch((()=>{})))}const[y,N]=(0,s.useState)(a.recurrence);return(0,s.useEffect)((()=>{(0,v.deepEqual)(y,a.recurrence)||N(a.recurrence)}),[a.recurrence]),(0,s.useEffect)((()=>{n&&E()}),[a.ownerId,a.resourceIds,a.end,a.start,y,a.accessories]),{users:r,coOwnerSelectOptions:[...l.filter((e=>h[e.id].length>0)).map((e=>({label:`${e.name} (${h[e.id].length})`,value:`g-${e.id}`,id:e.id,type:"group"}))),...r.filter((e=>e.id!==(null==p?void 0:p.id)&&!b.some((t=>t.id===e.id)))).map((e=>{let t=e.fullName;return""!==e.email&&(t=`${t} (${e.email})`),{label:t,value:`u-${e.id}`,id:e.id,type:"user"}}))],coOwners:b,canChangeUser:i.canChangeUser,isChangingUser:o,isChangingCoOwners:m,selectedUser:p,credits:u,coOwnersAllowed:i.allowParticipation,onToggleUserBrowser:g,onOwnerChanged:function(e){e&&(t.onOwnerChanged(e.id),g())},onCreditsRecalculated:E,onCoOwnerToggle:function(){f(!m)},onCoOwnerAdded:function(e){"user"===e.type?t.onCoOwnersAdded([e.id]):t.onCoOwnersAdded(h[e.id].filter((e=>e.id!==(null==p?void 0:p.id)&&!b.some((t=>t.id===e.id)))).map((e=>e.id)))},onCoOwnerRemoved:function(e){e&&t.onCoOwnerRemoved(e.id)}}}t.useReservationOwner=b,t.ReservationOwner=function(){const e=(0,s.useContext)(u.AppSettingsContext),{creditsEnabled:t}=e,n=(0,s.useContext)(c.ReservationContext),{selectedUser:a,canChangeUser:r,users:i,coOwners:l,coOwnerSelectOptions:v,isChangingUser:h,isChangingCoOwners:g,credits:E,coOwnersAllowed:y,onOwnerChanged:N,onToggleUserBrowser:R,onCoOwnerToggle:O,onCoOwnerAdded:_,onCoOwnerRemoved:C}=b({state:n,creditsEnabled:t}),{t:S}=(0,o.useTranslation)();return a?s.default.createElement("div",{className:"reservation-section",id:"reservation-owner-section"},s.default.createElement("div",{className:"reservation-icon-section"},s.default.createElement("i",{className:"bi bi-person"})),s.default.createElement("div",{className:"reservation-content-section row g-0"},s.default.createElement("div",{className:"col-12 col-sm-6"},s.default.createElement("div",{className:"d-flex align-items-center"},s.default.createElement("div",{className:"reservation-label d-inline"},S("Owner")),r&&s.default.createElement("button",{type:"button",className:"btn btn-link btn-change-owner",onClick:R,title:S("ChangeOwner")},!h&&s.default.createElement(s.default.Fragment,null,S("Change")," ",s.default.createElement("i",{className:"bi bi-person"})),h&&s.default.createElement(s.default.Fragment,null,S("Cancel")," ",s.default.createElement("i",{className:"bi bi-x-circle"})))),!h&&a&&s.default.createElement(p.ReservationUserName,{id:a.id,name:a.fullName}),h&&s.default.createElement("div",{className:"reservation-user-select"},s.default.createElement(m.ReservationUserSelect,{id:"reservation-owner-select",users:i,selectedUser:a,onChange:N})),s.default.createElement(f.ReservationOwnerCredits,{creditsEnabled:t,credits:E})),y&&s.default.createElement("div",{className:"col-12 col-sm-6 mt-2 mt-sm-0"},s.default.createElement("div",null,s.default.createElement("div",{className:"reservation-label d-inline"},S("CoOwners")),!g&&s.default.createElement("button",{className:"btn btn-link",title:0===l.length?S("AddCoOwners"):S("ChangeCoOwners"),onClick:O},0===l.length?S("Add"):S("Change")," ",s.default.createElement("span",{className:"bi bi-person-plus"})),g&&s.default.createElement(s.default.Fragment,null,s.default.createElement("button",{className:"btn btn-link",onClick:O},S("Cancel")," ",s.default.createElement("i",{className:"bi bi-x-circle"})),s.default.createElement("div",{className:"reservation-user-select"},s.default.createElement(d.default,{id:"reservation-user-select",options:v,isClearable:!1,onChange:(e,t)=>{e&&"select-option"===t.action&&_(e)},value:null}))),l.map((e=>s.default.createElement("div",{key:e.id},s.default.createElement(p.ReservationUserName,{id:e.id,name:e.fullName}),s.default.createElement("button",{className:"btn btn-link m-0 p-0 ms-1 remove-button",onClick:()=>C(e),title:S("RemoveCoOwner")},s.default.createElement("i",{className:"bi bi-x"}))))))))):s.default.createElement(s.default.Fragment,null)}},88892:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationOwnerCredits=void 0;const r=a(n(67294)),i=n(81468),l=n(28193);t.ReservationOwnerCredits=function(e){const{t}=(0,i.useTranslation)(),{creditsEnabled:n,credits:a}=e;if(!n)return r.default.createElement(r.default.Fragment,null);if(!a)return r.default.createElement("div",{className:"reservation-credits-spinner"},r.default.createElement(l.Spinner,null));const s=a.required>a.available?"insufficient-credits":"required-credits";return r.default.createElement("div",{className:"reservation-owner-credits"},r.default.createElement("span",null,t("AvailableCredits")),r.default.createElement("span",{className:"credit-value"},a.available),r.default.createElement("span",null,t("CreditsRequired")),r.default.createElement("span",{className:`credit-value ${s}`},a.required),r.default.createElement("span",{className:"credit-value"},a.totalCost))}},4712:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationParticipants=t.useReservationParticipants=void 0;const s=i(n(67294)),o=n(81468),c=l(n(23157)),u=l(n(27976)),d=i(n(83999)),m=n(61929);function f(e){var t;const{state:n}=e,a=n.reservation;function r(){return n.reservation?[...a.participantIds,...a.inviteeIds]:[]}const i=(0,s.useMemo)((()=>n.users.filter((e=>e.id!==a.ownerId&&!r().includes(e.id)&&!a.coOwnerIds.includes(e.id)))),[a.ownerId]),l=(0,s.useMemo)((()=>{const e=[];return n.groups.forEach((t=>{e[t.id]=n.users.filter((e=>e.id!==a.ownerId&&e.groupIds.includes(t.id)))})),e}),[n.users,n.groups]),o=(0,s.useMemo)((()=>function(){const e=n.users.filter((e=>{var t;return null===(t=n.reservation)||void 0===t?void 0:t.participantIds.includes(e.id)})).map((e=>({user:e,isInvited:!1}))),t=n.users.filter((e=>{var t;return null===(t=n.reservation)||void 0===t?void 0:t.inviteeIds.includes(e.id)})).map((e=>({user:e,isInvited:!0})));return[...e,...t].sort(((e,t)=>e.user.lastName.localeCompare(t.user.lastName)))}()),[a.participantIds,a.inviteeIds]);return{allowParticipation:n.metadata.allowParticipation,allowGuestParticipation:n.metadata.allowGuestParticipation,allowSelfJoin:(null===(t=n.reservation)||void 0===t?void 0:t.allowSelfJoin)||!1,selectOptions:(0,s.useMemo)((()=>[...n.groups.filter((e=>l[e.id].length>0)).map((e=>({label:`${e.name} (${l[e.id].length})`,value:`g-${e.id}`,id:e.id,type:"group"}))),...i.filter((e=>!a.participantIds.includes(e.id)&&!a.inviteeIds.includes(e.id))).map((e=>{let t=e.fullName;return""!==e.email&&(t=`${t} (${e.email})`),{label:t,value:`u-${e.id}`,id:e.id,type:"user"}}))]),[a.participantIds,a.inviteeIds]),count:n.reservation?n.reservation.participantIds.length+n.reservation.inviteeIds.length+n.reservation.participantEmails.length+n.reservation.guestEmails.length:0,participants:o,guests:n.reservation?[...n.reservation.participantEmails.map((e=>({email:e,isInvited:!1}))),...n.reservation.guestEmails.map((e=>({email:e,isInvited:!0})))].sort(((e,t)=>e.email.localeCompare(t.email))):[],errors:function(){if(!n.metadata.limitParticipants)return[];const e=o.length;if(0===e)return[];const t=[];return a.resourceIds.forEach((a=>{const r=n.resourcesById[a];(null==r?void 0:r.capacity)&&e>(n.resourcesById[a].capacity||0)&&t.push({resourceName:r.name,capacity:r.capacity})})),t}(),onParticipantAdded:function(e){"user"===e.type?n.onParticipantAdded(n.users.find((t=>t.id===e.id))):n.onParticipantsAdded(l[e.id].filter((e=>e.id!==a.ownerId&&!r().includes(e.id))))},onParticipantRemoved:function(e){n.onParticipantRemoved(e)},onAllowSelfJoinChanged:function(e){n.onAllowSelfJoinChanged(e)},onGuestAdded:function(e){n.onGuestAdded(e.toLocaleLowerCase())},onGuestRemoved:function(e){n.onGuestRemoved(e.toLocaleLowerCase())}}}t.useReservationParticipants=f,t.ReservationParticipants=function(e){const{allowParticipation:t,allowGuestParticipation:n,allowSelfJoin:a,selectOptions:r,guests:i,participants:l,count:v,errors:p,onParticipantAdded:b,onParticipantRemoved:h,onGuestAdded:g,onGuestRemoved:E,onAllowSelfJoinChanged:y}=f({state:e.context}),[N,R]=(0,s.useState)(null),{t:O}=(0,o.useTranslation)();if(!t)return s.default.createElement(s.default.Fragment,null);const _=O(n?"SelectUserOrAddGuest":"SelectUserOrGroup");return s.default.createElement("div",{className:"reservation-section",id:"reservation-participants-section"},s.default.createElement("div",{className:"reservation-icon-section"},s.default.createElement("i",{className:"bi bi-people"})),s.default.createElement("div",{className:"reservation-content-section"},s.default.createElement("div",{className:"d-flex align-items-center"},s.default.createElement("div",{className:"reservation-label d-inline"},O("Participants")," ",s.default.createElement("span",{className:"badge reservation-badge"},v))),s.default.createElement("div",{className:"d-flex mt-1 align-items-center flex-wrap"},s.default.createElement("div",{className:"reservation-user-select d-flex"},s.default.createElement("div",{className:"flex-grow-1"},s.default.createElement("label",{htmlFor:"reservation-participant-select",className:"visually-hidden"},"User"),n&&s.default.createElement(u.default,{id:"reservation-participant-select",placeholder:_,options:r,isClearable:!0,onChange:(e,t)=>{!e||"select-option"!==t.action&&"deselect-option"!==t.action&&"clear"!==t.action?R(null):(R(e),b(e))},isValidNewOption:e=>d.validate(e),onCreateOption:e=>{d.validate(e)&&g(e)},value:N}),!n&&s.default.createElement(c.default,{id:"reservation-participant-select",placeholder:_,options:r,isClearable:!0,onChange:(e,t)=>{!e||"select-option"!==t.action&&"deselect-option"!==t.action&&"clear"!==t.action?R(null):(R(e),b(e))},value:N})),s.default.createElement("div",null,s.default.createElement("button",{type:"button",disabled:!N,className:"btn btn-link btn-change-resources",onClick:()=>{N&&(b(N),R(null))}},s.default.createElement("span",{className:"d-none d-sm-inline-block me-sm-1"},O("Add")),s.default.createElement("i",{className:"bi bi-plus-circle"})))),s.default.createElement("div",{className:"form-check mt-1 mt-sm-0 ms-0 ms-sm-1"},s.default.createElement("label",{htmlFor:"allow-guest-participation",className:"form-check-label"},O("AllowParticipantsToJoin")),s.default.createElement("input",{type:"checkbox",id:"allow-guest-participation",className:"form-check-input",checked:a,onChange:e=>y(e.target.checked)}))),p.length>0&&s.default.createElement("div",{className:"mt-1 reservation-errors"},p.map((e=>s.default.createElement("div",{key:e.resourceName},"• ",O("MaxParticipantsError",{s1:e.resourceName,s2:e.capacity}))))),s.default.createElement("div",{className:"mt-1"},l.map((e=>s.default.createElement("div",{key:e.user.id},s.default.createElement("span",{className:"me-1"},s.default.createElement(m.ReservationUserName,{id:e.user.id,name:e.user.fullName})),!e.isInvited&&s.default.createElement("i",{className:"bi bi-check-circle",title:O("Participant")}),e.isInvited&&s.default.createElement("i",{className:"bi bi-question-circle",title:O("Invited")}),s.default.createElement("button",{className:"btn btn-link m-0 p-0 ms-1 remove-button",onClick:()=>h(e.user)},s.default.createElement("i",{className:"bi bi-x"})))))),s.default.createElement("div",{className:"mt-1"},i.map((e=>s.default.createElement("div",{key:e.email},s.default.createElement("span",{className:"me-1"},e.email),!e.isInvited&&s.default.createElement("i",{className:"bi bi-check-circle",title:O("Participant")}),e.isInvited&&s.default.createElement("i",{className:"bi bi-question-circle",title:O("Invited")}),s.default.createElement("button",{className:"btn btn-link m-0 p-0 ms-1 remove-button",onClick:()=>E(e.email)},s.default.createElement("i",{className:"bi bi-x"}))))))))}},48682:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationProvider=void 0;const r=a(n(67294)),i=n(82140);t.ReservationProvider=function(e){const t=(0,i.useManageReservationsContext)(e.api,e,function(){const e=new URLSearchParams(window.location.search);return{startDate:e.get("sd")||"",endDate:e.get("ed")||"",reservationDate:e.get("rd")||"",scheduleId:e.get("sid")||"",resourceId:e.get("rid")||"",resourcePublicId:e.get("pid")||"",referenceNumber:e.get("rn")||"",sourceReferenceNumber:e.get("srn")||"",isPrinting:"1"===e.get("print")||!1}}());return r.default.createElement(i.ReservationContext.Provider,{value:t},e.children)}},15290:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationReminders=t.useReservationReminders=void 0;const l=i(n(67294)),s=n(81468);function o(e){var t,n,a,r;const{state:i}=e,s=i.reservation,[o,c]=(0,l.useState)((null===(t=s.startReminder)||void 0===t?void 0:t.value)||15),[u,d]=(0,l.useState)((null===(n=s.startReminder)||void 0===n?void 0:n.interval)||"minutes"),[m,f]=(0,l.useState)((null===(a=s.endReminder)||void 0===a?void 0:a.value)||15),[v,p]=(0,l.useState)((null===(r=s.endReminder)||void 0===r?void 0:r.interval)||"minutes");return{isRemindersEnabled:i.metadata.remindersEnabled,startReminderValue:o,startReminderInterval:u,isStartReminderEnabled:null!==s.startReminder,isEndReminderEnabled:null!==s.endReminder,endReminderInterval:v,endReminderValue:m,onStartReminderEnabled:function(e){e?i.onStartReminderChanged({value:o,interval:u}):i.onStartReminderChanged(null)},onEndReminderEnabled:function(e){e?i.onEndReminderChanged({value:m,interval:v}):i.onEndReminderChanged(null)},onStartReminderValueChanged:function(e){const t=Number.parseInt(e);c(t),i.onStartReminderChanged({value:t,interval:u})},onEndReminderValueChanged:function(e){const t=Number.parseInt(e);f(t),i.onEndReminderChanged({value:t,interval:v})},onStartReminderIntervalChanged:function(e){d(e),i.onStartReminderChanged({value:o,interval:e})},onEndReminderIntervalChanged:function(e){p(e),i.onEndReminderChanged({value:m,interval:e})}}}t.useReservationReminders=o,t.ReservationReminders=function(e){const{isRemindersEnabled:t,isStartReminderEnabled:n,startReminderValue:a,startReminderInterval:r,endReminderValue:i,endReminderInterval:c,isEndReminderEnabled:u,onStartReminderEnabled:d,onStartReminderIntervalChanged:m,onStartReminderValueChanged:f,onEndReminderValueChanged:v,onEndReminderEnabled:p,onEndReminderIntervalChanged:b}=o({state:e.context}),{t:h}=(0,s.useTranslation)();return t?l.default.createElement("div",{className:"reservation-section",id:"reservation-reminders-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-alarm"})),l.default.createElement("div",{className:"reservation-content-section"},l.default.createElement("div",{className:"reservation-label"},h("Reminders")),l.default.createElement("div",{className:"row g-0"},l.default.createElement("div",{className:"d-flex align-items-center col-sm-6"},l.default.createElement("div",{className:"form-check"},l.default.createElement("label",{htmlFor:"start-reminder-enabled",className:"form-check-label visually-hidden"},"Is Start Reminder Enabled"),l.default.createElement("input",{type:"checkbox",id:"start-reminder-enabled",className:"form-check-input",checked:n,onChange:e=>d(e.target.checked)})),l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"start-reminder-value",className:"visually-hidden"},"Start Reminder Value"),l.default.createElement("input",{id:"start-reminder-value",type:"number",min:0,max:999,className:"form-control reminder-time me-1",value:a,onChange:e=>f(e.target.value),disabled:!n})),l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"start-reminder-interval",className:"visually-hidden"},"Start Reminder Interval"),l.default.createElement("select",{id:"start-reminder-interval",className:"form-select auto-width me-1",value:r,onChange:e=>m(e.target.value),disabled:!n},l.default.createElement("option",{value:"minutes"},h("minutes")),l.default.createElement("option",{value:"hours"},h("hours")),l.default.createElement("option",{value:"days"},h("days")))),l.default.createElement("div",{className:""},h("ReminderBeforeStart"))),l.default.createElement("div",{className:"d-flex align-items-center col-sm-6 mt-3 mt-sm-0"},l.default.createElement("div",{className:"form-check"},l.default.createElement("label",{htmlFor:"end-reminder-enabled",className:"form-check-label visually-hidden"},"Is End Reminder Enabled"),l.default.createElement("input",{type:"checkbox",id:"end-reminder-enabled",className:"form-check-input",checked:u,onChange:e=>p(e.target.checked)})),l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"end-reminder-value",className:"visually-hidden"},"End Reminder Value"),l.default.createElement("input",{id:"end-reminder-value",type:"number",min:0,max:999,className:"form-control reminder-time me-1",value:i,onChange:e=>v(e.target.value),disabled:!u})),l.default.createElement("div",null,l.default.createElement("label",{htmlFor:"end-reminder-interval",className:"visually-hidden"},"End Reminder Interval"),l.default.createElement("select",{id:"end-reminder-interval",className:"form-select auto-width me-1",value:c,onChange:e=>b(e.target.value),disabled:!u},l.default.createElement("option",{value:"minutes"},h("minutes")),l.default.createElement("option",{value:"hours"},h("hours")),l.default.createElement("option",{value:"days"},h("days")))),l.default.createElement("div",{className:""},h("ReminderBeforeEnd")))))):l.default.createElement(l.default.Fragment,null)}},96537:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationRequiresApproval=void 0;const l=i(n(67294)),s=n(81468);t.ReservationRequiresApproval=function(e){var t;const n=e.context,a=(0,l.useMemo)((()=>{var e;return(null===(e=n.reservation)||void 0===e?void 0:e.requiresApproval)&&!n.metadata.canApprove}),[null===(t=n.reservation)||void 0===t?void 0:t.requiresApproval,n.metadata.canApprove]),{t:r}=(0,s.useTranslation)();return a?l.default.createElement("div",{className:"reservation-section",id:"reservation-requires-approval-section"},l.default.createElement("div",{className:"reservation-icon-section"}," "),l.default.createElement("div",{className:"reservation-content-section reservation-action-bar"},l.default.createElement("div",{className:"d-flex justify-content-between align-items-center"},l.default.createElement("div",null,r("ReservationRequiresApproval"))))):l.default.createElement(l.default.Fragment,null)}},80386:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationResource=void 0;const s=l(n(87565));n(3751),n(35725);const o=i(n(67294)),c=n(81468),u=n(36554),d=n(12907);t.ReservationResource=function(e){const{resource:t,resources:n,resourceAttributes:a}=e,{t:r}=(0,c.useTranslation)(),[i,l]=(0,o.useState)(!1);let m={};t.color&&(m={backgroundColor:t.color,color:t.textColor||"#000"});let f=o.default.createElement(o.default.Fragment,null),v=o.default.createElement(o.default.Fragment,null),p=o.default.createElement(o.default.Fragment,null);return t.requiresApproval&&(f=o.default.createElement("i",{className:"bi bi-eye",title:(0,d.removeStrong)(r("ResourceRequiresApproval"))})),t.requiresCheckin&&(v=o.default.createElement("i",{className:"bi bi-clipboard-check",title:(0,d.removeStrong)(r("RequiresCheckInNotification"))})),t.autoReleaseMinutes&&(p=o.default.createElement("i",{className:"bi bi-clock-history",title:(0,d.removeStrong)(r("AutoReleaseNotification",{s1:t.autoReleaseMinutes}))})),o.default.createElement(o.default.Fragment,null,o.default.createElement(s.default,{theme:"light-border",delay:700,maxWidth:"100%",allowHTML:!0,interactive:!0,inertia:!0,content:o.default.createElement(u.ResourceHover,{resource:t,resourceAttributes:a,resourceTypes:[],resourceTypeAttributes:[],resources:n}),visible:i,onClickOutside:function(){l(!1)},className:"resource-info-popup"},o.default.createElement("div",{style:m,className:"reservation-resource",onClick:()=>l(!i)},t.name,o.default.createElement("i",{className:"bi bi-info-circle reservation-resource-info-circle"}),f,v,p)))}},14651:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function l(e){try{o(a.next(e))}catch(e){i(e)}}function s(e){try{o(a.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,s)}o((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationResources=t.useReservationResources=void 0;const s=i(n(67294)),o=n(81468),c=n(82140),u=n(41773),d=n(26002),m=n(28193),f=n(32761),v=n(7781),p=n(80386),b=n(14086);function h(e){const{state:t}=e,n=t.reservation,{resources:a,resourceAttributes:r,resourcesById:i,schedule:l,accessories:o}=t,[c,u]=(0,s.useState)(!1),[d,m]=(0,s.useState)(!1),f=(e,t)=>e.sortOrder<t.sortOrder?-1:t.sortOrder>t.sortOrder?1:e.name.localeCompare(t.name),v=(0,s.useMemo)((()=>a.filter((e=>n.resourceIds.includes(e.id))).sort(f)),[n.resourceIds]),p=(0,s.useMemo)((()=>{const e=[],t=new Set(v.map((e=>e.id)));return v.forEach((n=>{n.relationships.required.forEach((n=>{const a=i[n];a&&!t.has(n)&&e.push(a)})),n.relationships.requiredOneWay.forEach((n=>{const a=i[n];a&&!t.has(n)&&e.push(a)}))})),e}),[n.resourceIds]),b=(0,s.useMemo)((()=>{const e=[],t=new Set(v.map((e=>e.id)));return v.forEach((n=>{[...n.relationships.excluded,...n.relationships.excludedAtTime].forEach((n=>{const a=i[n];a&&t.has(n)&&e.push(a)}))})),e}),[n.resourceIds]);function h(e){const a=[...n.resourceIds];e.forEach((e=>{a.includes(e)||a.push(e)})),t.onResourceIdsChanged(a)}return{classResources:o.length>0?"col-sm-6":"col-12",classAccessories:o.length>0?"col-sm-6 mt-4 mt-sm-0":"d-none",selectedResources:v,resourceAttributes:r,allResources:a,requiredResources:p.sort(f),requiredResourcesNotAllowed:p.includes(void 0),excludedResources:b.sort(f),onResourcesAdded:h,onResourcesChanged:function(e){e.length>0&&t.onResourceIdsChanged(e.map((e=>e.id)))},maximumResourcesErrorCount:function(){if(l&&(null==l?void 0:l.maximumResourcesPerReservation))return l.maximumResourcesPerReservation<n.resourceIds.length?l.maximumResourcesPerReservation:void 0}(),isResourceQrError:c,isResourceScannerOpen:d,onResourceQRScanned:function(e){if(d)if(e.includes("pid=")){u(!1);const t=e.split("pid=")[1],n=a.find((e=>e.publicId===t));if(!n)return void u(!0);h([n.id]),m(!1)}else u(!0)},onResourceQRError:()=>u(!0),onResourceQRScannerClosed:()=>{m(!1),u(!1)},onResourceQRScannerOpened:()=>{m(!0),u(!1)}}}function g(e){const t=(0,s.useContext)(c.ReservationContext),{t:n}=(0,o.useTranslation)(),[a,r]=(0,s.useState)([]),[i,f]=(0,s.useState)(!1),[p,b]=(0,s.useState)(e.selectedResources),h=t.resources.length>50;return(0,s.useEffect)((()=>{h||(e.isOpen?(f(!0),t.onResourceAvailabilityChecked().then((e=>(r(e.ids),f(!1),e))).catch((()=>{}))):(f(!1),r([])))}),[e.isOpen]),(0,s.useEffect)((()=>{b(e.selectedResources)}),[e.selectedResources]),s.default.createElement(u.Modal,{isOpen:e.isOpen,title:"Resources",onToggle:e.onToggle,className:"reservation-resource-picker-modal"},s.default.createElement(u.ModalBody,null,s.default.createElement(d.ResourcePicker,{defaultResourceIds:p.map((e=>e.id)),resourceGroups:t.resourceGroups,resources:t.resources,page:"reservation",unavailableResourceIds:a,onResourcesChanged:e=>{b(e)},checkboxThreshold:t.metadata.resourceCheckboxThreshold})),s.default.createElement(u.ModalFooter,null,i&&s.default.createElement(m.Spinner,{messageKey:"CheckingAvailability"}),h&&s.default.createElement("button",{className:"btn btn-outline-primary",onClick:function(){return l(this,void 0,void 0,(function*(){f(!0),t.onSpecificResourceAvailabilityChecked(p.map((e=>e.id))).then((e=>(r(e.ids),f(!1),e))).catch((()=>{f(!1)}))}))}},n("CheckAvailability")),s.default.createElement(v.UpdateAndCancelButtons,{onCancel:e.onToggle,onUpdate:()=>{e.onResourcesChanged(p),e.onToggle()}})))}t.useReservationResources=h,t.ReservationResources=function(e){const{t}=(0,o.useTranslation)(),{classResources:n,classAccessories:a,allResources:r,resourceAttributes:i,selectedResources:l,requiredResources:c,requiredResourcesNotAllowed:u,maximumResourcesErrorCount:d,excludedResources:m,isResourceQrError:v,isResourceScannerOpen:E,onResourcesAdded:y,onResourcesChanged:N,onResourceQRScanned:R,onResourceQRError:O,onResourceQRScannerClosed:_,onResourceQRScannerOpened:C}=h({state:e.context}),[S,k]=(0,s.useState)(!1);return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"reservation-section",id:"reservation-resources-section"},s.default.createElement("div",{className:"reservation-icon-section"},s.default.createElement("i",{className:"bi bi-shop-window"})),s.default.createElement("div",{className:"reservation-content-section row g-0"},s.default.createElement("div",{className:n},s.default.createElement("div",{className:"d-flex align-items-center"},s.default.createElement("div",{className:"reservation-label d-inline"},t("Resources")," ",s.default.createElement("span",{className:"badge reservation-badge"},l.length)),s.default.createElement("button",{type:"button",className:"btn btn-link btn-change-resources",onClick:()=>k(!0)},t("Change")," ",s.default.createElement("i",{className:"bi bi-plus-circle"})),s.default.createElement("button",{type:"button",className:"btn btn-link btn-scan-resource-qr d-lg-none",onClick:C},s.default.createElement("span",{className:"bi bi-upc-scan"}))),s.default.createElement("div",{className:"reservation-selected-resources"},l.map((e=>s.default.createElement(p.ReservationResource,{key:e.id,resource:e,resources:r,resourceAttributes:i})))),(c.length>0||u)&&s.default.createElement("div",null,s.default.createElement("div",null,s.default.createElement("div",{className:"reservation-errors"},s.default.createElement("span",null,"• ",t("ReservationMustBeBookedTogether"))," - ",s.default.createElement("span",null,c.map((e=>e.name)).join(", ")),u&&s.default.createElement("div",null,t("ReservationRequiredResourceNoPermission")))),!u&&s.default.createElement("div",null,s.default.createElement("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>y(c.map((e=>e.id)))},t("AddRequiredResources")))),m.length>0&&s.default.createElement("div",{className:"reservation-errors"},s.default.createElement("span",null,"• ",t("ReservationCannotBeBookedTogether"))," - ",s.default.createElement("span",null,m.map((e=>e.name)).join(", "))),d&&s.default.createElement("div",{className:"reservation-errors"},"• ",t("InvalidNumberOfResourcesError",{s1:d})),0===l.length&&s.default.createElement("div",{className:"reservation-errors"},"• ",t("NoResources"))),s.default.createElement("div",{className:a},s.default.createElement(f.ReservationAccessories,null)))),s.default.createElement(g,{selectedResources:l,onResourcesChanged:N,onToggle:()=>k(!S),isOpen:S}),s.default.createElement(b.QRScanner,{isOpen:E,isError:v,onClose:_,errorMessage:t("ResourceQRScanFailed"),onScanned:R,onError:O}))}},134:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationSaving=void 0;const l=i(n(67294)),s=n(81468),o=n(41773),c=n(28193),u=n(12148),d=n(7809),m=n(51240),f=n(51073);t.ReservationSaving=function(e){const{t}=(0,s.useTranslation)(),n=e.context,a=n.reservationSaveState,r=(0,l.useContext)(f.AppSettingsContext),[i,v]=(0,l.useState)({saving:"",saved:""});return(0,l.useEffect)((()=>{let e={saving:"",saved:""};"save"===n.reservationSaveState.mode&&(e={saving:"CreatingReservation",saved:"ReservationCreated"}),"update"===n.reservationSaveState.mode&&(e={saving:"UpdatingReservation",saved:"ReservationUpdated"}),"delete"===n.reservationSaveState.mode&&(e={saving:"DeletingReservation",saved:"ReservationDeleted"}),"waitlist"===n.reservationSaveState.mode&&(e={saving:"AddingToWaitlist",saved:"WaitlistRequestAdded"}),v(e)}),[n.reservationSaveState.mode]),l.default.createElement(o.Modal,{hideHeader:!0,preventEscape:!0,isOpen:a.isSaveDialogOpen,onToggle:n.onReservationSaveCancelled,title:""},l.default.createElement(o.ModalBody,null,l.default.createElement("div",{className:"reservation-saving-modal-content"},!a.isSaveSuccess&&0===a.reservationErrors.length&&l.default.createElement("div",null,l.default.createElement("h3",null,t(i.saving)),l.default.createElement(c.Spinner,null)),a.isSaveSuccess&&l.default.createElement("div",null,l.default.createElement("div",null,l.default.createElement("i",{className:"bi bi-calendar2-check reservation-save-result-icon success"})),l.default.createElement("div",{className:"reservation-save-message-header"},t(i.saved)),("save"===n.reservationSaveState.mode||"update"===n.reservationSaveState.mode)&&l.default.createElement("div",null,t("YourReferenceNumber",{s1:n.reservation.referenceNumber})),a.showDetails&&l.default.createElement("div",null,l.default.createElement("div",null,l.default.createElement("i",{className:"bi bi-shop-window"})," ",n.reservation.resourceIds.map((e=>n.resourcesById[e].name)).join(", ")),l.default.createElement("div",null,l.default.createElement("i",{className:"bi bi-clock"})," ",n.reservation.start.toLocaleString(void 0,m.TIME_FORMAT)," -"," ",n.reservation.end.toLocaleString(void 0,m.TIME_FORMAT)),l.default.createElement("div",null,l.default.createElement("i",{className:"bi bi-calendar"})," ",a.dates.join(", "))),a.isPending&&l.default.createElement("div",{className:"reservation-save-message-pending"},t("ReservationRequiresApproval")),l.default.createElement("a",{href:(0,d.getReturnUrlWithHash)(n,r),className:"btn btn-primary"},t("Close"))),a.reservationErrors.length>0&&l.default.createElement("div",null,l.default.createElement("div",null,l.default.createElement("i",{className:"bi bi-patch-exclamation reservation-save-result-icon error"})),l.default.createElement("div",{className:"reservation-save-message-header"},t("ReservationFailed")),a.reservationErrors.map(((e,t)=>l.default.createElement("div",{key:t},l.default.createElement(u.NewLineToBr,{s:e})))),a.reservationCanBeRetried&&l.default.createElement("div",{className:"reservation-save-message-notice"},l.default.createElement("i",{className:"bi bi-info-circle"})," ",t("RetryReservationNotice")),a.canJoinWaitlist&&l.default.createElement("div",{className:"reservation-save-message-notice"},l.default.createElement("i",{className:"bi bi-info-circle"})," ",t("JoinWaitlistReservationNotice")),l.default.createElement("div",null,l.default.createElement("button",{type:"button",className:"btn btn-warning",onClick:n.onReservationSaveCancelled},l.default.createElement("i",{className:"bi bi-arrow-left-circle"})," ",t("ReservationErrors")),a.canJoinWaitlist&&l.default.createElement("button",{type:"button",className:"btn btn-outline-info ms-3",onClick:n.onJoinWaitlist},l.default.createElement("i",{className:"bi bi-alarm"})," ",t("NotifyWhenAvailable")),a.reservationCanBeRetried&&l.default.createElement("button",{type:"button",className:"btn btn-outline-dark ms-3",onClick:()=>"update"===n.reservationSaveState.mode?n.onReservationUpdated(void 0,!0):n.onReservationCreated(!0)},l.default.createElement("i",{className:"bi bi-check-circle"})," ",t("Retry")))))))}},7121:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationTerms=void 0;const r=a(n(67294)),i=n(81468),l=n(51240);t.ReservationTerms=function(e){const{context:t}=e,{terms:n,reservation:a}=t,{t:s}=(0,i.useTranslation)();return n&&a?r.default.createElement("div",{className:"reservation-section",id:"reservation-terms-section"},r.default.createElement("div",{className:"reservation-icon-section"},r.default.createElement("i",{className:"bi bi-receipt"})),r.default.createElement("div",{className:"reservation-content-section"},a.termsAcceptedDate&&r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement("a",{href:n.url,target:"_blank",rel:"noreferrer"},s("TermsOfService"))," ",s("TermsAcceptedOn",{acceptDate:a.termsAcceptedDate.toLocaleDateString(void 0,l.DATE_FORMAT)}))),!a.termsAcceptedDate&&r.default.createElement("div",null,r.default.createElement("div",{className:"form-check"},r.default.createElement("label",{htmlFor:"reservation-terms-checkbox",className:"form-check-label"},s("IAccept")),r.default.createElement("input",{id:"reservation-terms-checkbox",type:"checkbox",className:"form-check-input",onChange:e=>t.onTermsAcceptChanged(e.target.checked)})," ",r.default.createElement("a",{href:n.url,target:"_blank",rel:"noreferrer"},s("TheTermsOfService")))))):r.default.createElement(r.default.Fragment,null)}},38774:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationTimes=t.useReservationTimes=void 0;const s=i(n(67294)),o=n(81468),c=l(n(9198));n(44308);const u=n(51240),d=n(69989),m=n(12907),f=n(40897);function v(e){const{state:t}=e,{metadata:n,resourcesById:a}=t,r=e.clock||new u.Clock,i=t.reservation,l=(0,s.useMemo)((()=>function(){const{t:l}=e;if(!i||!i.end||!i.start)return[];const s=(0,m.getDuration)(i.end,i.start),o=(e,t)=>!!e&&(!(!e||t)||(0,m.intervalAsMinutes)(e)>(0,m.intervalAsMinutes)(t)),c=(e,t)=>!!e&&(!(!e||t)||(0,m.intervalAsMinutes)(e)<(0,m.intervalAsMinutes)(t));let d=null,f=null,v=null,p=null,b=!0;i.resourceIds.forEach((e=>{const t=a[e];t&&(i.referenceNumber&&c(t.noticeUpdate,d)&&(d=t.noticeUpdate),!i.referenceNumber&&c(t.noticeAdd,d)&&(d=t.noticeAdd),o(t.noticeEnd,f)&&(f=t.noticeEnd),c(t.minDuration,v)&&(v=t.minDuration),o(t.maxDuration,p)&&(p=t.maxDuration),t.allowCrossDay||(b=!1))}));const h=[];i.end<=i.start&&h.push(l("StartDateBeforeEndDateRule")),b||i.start.toLocaleDateString()===i.end.toLocaleDateString()||h.push(l("MultiDayRuleAll"));const{schedule:g}=t;if(g&&!g.usesAppointments){const e=g.slots.days[i.start.getDay()].slots.find((e=>e.isAvailable&&e.start===(0,m.formatAsTime)(i.start.getHours(),i.start.getMinutes()))),t=g.slots.days[i.start.getDay()].slots.find((e=>(e.isAvailable||g.canEndInUnavailableSlots)&&e.end===(0,m.formatAsTime)(i.end.getHours(),i.end.getMinutes())));e||h.push(l("InvalidStartSlot")),t||h.push(l("InvalidEndSlot"))}const E=r.now(n.timezone),y=r.addMinutes((0,m.intervalAsMinutes)(d),E),N=r.addMinutes((0,m.intervalAsMinutes)(f),E);return d&&i.start<y&&h.push(l("MinNoticeError",{s1:y.toLocaleString(void 0,u.DATE_TIME_FORMAT)})),f&&i.start>N&&h.push(l("MaxNoticeError",{s1:N.toLocaleString(void 0,u.DATE_TIME_FORMAT)})),v&&(0,m.intervalAsMinutes)(s)<(0,m.intervalAsMinutes)(v)&&h.push(l("MinDurationError",{s1:(0,m.formatDuration)(v,l)})),p&&(0,m.intervalAsMinutes)(s)>(0,m.intervalAsMinutes)(p)&&h.push(l("MaxDurationError",{s1:(0,m.formatDuration)(p,l)})),i.start<E&&h.push(l("StartTimeIsInPast")),h}()),[i.resourceIds,i.start,i.end,i.recurrence]),o=(0,s.useMemo)((()=>i.start),[i.start]),c=(0,s.useMemo)((()=>i.end),[i.end]),f=(0,s.useMemo)((()=>t.getStartSlots(o,t.schedule)),[o,t.schedule]),v=(0,s.useMemo)((()=>t.getEndSlots(c,t.schedule)),[o,t.schedule]);return{startDate:o,endDate:c,startTime:function(){let e=f.find((e=>e.startHour===o.getHours()&&e.startMinute===o.getMinutes()));if(e)return(0,m.formatAsTime)(e.startHour,e.startMinute);const t=f.findIndex((e=>e.startHour>o.getHours()||e.startHour===o.getHours()&&e.startMinute>o.getMinutes()));return-1!==t?(e=f[Math.max(0,t-1)],(0,m.formatAsTime)(e.startHour,e.startMinute)):(0,m.formatAsTime)(o.getHours(),o.getMinutes())}(),endTime:function(){let e=v.find((e=>e.endHour===c.getHours()&&e.endMinute===c.getMinutes()));return e?(0,m.formatAsTime)(e.endHour,e.endMinute):(e=v.find((e=>24!==e.endHour&&(e.endHour>c.getHours()||e.endHour===c.getHours()&&e.endMinute>=c.getMinutes()))),e?(0,m.formatAsTime)(e.endHour,e.endMinute):(0,m.formatAsTime)(c.getHours(),c.getMinutes()))}(),startSlots:f,endSlots:v,duration:(0,m.getDuration)(c,o),repeatType:i.recurrence.type,repeatWeekdays:i.recurrence.weekdays||[o.getDay()],repeatInterval:i.recurrence.interval,repeatTerminationDate:function(){const{type:e,terminationDate:t}=i.recurrence;if(null===e||e===d.RepeatType.Custom)return null;let n=null;const a=i.recurrence.interval||1;return e===d.RepeatType.Daily&&(n=r.addDays(a,c)),e===d.RepeatType.Weekly&&(n=r.addDays(7*a,c)),e===d.RepeatType.Monthly&&(n=r.addMonths(a,c)),e===d.RepeatType.Yearly&&(n=r.addYears(a,c)),t&&(!n||t>=n)?t:n}(),repeatCustomDates:i.recurrence.repeatDates,repeatMonthlyType:i.recurrence.monthlyType,repeatMinimumRepeatDate:r.addDays(1,c),waitlistCount:t.metadata.waitlistCount,onStartChanged:function(e,a){const i=r.setTime(u.Clock.toTimezone(e,n.timezone),a),l=i.getTime()-o.getTime(),s=new Date(c.getTime()+l);t.onDatesChanged(i,s)},onEndChanged:function(e,a){const i=r.setTime(u.Clock.toTimezone(e,n.timezone),a);t.onDatesChanged(o,i)},onRecurrenceChanged:function(e,n,a,r,i,l){t.onRecurrenceChanged(e,n,a,r,i,l)},errors:l}}t.useReservationTimes=v,t.ReservationTimes=function(e){const{t}=(0,o.useTranslation)(),{context:n,appState:a,isReservationAvailabilityOpen:r,onToggleAvailability:i}=e,{startDate:l,startTime:d,endTime:p,endDate:b,startSlots:h,endSlots:g,duration:E,errors:y,repeatType:N,repeatWeekdays:R,repeatInterval:O,repeatMonthlyType:_,repeatTerminationDate:C,repeatCustomDates:S,repeatMinimumRepeatDate:k,waitlistCount:w,onStartChanged:D,onEndChanged:M,onRecurrenceChanged:j}=v({state:n,t});return n.schedule&&n.schedule.usesAppointments?s.default.createElement("div",{className:"reservation-section",id:"reservation-times-section"},s.default.createElement("div",{className:"reservation-icon-section"},s.default.createElement("i",{className:"bi bi-clock"})),s.default.createElement("div",{className:"reservation-content-section d-block d-sm-flex flex-wrap"},s.default.createElement("div",{className:"d-flex me-sm-5"},s.default.createElement("div",{className:""},s.default.createElement("div",{className:"reservation-label"},t("BeginDate")),s.default.createElement("div",null,l.toLocaleString(void 0,u.DATE_TIME_FORMAT)))),s.default.createElement("div",{className:"d-flex me-sm-5 mt-1 mt-sm-0"},s.default.createElement("div",{className:""},s.default.createElement("div",{className:"reservation-label"},t("EndDate")),s.default.createElement("div",null,b.toLocaleString(void 0,u.DATE_TIME_FORMAT)))),s.default.createElement("div",{className:"d-block d-sm-flex mt-1 mt-sm-0 align-items-end pb-sm-2"},(0,m.formatDuration)(E,t)))):s.default.createElement("div",{className:"reservation-section",id:"reservation-times-section"},s.default.createElement("div",{className:"reservation-icon-section"},s.default.createElement("i",{className:"bi bi-clock"})),s.default.createElement("div",{className:"reservation-content-section d-block d-sm-flex flex-wrap"},s.default.createElement("div",{className:"d-flex me-sm-5"},s.default.createElement("div",{className:""},s.default.createElement("label",{htmlFor:"reservation-start-date",className:"form-label reservation-label"},t("BeginDate")),s.default.createElement(c.default,{id:"reservation-start-date",wrapperClassName:"d-block",className:"form-control reservation-date-picker",selected:l,onChange:e=>{e instanceof Date&&D(e,d)},dateFormat:a.dateFormat||"P",calendarStartDay:a.firstDayOfWeek,isClearable:!1,popperModifiers:[{name:"preventOverflow",options:{mainAxis:!1}}]})),s.default.createElement("div",{className:"reservation-time-dropdown"},h.length>0&&s.default.createElement(s.default.Fragment,null,s.default.createElement("label",{htmlFor:"reservation-start-time",className:"form-label visually-hidden"},"Begin Time"),s.default.createElement("select",{id:"reservation-start-time",className:"form-select",value:d,onChange:e=>D(l,e.target.value)},h.map((e=>s.default.createElement("option",{key:e.start,value:e.start},e.label))))),0===h.length&&s.default.createElement("span",null,"No available slots on this day"))),s.default.createElement("div",{className:"d-flex me-sm-5 mt-1 mt-sm-0"},s.default.createElement("div",{className:""},s.default.createElement("label",{htmlFor:"reservation-end-date",className:"form-label reservation-label"},t("EndDate")),s.default.createElement(c.default,{id:"reservation-end-date",wrapperClassName:"d-block",className:"form-control reservation-date-picker",selected:b,onChange:e=>{e instanceof Date&&M(e,p)},dateFormat:a.dateFormat||"P",calendarStartDay:a.firstDayOfWeek,isClearable:!1,popperModifiers:[{name:"preventOverflow",options:{mainAxis:!1}}]})),g.length>0&&s.default.createElement("div",{className:"reservation-time-dropdown"},s.default.createElement("label",{htmlFor:"reservation-end-time",className:"form-label visually-hidden"},"End Time"),s.default.createElement("select",{id:"reservation-end-time",className:"form-select",value:p,onChange:e=>M(b,e.target.value)},g.map((e=>s.default.createElement("option",{key:e.end,value:e.end},e.labelEnd))))),0===g.length&&s.default.createElement("div",{className:"reservation-time-dropdown"},"No available slots on this day")),s.default.createElement("div",{className:"d-block d-sm-flex mt-1 mt-sm-0 align-items-end pb-sm-2"},(0,m.formatDuration)(E,t)),s.default.createElement("div",{className:"d-none d-sm-flex align-items-end pb-2 ms-5"},s.default.createElement("button",{className:"btn btn-link m-0 p-0",onClick:i},r&&s.default.createElement(s.default.Fragment,null,s.default.createElement("i",{className:"bi bi-calendar-x"})," ",t("HideAvailability")),!r&&s.default.createElement(s.default.Fragment,null,s.default.createElement("i",{className:"bi bi-calendar"})," ",t("ViewAvailability")))),y.length>0&&s.default.createElement("div",{className:"col-12 mt-1 reservation-errors reservation-time-errors"},y.map((e=>s.default.createElement("div",{key:e},"• ",e)))),w>0&&s.default.createElement("div",{className:"col-12 mt-1"},s.default.createElement("div",{className:" reservation-waitlist-notice"},1===w?t("WaitlistSingle"):t("WaitlistPlural",{s1:w}))),!n.metadata.preventRecurrence&&s.default.createElement("div",{className:"col-12 mt-4"},s.default.createElement(f.Recurrence,{lang:a.lang,type:N,weekdays:R,repeatDates:S,terminationDate:C,interval:O,monthlyType:_,onChanged:j,minimumRepeatDate:k,dateFormat:a.dateFormat||"P",firstDayOfWeek:a.firstDayOfWeek}))))}},84094:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationTitle=void 0;const l=i(n(67294)),s=n(81468),o=n(94880);t.ReservationTitle=function(e){var t;const n=e.context,[a,r]=(0,l.useState)((null===(t=n.reservation)||void 0===t?void 0:t.title)||""),{t:i}=(0,s.useTranslation)();return l.default.createElement("div",{className:"reservation-section",id:"reservation-title-section"},l.default.createElement("div",{className:"reservation-icon-section"},l.default.createElement("i",{className:"bi bi-card-heading"})),l.default.createElement("div",{className:"reservation-content-section"},l.default.createElement("div",null,l.default.createElement("label",{className:"form-label reservation-label",htmlFor:"reservation-title"},i("Title")," ",n.metadata.titleRequired&&l.default.createElement("span",null,"*")),l.default.createElement(o.ClearableTextInput,{id:"reservation-title",autoFocus:!0,value:a,type:"text",isRequired:n.metadata.titleRequired,onChange:e=>r(e),onBlur:()=>n.onTitleChanged(a.trim())}))))}},61929:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationUserName=t.useReservationUserName=void 0;const s=i(n(67294)),o=l(n(87565));n(3751),n(35725);const c=n(28193),u=n(78929),d=n(81468),m=n(82140);function f(e){const{id:t,state:n}=e,[a,r]=(0,s.useState)(),[i,l]=(0,s.useState)(),[o,c]=(0,s.useState)(!1);return{userDetails:i,isDetailShown:o,onUserDetailsHidden:function(){c(!1)},onUserDetailsShown:function(){t!==a?n.onUserDetailsShown(t).then((e=>(c(!0),l(e),r(t),e))).catch((()=>{c(!1)})):c(!0)}}}t.useReservationUserName=f,t.ReservationUserName=function(e){const t=(0,s.useContext)(m.ReservationContext),{userDetails:n,isDetailShown:a,onUserDetailsHidden:r,onUserDetailsShown:i}=f({id:e.id,state:t}),{t:l}=(0,d.useTranslation)();return s.default.createElement(o.default,{theme:"light-border",delay:700,maxWidth:"100%",allowHTML:!0,interactive:!0,inertia:!0,content:n?s.default.createElement("div",{className:"user-info"},s.default.createElement("div",{className:"user-info-name"},n.fullName),s.default.createElement("div",{className:"user-info-item"},s.default.createElement("span",{className:"label"},l("Email")),s.default.createElement("a",{href:`mailto:${n.email}`},n.email)),n.phone&&s.default.createElement("div",{className:"user-info-item"},s.default.createElement("span",{className:"label"},l("Phone")),s.default.createElement("a",{href:`tel:${n.phone}`},n.phone)),n.organization&&s.default.createElement("div",{className:"user-info-item"},s.default.createElement("span",{className:"label"},l("Organization")),n.organization),n.position&&s.default.createElement("div",{className:"user-info-item"},s.default.createElement("span",{className:"label"},l("Position")),n.position),n.userAttributes.map((e=>{var t;return s.default.createElement(u.CustomAttribute,{key:e.id,attribute:e,value:null===(t=n.attributeValues.find((t=>t.id===e.id)))||void 0===t?void 0:t.value})}))):s.default.createElement(c.Spinner,null),visible:a,onClickOutside:r},s.default.createElement("div",{className:"reservation-owner-name",onClick:i},e.name))}},14988:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReservationUserSelect=void 0;const s=l(n(67294)),o=l(n(23157)),c=l(n(27976)),u=i(n(83999));t.ReservationUserSelect=function(e){const{users:t,selectedUser:n,placeholder:a,isClearable:r,id:i,allowAdd:l,onChange:d,onCreate:m}=e;function f(e){if(!e)return"";const t=e.fullName;return""!==e.email?`${t} (${e.email})`:t}return s.default.createElement("div",null,s.default.createElement("label",{htmlFor:i,className:"visually-hidden"},"User"),l&&s.default.createElement(c.default,{id:i,placeholder:a,options:t.map((e=>({label:f(e),value:e.id.toString()}))),isClearable:r,onChange:(e,n)=>{!e||"select-option"!==n.action&&"deselect-option"!==n.action&&"clear"!==n.action||d(t.find((t=>t.id.toString()===e.value))||null)},isValidNewOption:e=>u.validate(e),onCreateOption:e=>!(!m||!u.validate(e)||(m(e),0)),value:n?{value:n.id.toString(),label:f(n)}:void 0}),!l&&s.default.createElement(o.default,{id:i,placeholder:a,options:t,isClearable:r,getOptionLabel:e=>{const t=e.fullName;return""!==e.email?`${t} (${e.email})`:t},getOptionValue:e=>e.id.toString(),onChange:e=>{d(e)},value:n}))}},36554:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceHover=void 0;const s=i(n(67294)),o=l(n(79732)),c=n(81468),u=n(12907),d=n(78929),m=n(51073),f=n(28194);function v(e){const t=(0,s.useContext)(m.AppSettingsContext).uploadImagesPath,n=(0,s.useRef)(null),[a,r]=(0,f.useFullscreenStatus)(n);return s.default.createElement("div",{onClick:r,className:"resource-info-image-container"},s.default.createElement("img",{ref:n,src:`${t}/${e.url}`,className:"d-inline-block img-thumbnail resource-info-image",alt:`Image ${e.index+1}`}))}t.ResourceHover=function(e){const{t}=(0,c.useTranslation)(),n=(0,s.useContext)(m.AppSettingsContext),{resource:a,resourceAttributes:r,resources:i}=e,{creditsEnabled:l}=n,f=`#resource-image-carousel-${a.id}`,p=null!==a.minDuration||null!==a.maxDuration||null!==a.noticeAdd||null!==a.noticeEnd||!1===a.allowCrossDay||0!==a.capacity&&null!==a.capacity||!0===a.requiresCheckin;return(0,s.useLayoutEffect)((()=>{let e;const t=document.querySelector(f);return t&&(e=new bootstrap.Carousel(t)),()=>{e&&e.dispose()}}),[]),s.default.createElement("div",{className:"resource-info"},s.default.createElement("div",{className:"resource-info-name"},a.name),a.images.length>0&&s.default.createElement("div",{id:`resource-image-carousel-${a.id}`,className:"carousel slide carousel-dark resource-image-carousel","data-bs-ride":"carousel"},s.default.createElement("div",{className:"carousel-indicators"},a.images.map(((e,t)=>s.default.createElement("button",{key:e,type:"button","data-bs-target":f,"data-bs-slide-to":`${t}`,className:0===t?"active":"","aria-current":0===t?"true":"false","aria-label":`Slide ${t+1}`})))),s.default.createElement("div",{className:"carousel-inner"},a.images.map(((e,t)=>s.default.createElement("div",{key:e,className:"carousel-item "+(0===t?"active":"")},s.default.createElement(v,{url:e,index:t}))))),s.default.createElement("button",{className:"carousel-control-prev",type:"button","data-bs-target":f,"data-bs-slide":"prev"},s.default.createElement("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),s.default.createElement("span",{className:"visually-hidden"},"Previous")),s.default.createElement("button",{className:"carousel-control-next",type:"button","data-bs-target":f,"data-bs-slide":"next"},s.default.createElement("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),s.default.createElement("span",{className:"visually-hidden"},"Next"))),s.default.createElement("div",{className:"resource-info-contents "+(0===a.images.length?"no-images":"")},a.description&&s.default.createElement("div",{className:"resource-info-section"},s.default.createElement("div",{className:"resource-info-label d-block"},t("Description")),s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(o.default,null,a.description))),a.notes&&s.default.createElement("div",{className:"resource-info-section mt-2"},s.default.createElement("div",{className:"resource-info-label d-block"},t("Notes")),s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(o.default,null,a.notes))),a.contact&&s.default.createElement("div",{className:"resource-info-section"},s.default.createElement("div",{className:"resource-info-label d-block"},t("Contact")),s.default.createElement("div",{className:"resource-info-value"},(0,u.linkify)(a.contact))),a.location&&s.default.createElement("div",{className:"resource-info-section"},s.default.createElement("div",{className:"resource-info-label d-block"},t("Location")),s.default.createElement("div",{className:"resource-info-value"},(0,u.linkify)(a.location))),s.default.createElement("div",{className:"resource-info-section mt-2"},p&&s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"resource-info-label d-block"},t("Rules")),null!==a.minDuration&&s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(c.Trans,{i18nKey:"ResourceMinLength",values:{s1:(0,u.intervalAsString)(a.minDuration,t)}})),null!==a.maxDuration&&s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(c.Trans,{i18nKey:"ResourceMaxLength",values:{s1:(0,u.intervalAsString)(a.maxDuration,t)}})),null!==a.noticeAdd&&s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(c.Trans,{i18nKey:"ResourceMinNotice",values:{s1:(0,u.intervalAsString)(a.noticeAdd,t)}})),null!==a.noticeEnd&&s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(c.Trans,{i18nKey:"ResourceMaxNotice",values:{s1:(0,u.intervalAsString)(a.noticeEnd,t)}})),!1===a.allowCrossDay&&s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(c.Trans,{i18nKey:"ResourceNotAllowMultiDay"})),0!==a.capacity&&null!==a.capacity&&s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(c.Trans,{i18nKey:"ResourceCapacity",values:{s1:a.capacity}})),!0===a.requiresCheckin&&s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(c.Trans,{i18nKey:"RequiresCheckInNotification"})),a.autoReleaseMinutes&&s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(c.Trans,{i18nKey:"AutoReleaseNotification",values:{s1:a.autoReleaseMinutes}})))),l&&s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"resource-info-label d-block"},t("Credits")),s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(c.Trans,{i18nKey:"CreditUsagePerSlot",values:{s1:a.creditsOffPeak}})),s.default.createElement("div",{className:"resource-info-value"},s.default.createElement(c.Trans,{i18nKey:"PeakCreditUsagePerSlot",values:{s1:a.creditsPeak}})))),a.relationships.required.length>0&&s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"resource-info-section mt-2"},s.default.createElement("div",{className:"resource-info-label d-block"},t("MustBeBookedWith")),s.default.createElement("div",{className:"resource-info-value"},i.filter((e=>a.relationships.required.includes(e.id))).map((e=>e.name)).join(", ")))),a.relationships.excluded.length>0&&s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"resource-info-section mt-2"},s.default.createElement("div",{className:"resource-info-label d-block"},t("CannotBeBookedWith")),s.default.createElement("div",{className:"resource-info-value"},i.filter((e=>a.relationships.excluded.includes(e.id))).map((e=>e.name)).join(", ")))),a.relationships.excludedAtTime.length>0&&s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"resource-info-section mt-2"},s.default.createElement("div",{className:"resource-info-label d-block"},t("CannotBeBookedAtSameTime")),s.default.createElement("div",{className:"resource-info-value"},i.filter((e=>a.relationships.excludedAtTime.includes(e.id))).map((e=>e.name)).join(", ")))),a.attributeValues.length>0&&s.default.createElement("div",{className:"resource-info-section mt-2 mb-2"},s.default.createElement("div",{className:"resource-info-label"},t("AdditionalInformation")),r.filter((e=>0===e.entityIds.length||e.entityIds.includes(a.id))).map((e=>{var t;return s.default.createElement(d.CustomAttribute,{attribute:e,value:null===(t=a.attributeValues.find((t=>t.id===e.id)))||void 0===t?void 0:t.value,key:e.id})})))))}},7809:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getReturnUrlWithHash=t.getReservationAccessoryView=t.getScheduleSlotViews=void 0;const a=n(12907);t.getScheduleSlotViews=function(e){return e.map((e=>{const t=e.start.split(":").map((e=>Number.parseInt(e))),n=e.end.split(":").map((e=>Number.parseInt(e)));return{start:e.start,end:e.end,label:e.label,labelEnd:e.labelEnd,isAvailable:e.isAvailable,startHour:t[0],startMinute:t[1],endHour:n[0],endMinute:n[1]}}))},t.getReservationAccessoryView=function(e,t){return{id:e.id,name:e.name,quantityReserved:t}},t.getReturnUrlWithHash=function(e,t){var n;let r=e.metadata.returnUrl;return r!==window.location.href&&r||(r=`${t.path}/schedule.php`),(null===(n=e.reservation)||void 0===n?void 0:n.start)?(r=r.replace(/#\d{4}(?:-\d{1,2}){2}/g,""),`${r}#${(0,a.dateToSystemString)(e.reservation.start,!1)}`):r}},8326:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(67294)),i=n(20745),l=n(68628);n.g.React=r.default,n.g.createRoot=i.createRoot,n.g.ReactComponents={ReservationAppComponent:l.ReservationAppComponent}},75712:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkIsAttributeValid=void 0;const a=n(69989),r=n(99712);t.checkIsAttributeValid=function(e,t){let n="";return t&&(n=t.value.trim()),!(e.required&&(!n||""===n))&&(e.regex?new RegExp(e.regex.replace(/\//g,""),"i").test(n):n.length>0&&e.type===a.AttributeTypeOptions.Link?r.RegExpUrl.test(n):!(n.length>0&&e.possibleValues.length>0)||(e.type===a.AttributeTypeOptions.SelectList?e.possibleValues.includes(n):e.type===a.AttributeTypeOptions.MultiSelect&&n.split(",").every((t=>e.possibleValues.includes(t)))))}},40897:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Recurrence=void 0;const l=i(n(67294)),s=n(81468),o=n(69989),c=n(21291),u=n(88281),d=n(51240);t.Recurrence=function(e){var t;const n=(0,c.useComponentId)("recurrence"),{t:a}=(0,s.useTranslation)(),[r,i]=(0,l.useState)(void 0);function m(t){e.onChanged(e.type,e.interval,e.weekdays,t,e.terminationDate,e.repeatDates)}function f(t){e.onChanged(e.type,e.interval,e.weekdays,e.monthlyType,e.terminationDate,t)}function v(t){return null!==e.weekdays&&e.weekdays.includes(t)}function p(t,n){var a;let r=(null===(a=e.weekdays)||void 0===a?void 0:a.slice())||[];var i;n?r.push(t):r=r.filter((e=>e!==t)),i=r,e.onChanged(e.type,e.interval,i,e.monthlyType,e.terminationDate,e.repeatDates)}function b(t){return null===e.monthlyType&&"dayOfMonth"===t||e.monthlyType===t}(0,l.useEffect)((()=>{e.onChanged(e.type,e.interval,e.weekdays,e.monthlyType,e.terminationDate,e.repeatDates)}),[e.terminationDate]);const h="btn btn-outline-secondary btn-sm ms-2";return l.default.createElement("div",{className:`recurrence ${e.className||""}`},l.default.createElement("div",{className:"recurrence-row"},l.default.createElement("label",{htmlFor:`repeat-type-${n}`,className:"form-label recurrence-label"},a("RepeatPrompt")),l.default.createElement("select",{id:`repeat-type-${n}`,value:e.type||"none",className:"form-select",onChange:t=>{return n=t.target.value,void e.onChanged(n,e.interval,e.weekdays,e.monthlyType,e.terminationDate,e.repeatDates);var n}},l.default.createElement("option",{value:"none"},a("DoesNotRepeat")),l.default.createElement("option",{value:"daily"},a("Daily")),l.default.createElement("option",{value:"weekly"},a("Weekly")),l.default.createElement("option",{value:"monthly"},a("Monthly")),l.default.createElement("option",{value:"yearly"},a("Yearly")),l.default.createElement("option",{value:"custom"},a("SpecificDates")))),null!==e.type&&e.type!==o.RepeatType.Custom&&e.type!==o.RepeatType.None&&l.default.createElement("div",{className:"recurrence-row"},l.default.createElement("label",{htmlFor:`repeat-interval-${n}`,className:"form-label  recurrence-label"},a("RepeatEveryPrompt")),l.default.createElement("select",{id:`repeat-interval-${n}`,value:null===(t=e.interval)||void 0===t?void 0:t.toString(),className:"form-select",onChange:t=>{return n=t.target.value,void e.onChanged(e.type,Number.parseInt(n),e.weekdays,e.monthlyType,e.terminationDate,e.repeatDates);var n}},l.default.createElement("option",{value:"1"},"1"),l.default.createElement("option",{value:"2"},"2"),l.default.createElement("option",{value:"3"},"3"),l.default.createElement("option",{value:"4"},"4"),l.default.createElement("option",{value:"5"},"5"),l.default.createElement("option",{value:"6"},"6"),l.default.createElement("option",{value:"7"},"7"),l.default.createElement("option",{value:"8"},"8"),l.default.createElement("option",{value:"9"},"9"),l.default.createElement("option",{value:"10"},"10"),l.default.createElement("option",{value:"11"},"11"),l.default.createElement("option",{value:"12"},"12"),l.default.createElement("option",{value:"13"},"13"),l.default.createElement("option",{value:"14"},"14"),l.default.createElement("option",{value:"15"},"15"),l.default.createElement("option",{value:"16"},"16"),l.default.createElement("option",{value:"17"},"17"),l.default.createElement("option",{value:"18"},"18"),l.default.createElement("option",{value:"19"},"19"),l.default.createElement("option",{value:"20"},"20")),l.default.createElement("div",{className:"ms-1 d-flex align-items-center"},function(){switch(e.type){case o.RepeatType.Daily:return 1===e.interval?a("day"):a("days");case o.RepeatType.Weekly:return 1===e.interval?a("week"):a("weeks");case o.RepeatType.Monthly:return 1===e.interval?a("month"):a("months");case o.RepeatType.Yearly:return 1===e.interval?a("year"):a("years");default:return""}}()),e.type===o.RepeatType.Weekly&&l.default.createElement("div",{className:"ms-0 ms-sm-1 d-flex align-items-center mt-1 mt-sm-0"},l.default.createElement("div",{className:"d-none d-sm-block"},a("RepeatDaysPrompt")),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:`repeat-sunday-${n}`,checked:v(0),onChange:e=>p(0,e.target.checked)}),l.default.createElement("label",{className:"btn btn-outline-secondary btn-sm ms-0 ms-sm-2",htmlFor:`repeat-sunday-${n}`},l.default.createElement("span",{className:"d-none d-sm-inline"},a("DaySundayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},a("DaySundaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:`repeat-monday-${n}`,checked:v(1),onChange:e=>p(1,e.target.checked)}),l.default.createElement("label",{className:h,htmlFor:`repeat-monday-${n}`},l.default.createElement("span",{className:"d-none d-sm-inline"},a("DayMondayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},a("DayMondaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:`repeat-tuesday-${n}`,checked:v(2),onChange:e=>p(2,e.target.checked)}),l.default.createElement("label",{className:h,htmlFor:`repeat-tuesday-${n}`},l.default.createElement("span",{className:"d-none d-sm-inline"},a("DayTuesdayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},a("DayTuesdaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:`repeat-wednesday-${n}`,checked:v(3),onChange:e=>p(3,e.target.checked)}),l.default.createElement("label",{className:h,htmlFor:`repeat-wednesday-${n}`},l.default.createElement("span",{className:"d-none d-sm-inline"},a("DayWednesdayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},a("DayWednesdaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:`repeat-thursday-${n}`,checked:v(4),onChange:e=>p(4,e.target.checked)}),l.default.createElement("label",{className:h,htmlFor:`repeat-thursday-${n}`},l.default.createElement("span",{className:"d-none d-sm-inline"},a("DayThursdayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},a("DayThursdaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:`repeat-friday-${n}`,checked:v(5),onChange:e=>p(5,e.target.checked)}),l.default.createElement("label",{className:h,htmlFor:`repeat-friday-${n}`},l.default.createElement("span",{className:"d-none d-sm-inline"},a("DayFridayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},a("DayFridaySingle"))),l.default.createElement("input",{type:"checkbox",className:"btn-check",id:`repeat-saturday-${n}`,checked:v(6),onChange:e=>p(6,e.target.checked)}),l.default.createElement("label",{className:h,htmlFor:`repeat-saturday-${n}`},l.default.createElement("span",{className:"d-none d-sm-inline"},a("DaySaturdayAbbr")),l.default.createElement("span",{className:"d-inline d-sm-none"},a("DaySaturdaySingle")))),e.type===o.RepeatType.Monthly&&l.default.createElement("div",{className:"ms-1 d-flex align-items-center mt-1 mt-sm-0"},l.default.createElement("div",null,a("RepeatDaysPrompt")),l.default.createElement("input",{name:`monthly-type-${n}`,type:"radio",className:"btn-check",id:`monthly-type-date-${n}`,checked:b("dayOfMonth"),onChange:()=>m("dayOfMonth")}),l.default.createElement("label",{className:h,htmlFor:`monthly-type-date-${n}`},a("DateOfMonth")),l.default.createElement("input",{name:`monthly-type-${n}`,type:"radio",className:"btn-check",id:`monthly-type-week-${n}`,checked:b("dayOfWeek"),onChange:()=>m("dayOfWeek")}),l.default.createElement("label",{className:h,htmlFor:`monthly-type-week-${n}`},a("WeekOfMonth")))),null!==e.type&&e.type!==o.RepeatType.Custom&&e.type!==o.RepeatType.None&&l.default.createElement("div",{className:" recurrence-row"},l.default.createElement("label",{htmlFor:`repeat-termination-${n}`,className:"form-label recurrence-label"},a("RepeatUntilPrompt")),l.default.createElement(u.BookedDatePicker,{lang:e.lang,id:`repeat-termination-${n}`,wrapperClass:"d-block",inputClass:"form-control reservation-date-picker",onChange:(t,n)=>{var a;n&&(a=n,e.onChanged(e.type,e.interval,e.weekdays,e.monthlyType,a,e.repeatDates))},selectedDate:e.terminationDate||void 0,dateFormat:e.dateFormat||"P",firstDayOfWeek:e.firstDayOfWeek})),e.type===o.RepeatType.Custom&&l.default.createElement("div",{className:" recurrence-row"},l.default.createElement("div",{className:"d-flex"},l.default.createElement("label",{htmlFor:`repeat-repeat-custom-date-${n}`,className:"form-label recurrence-label"},a("RepeatOn")),l.default.createElement(u.BookedDatePicker,{lang:e.lang,id:`repeat-custom-date-${n}`,wrapperClass:"d-block",inputClass:"form-control reservation-date-picker",onChange:(e,t)=>{i(t||void 0)},isClearable:!0,selectedDate:r,minDate:e.minimumRepeatDate||void 0,dateFormat:e.dateFormat||"P",firstDayOfWeek:e.firstDayOfWeek}),l.default.createElement("button",{type:"button",onClick:function(){var t;if(r){if(null===(t=e.repeatDates)||void 0===t?void 0:t.includes(r))return;f([...e.repeatDates||[],r])}},className:"ms-1 btn btn-light",title:a("AddDate")},l.default.createElement("i",{className:"bi bi-plus-circle"}))),l.default.createElement("div",{className:"repeat-date-list"},e.repeatDates&&e.repeatDates.length>0&&l.default.createElement("div",{className:"badge bg-secondary me-3"},e.repeatDates.length),(e.repeatDates||[]).sort(((e,t)=>e.valueOf()-t.valueOf())).map((t=>l.default.createElement("div",{key:t.valueOf(),className:"repeat-date-item"},t.toLocaleDateString(void 0,d.DATE_FORMAT)," ",l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:()=>{return n=t,void f((e.repeatDates||[]).filter((e=>e!==n)));var n},title:a("Remove")},l.default.createElement("i",{className:"bi bi-x"}))))))))}},26002:function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return r(t,e),t},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourcePicker=t.useResourcePicker=void 0;const s=i(n(67294)),o=i(n(43410)),c=l(n(23157)),u=n(81468),d=n(61630);function m(e){const{page:t,defaultResourceIds:n,api:a,resourceGroups:r,scheduleId:i,unavailableResourceIds:l,onResourcesChanged:c,checkboxThreshold:u}=e,[m,f]=(0,s.useState)([]),[v,p]=(0,s.useState)([]),[b,h]=(0,s.useState)(),[g,E]=(0,s.useState)((0,d.getUISettings)().resourcePickerVisibleSection[t]||0),y=(0,d.getUISettings)().resourcePickerExpandedGroups[t]||[],N=u||30;function R(e){if(!v.some((t=>t.id===e.id))){const t=[...v,e];p(t),c&&c(t)}}function O(e){const t=v.filter((t=>t.id!==e.id));p(t),c&&c(t)}function _(e,t){f(e),t.length>0&&h(function(e,t){const n=e.filter((e=>null===e.parentId)).map((e=>`g${e.id}`)),a={};return a.root={id:"root",hasChildren:n.length>0,children:n,isExpanded:!0},e.forEach((n=>{a[`g${n.id}`]=function(n){const a=e.filter((e=>e.parentId===n.id)).map((e=>`g${e.id}`)),r=t.filter((e=>e.resourceGroupIds.includes(n.id))).map((e=>`r${e.id}g${n.id}`));return{id:`g${n.id}`,data:{title:n.name,isGroup:!0,id:n.id},isExpanded:(i=n.id,void 0!==y&&y.includes(i)),hasChildren:a.length>0||r.length>0,children:[...a,...r]};var i}(n)})),t.forEach((e=>{e.resourceGroupIds.forEach((t=>{a[`r${e.id}g${t}`]=function(e,t){return{id:`r${e.id}g${t}`,data:{title:e.name,isGroup:!1,id:e.id,color:e.color,textColor:e.textColor},isExpanded:!1,hasChildren:!1,children:[]}}(e,t)}))})),{rootId:"root",items:a}}(t,e))}return(0,s.useEffect)((()=>{a&&i&&a.getResourceGroupTree(i).then((e=>(_(e.resources,e.groups),p(e.resources.filter((e=>n.includes(e.id)))),e))).catch((e=>{a.logError({action:"getResourceGroupTree",context:{scheduleId:i},error:e})})),e.resources&&r&&(_(e.resources,r),p(e.resources.filter((e=>n.includes(e.id)))))}),[]),{resources:m,treeData:b,visibleSection:g,allowTreeToggle:m.length>N&&void 0!==b,selectedResources:v,showCheckboxList:m.length<=N,isUnavailable:function(e){return null!=l&&l.includes(e)},onResourceSelected:R,onResourceRemoved:O,onVisibleSectionChanged:function(e){(0,d.persistUISettings)({resourcePickerVisibleSection:Object.assign(Object.assign({},(0,d.getUISettings)().resourcePickerVisibleSection),{[t]:e})}),E(e)},onExpand:function(e){if(b){const n=Number.parseInt(e.toString().replace("g",""));if(void 0===y)(0,d.persistUISettings)({resourcePickerExpandedGroups:Object.assign(Object.assign({},(0,d.getUISettings)().resourcePickerExpandedGroups),{[t]:[n]})});else{const e=[...y,n];(0,d.persistUISettings)({resourcePickerExpandedGroups:Object.assign(Object.assign({},(0,d.getUISettings)().resourcePickerExpandedGroups),{[t]:e})})}h((0,o.mutateTree)(b,e,{isExpanded:!0}))}},onCollapse:function(e){if(b){if(void 0!==y){const n=Number.parseInt(e.toString().replace("g",""));(0,d.persistUISettings)({resourcePickerExpandedGroups:Object.assign(Object.assign({},(0,d.getUISettings)().resourcePickerExpandedGroups),{[t]:y.filter((e=>e!==n))})})}h((0,o.mutateTree)(b,e,{isExpanded:!1}))}},isTreeItemChecked:function e(t){if(!b)return{checked:!1,indeterminate:!1};if(t.data.isGroup){if(0===t.children.length)return{checked:!1,indeterminate:!1};const n=t.children.every((t=>e(b.items[t]).checked));return{checked:n,indeterminate:t.children.some((t=>e(b.items[t]).checked))&&!n}}return{checked:v.some((e=>e.id===t.data.id)),indeterminate:!1}},onChangeTreeItem:function(e,t){if(b)if(e.data.isGroup){const n=[];!function e(t,n){m.filter((e=>e.resourceGroupIds.includes(t.data.id))).forEach((e=>{n.push(e)})),t.children.forEach((t=>{const a=b.items[t];a.data.isGroup&&e(a,n)}))}(e,n);let a=[];a=t?[...v,...n]:v.filter((e=>!n.some((t=>t.id===e.id)))),p(a),c&&c(a)}else{const n=m.find((t=>t.id===e.data.id));t?R(n):O(n)}}}}t.useResourcePicker=m,t.ResourcePicker=function(e){const{t}=(0,u.useTranslation)(),{treeData:n,resources:a,showCheckboxList:r,allowTreeToggle:i,selectedResources:l,visibleSection:d,isUnavailable:f,onVisibleSectionChanged:v,onResourceSelected:p,onResourceRemoved:b,onExpand:h,onCollapse:g,isTreeItemChecked:E,onChangeTreeItem:y}=m(e);function N(e){return d===e?"active":""}function R(e){return e.color?{backgroundColor:e.color,color:e.textColor||"#000"}:{}}return r?s.default.createElement("div",{className:"resource-picker"},a.map((e=>s.default.createElement("div",{key:e.id,className:"form-check"},s.default.createElement("label",{htmlFor:`resource-filter-${e.id}`,className:"form-check-label reservation-resource "+(f(e.id)?"unavailable-resource":""),style:R(e)},e.name),s.default.createElement("input",{type:"checkbox",className:"form-check-input",name:"rid[]",id:`resource-filter-${e.id}`,checked:l.some((t=>t.id===e.id)),value:e.id,onChange:t=>{t.target.checked?p(e):b(e)}}))))):s.default.createElement("div",{className:"resource-picker"},i&&s.default.createElement("div",null,s.default.createElement("ul",{className:"nav nav-tabs mb-2"},s.default.createElement("li",{className:"nav-item"},s.default.createElement("button",{type:"button",className:`nav-link ${N(0)}`,"aria-current":"page",onClick:()=>v(0)},t("Resources"))),s.default.createElement("li",{className:"nav-item"},s.default.createElement("button",{type:"button",className:`nav-link ${N(1)}`,onClick:()=>v(1)},t("Groups"))))),0===d&&s.default.createElement("div",null,s.default.createElement(c.default,{options:a.filter((e=>!l.some((t=>t.id===e.id)))),getOptionLabel:e=>e.name,getOptionValue:e=>e.id.toString(),onChange:e=>{e&&p(e)},isClearable:!0,placeholder:t("Resources"),menuPortalTarget:document.body,className:"mb-2",styles:{menuPortal:e=>Object.assign(Object.assign({},e),{zIndex:9999}),option:(e,{data:t})=>f(t.id)?Object.assign(Object.assign({},e),{color:"#AA3939",textDecoration:"line-through"}):Object.assign(Object.assign({},e),((e="transparent")=>({alignItems:"center",display:"flex",":before":{backgroundColor:e,borderRadius:10,content:'" "',display:"block",marginRight:8,height:10,width:10}}))(t.color))},value:null}),l.map((e=>s.default.createElement("div",{className:"selected-resource",key:e.id},s.default.createElement("button",{type:"button",className:"btn btn-link remove-button",title:t("Remove"),onClick:()=>b(e)},s.default.createElement("span",{className:"bi bi-x"})),s.default.createElement("div",{className:"form-check-label reservation-resource "+(f(e.id)?"unavailable-resource":""),style:R(e)},e.name),s.default.createElement("input",{type:"checkbox",className:"no-show",name:"rid[]",id:`resource-filter-${e.id}`,checked:!0,value:e.id,readOnly:!0}))))),1===d&&void 0!==n&&s.default.createElement("div",null,s.default.createElement(o.default,{isDragEnabled:!1,tree:n,renderItem:({item:e,provided:t})=>{const n=e.data.isGroup?"group":"resource",a=!e.data.isGroup&&f(e.data.id)?"unavailable-resource":"",r=e.data.isGroup?"reservation-group":"reservation-resource",i=E(e);let l={};return e.data.color&&(l={backgroundColor:e.data.color,color:e.data.textColor||"#000"}),s.default.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:(o=t.draggableProps.style,Object.assign({overflow:"auto"},o)),className:`resource-group-tree-item ${n}`}),s.default.createElement(s.default.Fragment,null,(e=>e.children&&e.children.length>0?e.isExpanded?s.default.createElement("span",{role:"button",className:"bi bi-chevron-down resource-group-tree-navigation",onClick:()=>g(e.id)}):s.default.createElement("span",{role:"button",className:"bi bi-chevron-right resource-group-tree-navigation",onClick:()=>h(e.id)}):s.default.createElement("span",{role:"button",className:"resource-group-tree-navigation ms-3"}))(e),s.default.createElement("div",{className:"form-check d-inline-block"},s.default.createElement("input",{className:"form-check-input",type:"checkbox",value:e.data.id,id:`group-chk-${e.id}`,checked:i.checked,onChange:t=>y(e,t.target.checked),ref:e=>e&&(e.indeterminate=i.indeterminate)}),s.default.createElement("label",{className:`form-check-label ${r} ${a}`,htmlFor:`group-chk-${e.id}`,style:l},s.default.createElement("div",null,e.data?e.data.title:"")))));var o},onExpand:h,onCollapse:g,offsetPerLevel:15}),l.map((e=>s.default.createElement("input",{key:e.id,type:"hidden",name:"rid[]",value:e.id,readOnly:!0})))))}},51240:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TIME_FORMAT=t.DATE_FORMAT=t.DATE_TIME_FORMAT=t.Clock=void 0;const a=n(70722);class r{constructor(e){this._now=e}now(e){return this._now?this._now:r.toTimezone(new Date,e)}addDays(e,t){const n=new Date(t.valueOf());return n.setDate(n.getDate()+e),n}addMonths(e,t){const n=new Date(t.valueOf());return n.setMonth(n.getMonth()+e),n}addYears(e,t){const n=new Date(t.valueOf());return n.setFullYear(n.getFullYear()+e),n}addMinutes(e,t){const n=new Date(t.valueOf());return n.setTime(n.getTime()+60*e*1e3),n}setTime(e,t){const n=t.split(":").map((e=>Number.parseInt(e))),a=new Date(e.valueOf());return a.setHours(n[0]),a.setMinutes(n[1]),a.setSeconds(0),a}static toTimezone(e,t){return(0,a.utcToZonedTime)(new Date(e.toUTCString()),t)}static asTimezone(e,t){return(0,a.toDate)((0,a.format)(e,"yyyy-MM-dd HH:mm"),{timeZone:t})}}t.Clock=r,t.DATE_TIME_FORMAT={year:"2-digit",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:void 0},t.DATE_FORMAT={year:"2-digit",month:"numeric",day:"numeric"},t.TIME_FORMAT={hour:"numeric",minute:"numeric",second:void 0}},12907:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.removeStrong=t.bytesToString=t.stringToDate=t.dateToSystemString=t.nl2br=t.linkify=t.formatDuration=t.getDuration=t.intervalAsString=t.intervalAsMinutes=t.formatAsTime=void 0;const a=n(73356);function r(e){return(e||"").replace(/\n/g,"<br />")}t.formatAsTime=function(e,t,n=!1){if(n){let n=e,a="AM";return e>12&&(n=e-12),e>11&&(a="PM"),0===e&&(n=12),`${n.toString()}:${t.toString().padStart(2,"0")} ${a}`}return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},t.intervalAsMinutes=function(e){if(e)return 24*e.days*60+60*e.hours+e.minutes},t.intervalAsString=function(e,t){if(!e)return"";let n="";return e.days>1&&(n+=`${e.days} ${t("days")} `),1===e.days&&(n+=`${e.days} ${t("day")} `),e.hours>1&&(n+=`${e.hours} ${t("hours")} `),1===e.hours&&(n+=`${e.hours} ${t("hour")} `),e.minutes>1&&(n+=`${e.minutes} ${t("minutes")} `),1===e.minutes&&(n+=`${e.minutes} ${t("minute")} `),n},t.getDuration=function(e,t){let n=(e.getTime()-t.getTime())/1e3;const a=Math.floor(n/86400);n%=86400;let r=Math.floor(n/3600);n%=3600;let i=Math.round(n/60);return 60===i&&(i=0,r++),{days:a,hours:r,minutes:i}},t.formatDuration=function(e,t){let n="";return 1===e.days&&(n=`1 ${t("day")}`),e.days>1&&(n=`${e.days} ${t("days")}`),1===e.hours&&(n=`${n} 1 ${t("hour")}`),e.hours>1&&(n=`${n} ${e.hours} ${t("hours")}`),1===e.minutes&&(n=`${n} 1 ${t("minute")}`),e.minutes>1&&(n=`${n} ${e.minutes} ${t("minutes")}`),n},t.linkify=function(e){return r((e||"").replace(/(\s|^)(((https?:\/\/)|(www\.))(\S+))/gi,((e,t,n)=>{let a=n;return a.match("^https?://")||(a=`http://${a}`),`${t}<a target="_blank" href="${a}" rel="nofollow">${n}</a>`})))},t.nl2br=r,t.dateToSystemString=function(e,t=!0){const n=t?` ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`:"";return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}${n}`},t.stringToDate=function(e){return e&&""!==e?e.includes("T")?(0,a.parseISO)(e):(0,a.parse)(e,"yyyy-MM-dd",new Date):null},t.bytesToString=function(e){const t=Math.floor(Math.log(e)/Math.log(1024));return e?`${Number.parseFloat((e/Math.pow(1024,t)).toFixed(2))}${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}`:"0 Bytes"},t.removeStrong=function(e){return e.replace("<strong>","").replace("</strong>","")}},99712:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RegExpUrl=void 0,t.RegExpUrl=new RegExp("[(http(s)?):\\/\\/(www\\.)?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)")},94559:(e,t)=>{function n(e){return function(e){const t=[];return e.forEach((e=>{t[e.id]=e})),t}(e)}function a(e){return null!=e&&"object"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.deepEqual=t.lookupStateToArray=t.createLookupState=t.createIndexed=void 0,t.createIndexed=n,t.createLookupState=function(e){return{allIds:e.map((e=>e.id)),byId:n(e)}},t.lookupStateToArray=function(e){return e.allIds.map((t=>e.byId[t]))},t.deepEqual=function e(t,n){const r=Object.keys(t),i=Object.keys(n);if(r.length!==i.length)return!1;for(const i of r){const r=t[i],l=n[i],s=a(r)&&a(l);if(s&&!e(r,l)||!s&&r!==l)return!1}return!0}},68208:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultFileUrlMethods=void 0,t.getDefaultFileUrlMethods=function(){return{createObjectURL:URL.createObjectURL,revokeObjectURL:URL.revokeObjectURL}}},21291:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useComponentId=void 0;const a=n(67294);let r=0;t.useComponentId=e=>`${e}${(0,a.useMemo)((()=>r++),[e])}`},28194:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useFullscreenStatus=void 0;const r=a(n(67294));t.useFullscreenStatus=function(e){const t="undefined"!==document.fullscreenElement?"fullscreenElement":"undefined"!==document.mozFullScreenElement?"mozFullScreenElement":"undefined"!==document.msFullscreenElement?"msFullscreenElement":"undefined"!==document.webkitFullscreenElement?"webkitFullscreenElement":"",[n,a]=r.default.useState(null!=document[t]);return r.default.useLayoutEffect((()=>{if(""===t)return document.addEventListener("fullscreenchange",(()=>a(null!=document[t]))),()=>document.removeEventListener("fullscreenchange")})),""===t?[!1,()=>{}]:[n,()=>{e&&e.current&&t&&e.current.requestFullscreen().then((()=>{a(null!=document[t])})).catch((()=>{a(!1)}))}]}},90145:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useOnEscape=void 0;const a=n(67294);t.useOnEscape=function(e){const t=(0,a.useCallback)((t=>{27===t.keyCode&&e()}),[]);(0,a.useEffect)((()=>(document.addEventListener("keydown",t,!1),()=>{document.removeEventListener("keydown",t,!1)})),[])}}},e=>{e.O(0,[115,410,722,415,490,406,877],(()=>(8326,e(e.s=8326)))),e.O()}]);